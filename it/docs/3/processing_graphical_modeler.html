<!DOCTYPE html>

<html lang="it" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Automating Complex Workflows using Processing Modeler (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=4f581db3"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=0173e136"></script>
    <link rel="search" title="Cerca" href="../../search.html" />
    <link rel="next" title="Automating Map Creation with Print Layout Atlas (QGIS3)" href="automating_map_creation.html" />
    <link rel="prev" title="Batch Processing using Processing Framework (QGIS3)" href="batch_processing.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduzione</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Creazione di una stampa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Lavorare con gli Attributi (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importare fogli elettronici o file CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Tematizzare i dati vettoriali (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calcolare la Lunghezza Lineare e le Statistiche (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Tematizzazione ed analisi di RASTER (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mosaici e operazioni di ritaglio con i layer raster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenziazione carte topografiche e mappe scannerizzate (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferencing Aerial Imagery (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizing Map Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Realizzare unioni tabellari (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizzare unioni spaziali (Spatial Joins)  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Utilizzare le interrogazioni spaziali (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Campionare i dati di un raster usando punti o poligoni (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Realizzare Heatmaps (mappe di concentrazione)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animating Time Series Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Advanced Raster Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometric_buildings.html">Creating Isometric Buildings (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Making Interactive Canvas Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_reveal_maps.html">Making Interactive Reveal Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Creating an Animated Cartogram (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">Creating a Colorized River Basin Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">Creating a Landuse Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">Determining Landuse Buffer Zones (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">Mapping Waste Disposal Volumes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Cercare e scaricare i dati di OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Risorse disponibili per l’apprendimento di QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Fonti dei dati</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="batch_processing.html" title="Previous Chapter: Batch Processing using Processing Framework (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Batch Process...</span>
    </a>
  </li>
  <li>
    <a href="automating_map_creation.html" title="Next Chapter: Automating Map Creation with Print Layout Atlas (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Automating Ma... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="automating-complex-workflows-using-processing-modeler-qgis3">
<h1>Automating Complex Workflows using Processing Modeler (QGIS3)<a class="headerlink" href="#automating-complex-workflows-using-processing-modeler-qgis3" title="Link to this heading">¶</a></h1>
<p>GIS Workflows typically involve many steps - with each step generating intermediate output that is used by the next step. If you change the input data or want to tweak a parameter, you will need to run through the entire process again manually.  Fortunately, QGIS has a graphical modeler built-in that can help you define your workflow and run it with a single invocation. You can also run these workflows as a batch over a large number of inputs.</p>
<section id="overview-of-the-task">
<h2>Overview of the task<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>We will take a point layer of maritime piracy incidents and create a processing model to produce a density map by aggregating them over a global hexagonal grid.</p>
<section id="other-skills-you-will-learn">
<h3>Other skills you will learn<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Using a global equal area projection and setting the Project CRS.</p></li>
<li><p>Applying a Graduated symbology to a polygon layer.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Get the data<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p>National Geospatial-Intelligence Agency’s <a class="reference external" href="https://msi.nga.mil/NGAPortal/MSI.portal">Maritime Safety Information portal</a> provides a shapefile of all incidencts of maritine piracy in the form on <a class="reference external" href="https://msi.nga.mil/Piracy">Anti-shipping Activity Messages</a>. Download the <a class="reference external" href="https://msi.nga.mil/api/publications/download?key=16920958/SFH00000/ASAM_shp.zip&amp;type=download">Arc Shape file</a> version of the database.</p>
<p><a class="reference external" href="http://naturalearthdata.com">Natural Earth</a> has several global vector
layers. Download the <a class="reference external" href="https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/physical/ne_10m_land.zip">10m Physical Vectors - Land</a> containing Land polygons.</p>
<p>For convenience, you may directly download a copy of the above layers from below:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/ASAM_shp.zip">ASAM_shp.zip</a></p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/ne_10m_land.zip">ne_10m_land.zip</a></p>
<p>Data Source: <a class="reference internal" href="../credits.html#nga-msi" id="id1"><span>[NGA_MSI]</span></a> <a class="reference internal" href="../credits.html#naturalearth" id="id2"><span>[NATURALEARTH]</span></a></p>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>In the QGIS Browser Panel, locate the directory where you saved your downloaded data. Expand the <code class="docutils literal notranslate"><span class="pre">ne_10m_land.zip</span></code> and select the <code class="docutils literal notranslate"><span class="pre">ne_10m_land.shp</span></code> layer. Drag the layer to the canvas. Next, locate the <code class="docutils literal notranslate"><span class="pre">ASAM_shp.zip</span></code> file. Expand it and select the <code class="docutils literal notranslate"><span class="pre">asam_data_download/ASAM_events.shp</span></code> layer and drag it on to the canvas.</p></li>
</ol>
<img alt="../../_images/1142.png" class="align-center" src="../../_images/1142.png" />
<ol class="arabic simple" start="2">
<li><p>The <code class="docutils literal notranslate"><span class="pre">ASAM_events.shp</span></code> layer does not have projection information associated with it, so you will be prompted to select a CRS in the <span class="guilabel">Coordinate Reference System Selector</span>. Here, the points are in the Latitude and Longitude coordinates, so select the <code class="docutils literal notranslate"><span class="pre">WGS</span> <span class="pre">84</span></code> CRS and click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/2121.png" class="align-center" src="../../_images/2121.png" />
<ol class="arabic simple" start="3">
<li><p>Once the layer is loaded, you can see the individual points representing incidents of piracy locations. Let’s start building our Processing model to process these layers. Go to <span class="menuselection">Processing ‣ Graphical Modeler…</span>.</p></li>
</ol>
<img alt="../../_images/358.png" class="align-center" src="../../_images/358.png" />
<ol class="arabic simple" start="4">
<li><p>In the <span class="guilabel">Processing Modeler</span> dialog, locate the <span class="guilabel">Model Properties</span> panel. Enter <code class="docutils literal notranslate"><span class="pre">piracy</span> <span class="pre">hexbin</span></code> as the <span class="guilabel">Name</span> of the model and <code class="docutils literal notranslate"><span class="pre">projects</span></code> as the <span class="guilabel">Groups</span>. Click the <span class="guilabel">Save</span> button.</p></li>
</ol>
<img alt="../../_images/430.png" class="align-center" src="../../_images/430.png" />
<ol class="arabic simple" start="5">
<li><p>Save the model as <code class="docutils literal notranslate"><span class="pre">piracy_hexbin</span></code>.</p></li>
</ol>
<img alt="../../_images/528.png" class="align-center" src="../../_images/528.png" />
<ol class="arabic simple" start="6">
<li><p>Now we can start building a graphical model of our processing pipeline.  The <span class="guilabel">Processing modeler</span> dialog contains a left-hand panel and a main canvas. On the left-hand panel, locate the <span class="guilabel">Inputs</span> panel listing various types of input data types. Scroll down and select the <span class="guilabel">+ Vector Layer</span> input. Drag it to the canvas.</p></li>
</ol>
<img alt="../../_images/628.png" class="align-center" src="../../_images/628.png" />
<ol class="arabic simple" start="7">
<li><p>Enter <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">Points</span></code> as the <span class="guilabel">Parameter name</span> and <code class="docutils literal notranslate"><span class="pre">Point</span></code> as the <span class="guilabel">Geometry type</span>. This input represents the piracy incidents point layer.</p></li>
</ol>
<img alt="../../_images/727.png" class="align-center" src="../../_images/727.png" />
<ol class="arabic simple" start="8">
<li><p>Next, drag another <span class="guilabel">+ Vector Layer</span> input to the canvas. Enter <code class="docutils literal notranslate"><span class="pre">Base</span> <span class="pre">Layer</span></code> as the <span class="guilabel">Parameter name</span> and <code class="docutils literal notranslate"><span class="pre">Polygon</span></code> as the <span class="guilabel">Geometry type</span>. This input represents the natural earth global land layer.</p></li>
</ol>
<img alt="../../_images/827.png" class="align-center" src="../../_images/827.png" />
<ol class="arabic simple" start="9">
<li><p>As we are generating a global hexagonal grid, we can ask the user to supply us the grid size as an input instead of hard-coding it as part of our model. This way, the user can quickly experiment with different grid sizes without changing the model at all. select a <span class="guilabel">+ Number</span> input and drag it to the canvas. Enter <code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">Size</span></code> as the <span class="guilabel">Parameter name</span> and click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/927.png" class="align-center" src="../../_images/927.png" />
<ol class="arabic simple" start="10">
<li><p>Now that we have our user inputs defined, we are ready to add processing steps. All of the processing algorithms are available to you under the <span class="guilabel">Algorithms</span> tab. The first step in our pipeline will be to reproject the base layer to the Project CRS.  Search for <code class="docutils literal notranslate"><span class="pre">Reproject</span> <span class="pre">layer</span></code> algorithm and drag it to the canvas.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>The necessity of this reprojection step will become clear shortly. The grid generation algorithm requires us to specify the extent of the grid in the unit of the Project CRS. We can supply this reprojected layer to compute this extent.</p>
</div>
<img alt="../../_images/1035.png" class="align-center" src="../../_images/1035.png" />
<ol class="arabic simple" start="11">
<li><p>In the <span class="guilabel">Reproject layer</span> dialog, select <code class="docutils literal notranslate"><span class="pre">Base</span> <span class="pre">Layer</span></code> as the <span class="guilabel">Input layer</span>. Check the <span class="guilabel">Use project CRS</span> as the <span class="guilabel">Target CRS</span>. Click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1143.png" class="align-center" src="../../_images/1143.png" />
<ol class="arabic simple" start="12">
<li><p>In the <span class="guilabel">Processing Modeler</span> canvas, you will notice a connection appear between the <span class="guilabel">+ Base Layer</span> input and the <span class="guilabel">Reproject layer</span> algorithm. This connection indicates the flow of our processing pipeline. Next step is to create a hexagonal grid. Search for the <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">grid</span></code> algorithm and drag it to the canvas.</p></li>
</ol>
<img alt="../../_images/1236.png" class="align-center" src="../../_images/1236.png" />
<ol class="arabic simple" start="13">
<li><p>In the <span class="guilabel">Generate grid</span> dialog, choose <code class="docutils literal notranslate"><span class="pre">Hexagon</span> <span class="pre">(polygon)</span></code> as the <span class="guilabel">Grid type</span>. Select <code class="docutils literal notranslate"><span class="pre">Extent</span> <span class="pre">of</span> <span class="pre">'Reprojected'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Reproject</span> <span class="pre">Layer'</span></code> as the <span class="guilabel">Grid extent</span>. Click the <span class="guilabel">123</span> button under the <span class="guilabel">Horizonal spacing</span> label and choose <span class="guilabel">Model input</span>.</p></li>
</ol>
<img alt="../../_images/1334.png" class="align-center" src="../../_images/1334.png" />
<ol class="arabic simple" start="14">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">Size</span></code> input for <span class="guilabel">Using model input</span>. Repeat the same process for <span class="guilabel">Vertical Spacing</span>. Click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1432.png" class="align-center" src="../../_images/1432.png" />
<ol class="arabic simple" start="15">
<li><p>At this point, we have a global hexagonal grid. The grid spans the full extent of the base layer, including land areas and places where there are no points. Let’s filter out those grid polygons where there are no input points. Search for <code class="docutils literal notranslate"><span class="pre">Extract</span> <span class="pre">by</span> <span class="pre">location</span></code> algorithm and drag it to the canvas.</p></li>
</ol>
<img alt="../../_images/1527.png" class="align-center" src="../../_images/1527.png" />
<ol class="arabic simple" start="16">
<li><p>For <span class="guilabel">Extract features from</span>, select <code class="docutils literal notranslate"><span class="pre">'Grid'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Generate</span> <span class="pre">Grid'</span></code>, <span class="guilabel">Where the features (geometric predicate)</span> as <code class="docutils literal notranslate"><span class="pre">Intersect</span></code> and <span class="guilabel">By comparing to the features from</span> as <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">points</span></code>. Click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1626.png" class="align-center" src="../../_images/1626.png" />
<ol class="arabic simple" start="17">
<li><p>Now we have only those grid polygons that contain some input points. To aggregate these points, we will use <code class="docutils literal notranslate"><span class="pre">Count</span> <span class="pre">points</span> <span class="pre">in</span> <span class="pre">polygon</span></code> algorithm. Search and drag it to the canvas.</p></li>
</ol>
<img alt="../../_images/1727.png" class="align-center" src="../../_images/1727.png" />
<ol class="arabic simple" start="18">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">'Extracted</span> <span class="pre">(location)'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Extract</span> <span class="pre">by</span> <span class="pre">location'</span></code> as the value for <span class="guilabel">Polygons</span>. The <span class="guilabel">Points</span> layer would be <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">Points</span></code>. At the bottom, name the <span class="guilabel">Count</span> output layer as <code class="docutils literal notranslate"><span class="pre">Aggregated</span></code>. Click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1823.png" class="align-center" src="../../_images/1823.png" />
<ol class="arabic simple" start="19">
<li><p>The model is now complete. Click the <span class="guilabel">Save</span> button.</p></li>
</ol>
<img alt="../../_images/1919.png" class="align-center" src="../../_images/1919.png" />
<ol class="arabic simple" start="20">
<li><p>Switch to the main QGIS window. You can find your newly created model in the <span class="guilabel">Processing Toolbox</span> under <span class="menuselection">Models ‣ projects ‣ piracy_hexbin</span>. Now it is time to run and test the model. As our goal is to aggregate the input points over hexagonal grids, it is important that the grids are generated using a equal-area projection. This will ensure that regardless of the location of the grid, it will cover exactly the same area. Our model doesn’t explicitely ask for a CRS, but uses whatever CRS is set as the <strong>Project CRS</strong>. Let’s choose a global equal area projection as the Project CRS. Go to <span class="menuselection">Project ‣ Properties</span>.</p></li>
</ol>
<img alt="../../_images/2018.png" class="align-center" src="../../_images/2018.png" />
<ol class="arabic simple" start="21">
<li><p>In the <span class="guilabel">Project Properties</span> dialog, switch to the <span class="guilabel">CRS</span> tab. We will use a global <strong>Mollweide</strong> projection for this exercise which is a equal area projection. Search for <code class="docutils literal notranslate"><span class="pre">Mollweide</span></code> in the <span class="guilabel">Filter</span> box and select <code class="docutils literal notranslate"><span class="pre">World_Mollweide</span> <span class="pre">EPSG:54009</span></code> as the CRS. Click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/2122.png" class="align-center" src="../../_images/2122.png" />
<ol class="arabic simple" start="22">
<li><p>You will see the layers getting reprojected on-the-fly to the selected CRS. Locate the <code class="docutils literal notranslate"><span class="pre">piracy_hexbin</span></code> model in the <span class="guilabel">Processing Toolbox</span> and double-click it.</p></li>
</ol>
<img alt="../../_images/2219.png" class="align-center" src="../../_images/2219.png" />
<ol class="arabic simple" start="23">
<li><p>Our <span class="guilabel">Base Layer</span> is the <code class="docutils literal notranslate"><span class="pre">ne_10m_land</span></code> and the <span class="guilabel">Input Points</span> layer is <code class="docutils literal notranslate"><span class="pre">ASAM_events</span></code>. The <span class="guilabel">Grid Size</span> needs to be specified in the units of the selected CRS. The World_Mollweide CRS unit is meters, so we specify <code class="docutils literal notranslate"><span class="pre">100000</span></code> m (100 Kms) as the <span class="guilabel">Grid Size</span>. Click <span class="guilabel">Run</span> to start the processing pipeline. Once the process finishes, click <span class="guilabel">Close</span>.</p></li>
</ol>
<img alt="../../_images/2317.png" class="align-center" src="../../_images/2317.png" />
<ol class="arabic simple" start="24">
<li><p>You will see a new layer <code class="docutils literal notranslate"><span class="pre">Aggregated</span></code> loaded as the result of the model. As you explore, you will notice the layer contains an attribute called <em>NUMPOINTS</em> containing the number of piracy incidents points contained within that grid feature. Let’s style this layer to display this information better. Right-click the <code class="docutils literal notranslate"><span class="pre">Aggregated</span></code> layer and select <span class="guilabel">Properties</span>.</p></li>
</ol>
<img alt="../../_images/2416.png" class="align-center" src="../../_images/2416.png" />
<ol class="arabic simple" start="25">
<li><p>Switch to the <span class="guilabel">Symbology</span> tab. Select <code class="docutils literal notranslate"><span class="pre">Graduated</span></code> symbology and <code class="docutils literal notranslate"><span class="pre">NUMPOINTS</span></code> as the <span class="guilabel">Column</span>. Click <code class="docutils literal notranslate"><span class="pre">Change..</span></code> next to <span class="guilabel">Symbol</span> label.</p></li>
</ol>
<img alt="../../_images/2515.png" class="align-center" src="../../_images/2515.png" />
<ol class="arabic simple" start="26">
<li><p>Select <span class="guilabel">Simple fill</span> symbol and check the <span class="guilabel">Transparent Stroke</span> button under <span class="guilabel">Stroke color</span>. This is to make the hexagon edges transparent.</p></li>
</ol>
<img alt="../../_images/2614.png" class="align-center" src="../../_images/2614.png" />
<ol class="arabic simple" start="27">
<li><p>Click the dropdown next to <span class="guilabel">Color ramp</span> and select the <code class="docutils literal notranslate"><span class="pre">Viridis</span></code> ramp. Click the dropdown again and select <span class="guilabel">Invert Color Ramp</span> to reverse the order of color.</p></li>
</ol>
<img alt="../../_images/2715.png" class="align-center" src="../../_images/2715.png" />
<ol class="arabic simple" start="28">
<li><p>The Graduated symbology will divide the values in the selected column into distinct classes and assign a different color to each of the classes. Select <code class="docutils literal notranslate"><span class="pre">Natural</span> <span class="pre">Breaks</span> <span class="pre">(Jenks)</span></code> as the <span class="guilabel">Mode</span> and click <span class="guilabel">Classify</span> and click <span class="guilabel">OK</span>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>see <a class="reference internal" href="../basic_vector_styling.html"><span class="doc">Principali tematizzazioni per dati vettoriali</span></a> for a detailed explanation of different modes.</p>
</div>
<img alt="../../_images/2815.png" class="align-center" src="../../_images/2815.png" />
<ol class="arabic simple" start="29">
<li><p>Back in the main QGIS window, turn off the <code class="docutils literal notranslate"><span class="pre">ASAM_events</span></code> layer. You will see a nice visualization of piracy hotspots across the globe.</p></li>
</ol>
<img alt="../../_images/2914.png" class="align-center" src="../../_images/2914.png" />
<p>Now that you have encoded the full data pipeline in the model, it is easy to reproduce your results. A model also allows you to experiment quickly without manually repeating each intermediate step every time. If your inputs change over time, say an updated database of piracy is released after a few months, you can run your model on that input to generate a similar visualization without having to remember each step.</p>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      Ultimo aggiornamento nov 03, 2024.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/processing_graphical_modeler.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>