<!DOCTYPE html>

<html lang="it" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Realizzare Heatmaps (mappe di concentrazione) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=4f581db3"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=0173e136"></script>
    <link rel="search" title="Cerca" href="../../search.html" />
    <link rel="next" title="Animating Time Series Data (QGIS3)" href="animating_time_series.html" />
    <link rel="prev" title="Calculating Raster Area (QGIS3)" href="calculating_raster_area.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduzione</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Creazione di una stampa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Lavorare con gli Attributi (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importare fogli elettronici o file CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Tematizzare i dati vettoriali (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calcolare la Lunghezza Lineare e le Statistiche (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Tematizzazione ed analisi di RASTER (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mosaici e operazioni di ritaglio con i layer raster (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenziazione carte topografiche e mappe scannerizzate (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferencing Aerial Imagery (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizing Map Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Realizzare unioni tabellari (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Realizzare unioni spaziali (Spatial Joins)  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Utilizzare le interrogazioni spaziali (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Campionare i dati di un raster usando punti o poligoni (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Realizzare Heatmaps (mappe di concentrazione)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animating Time Series Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Advanced Raster Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">Creating a Colorized River Basin Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">Creating a Landuse Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">Determining Landuse Buffer Zones (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">Mapping Waste Disposal Volumes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Cercare e scaricare i dati di OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Risorse disponibili per l’apprendimento di QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Fonti dei dati</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="calculating_raster_area.html" title="Previous Chapter: Calculating Raster Area (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Calculating R...</span>
    </a>
  </li>
  <li>
    <a href="animating_time_series.html" title="Next Chapter: Animating Time Series Data (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Animating Tim... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="creating-heatmaps-qgis3">
<h1>Realizzare Heatmaps (mappe di concentrazione)<a class="headerlink" href="#creating-heatmaps-qgis3" title="Link to this heading">¶</a></h1>
<p>Le mappe di concentrazione (o heatmaps in inglese) sono strumenti utili per identificare la densità di punti che rappresentano un certo fenomeno. Vengono ad esempio utilizzate per vedere la concentrazione di atti criminosi, o incidenti in auto, concentrazione di edifici etc. QGIS ha due optioni per creare mappa di concentrazione - una direttamente dalle opzioni di tematizzazione di un livello vettoriale, ed un algoritmo <strong>Heatmap (Kernel Density Estimation)</strong>  che crea un raster da un livello vettoriale di punti.</p>
<section id="overview-of-the-task">
<h2>Descrizione del compito<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>Lavoreremo con un dataset sugli eventi criminosi avvenuti nella zona del Surrey, Regno Unito, nell’anno 2011.  Individueremo quindi le aree a maggiore attività criminale nel paese.</p>
<section id="other-skills-you-will-learn">
<h3>Altri aspetti che avremo modo di apprendere nel corso dell’esercizio<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Utilizzare campi/colonne virtuali ed espressioni condizionali</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Ottenere i dati necessari.<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://data.police.uk">data.police.uk</a> dati su eventi criminosi in un file CSV. Scarica i dati <a class="reference external" href="https://data.police.uk/data/">Surrey Police</a> ed estraete l’archivio ZIP per avere il file CSV.</p>
<p>Per comodità, potete scaricare direttamente una copia del dataset dal seguente link:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/2019-02-surrey-street.csv">2019-02-surrey-street.csv</a></p>
<p>Fonte Dati <a class="reference internal" href="../credits.html#policeuk" id="id1"><span>[POLICEUK]</span></a></p>
</section>
<section id="procedure">
<h2>Procedimento<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>We will first load a basemap layer from <em>OpenStreetMap</em> and then import the CSV data. In the <span class="guilabel">Browser</span> tab, scroll down and locate the <span class="guilabel">XYZ Tiles</span> section.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/140.png" class="align-center" src="../../_images/140.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Expand it to see the <span class="guilabel">OpenStreetMap</span> tile layer. Drag and drop it to the main canvas. Next we will load the CSV file. Click the <span class="guilabel">Open Data Source Manager</span> button.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/229.png" class="align-center" src="../../_images/229.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Nel pannello selezionate ora la sezione  <span class="guilabel">Delimited Text</span> . Qui importate il file CSV con le informazioni sugli atti criminosi registrati. Cliccate il pulsante <span class="guilabel">…</span> vicino al pulsante <span class="guilabel">File name</span> e trovate il file scaricato <code class="docutils literal notranslate"><span class="pre">2019-02-surrey-street.csv</span></code>.  La colonna <span class="guilabel">X field</span> e <span class="guilabel">Y field</span> nella sezione <span class="guilabel">Geometry Definition</span> verrà automaticamente valorizzata con le colonne <code class="docutils literal notranslate"><span class="pre">Longitude</span></code> and <code class="docutils literal notranslate"><span class="pre">Latitude</span></code> rispettivamente. Il  <span class="guilabel">Geometry CRS</span> devee essere <code class="docutils literal notranslate"><span class="pre">EPSG:4326</span> <span class="pre">-</span> <span class="pre">WGS</span> <span class="pre">84</span></code> . Verificate che appaia corretto nel pannello <span class="guilabel">Sample data</span> e selezionate <span class="guilabel">Add</span>, seguito da <span class="guilabel">Close</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/320.png" class="align-center" src="../../_images/320.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Vedrai due livelli nel progetto QGIS - <code class="docutils literal notranslate"><span class="pre">OpenStreetMap</span></code> and <code class="docutils literal notranslate"><span class="pre">2019-02-surrey-street</span></code> nel pannello <span class="guilabel">Layers</span>. Tasto destro sul livello  <code class="docutils literal notranslate"><span class="pre">2019-02-surrey-street</span></code> e seleziona <span class="guilabel">Zoom to Layer</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/48.png" class="align-center" src="../../_images/48.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Vedrai i punti con la posizione degli atti criminosi sovrapposto alla mappa OpenStrettMap. I punti sono molto numerosi e non è facile capire dove si concentra il crimine. Una mappa di concentrazione aiuta ad interpretare questa informazione. Seleziona il livello <code class="docutils literal notranslate"><span class="pre">2019-02-surrey-street</span></code> e clicca <span class="guilabel">Open the Layer Styling panel</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/58.png" class="align-center" src="../../_images/58.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Seleziona <code class="docutils literal notranslate"><span class="pre">Heatmap</span></code> (mappa di concentrazione) nel menu a tendina. Il pannello <span class="guilabel">Layer Styling panel</span> è interattivo e puoi vedere subito le modifiche applicate al livello. La mappa di concentrazione viene disegnata con la scala di colore predefinita a sfumature di grigio.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/68.png" class="align-center" src="../../_images/68.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Una mappa di concentrazione tipicamente viene colorata con scale che vanno giallo–rosso o bianco–rosso, dove la concentrazione maggiore fornisce più <strong>calore</strong>. Clicca il menu <span class="guilabel">Color ramp</span> e seleziona <code class="docutils literal notranslate"><span class="pre">Reds</span></code> color-ramp.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/78.png" class="align-center" src="../../_images/78.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Devi poi scegliere un <span class="guilabel">Raggio</span>. Questo parametro imposta l’area che influenza ogni punto. Questo valore dipenderà dal tipo di dato analizzato. Per questi dati stimiamo che un crimine abbia effetto fino a 5 chilometri dal punto dove sono stati commessi. Nota bene che il  SR/CRS (sistema di riferimento) del progetto, in questo esercizio è <code class="docutils literal notranslate"><span class="pre">EPSG:</span> <span class="pre">3857</span></code> - si vede in basso a destra nella finestra di QGIS. L’unità di misura di questo SR/CRS, è il metro, quindi dobbiamo mettere <code class="docutils literal notranslate"><span class="pre">5000</span></code> metri come raggio. Un altro parametro nascosto è il <span class="guilabel">Kernel shape</span>, o forma di funzione (kernel). Questo funzione determina il peso in funzione della distanza. La mappa di concentrazione utilizza la funzione <code class="docutils literal notranslate"><span class="pre">Quartic</span></code>. Ci sono altre funzioni impostabili, come <code class="docutils literal notranslate"><span class="pre">Triangular</span></code>, <code class="docutils literal notranslate"><span class="pre">Uniform</span></code>, <code class="docutils literal notranslate"><span class="pre">Triweight</span></code> and <code class="docutils literal notranslate"><span class="pre">Epanechnikov</span></code> che possono essere specificati, ma usando il secondo metodo presentato in questo tutorial. Vedi anche spiegazione <a class="reference external" href="https://www.geodose.com/2017/11/qgis-heatmap-using-kernel-density.html">post</a> per una spiegazione e su come impostare il raggio ottimale.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/88.png" class="align-center" src="../../_images/88.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>La visualizzazione è pronta, possiamo modificare la trasparenza, o  <span class="guilabel">Opacity</span>  nella sezione <span class="guilabel">Layer Rendering</span> in basso. Mettete un valore di``60 %`` così da vedere anche la mappa di base sottostante.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/98.png" class="align-center" src="../../_images/98.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Per alcune analisi, considerare la densità e basta può non essere abbastanza. Si vuole ad esempio dare più peso ad un crimine più violento. In modo simile alcuni punti possono rappresentare lo stesso evento riportato più volte. Per dare psi diversi aggiungiamo una colonna di «peso» o <strong>weight</strong> in modo da dare un peso per ogni punto. Tasto destro sul livello <code class="docutils literal notranslate"><span class="pre">2019-02-surrey-street</span></code> e selezionare <span class="guilabel">Open Attribute Table</span> (apri tabella attributi).</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1012.png" class="align-center" src="../../_images/1012.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Vedrete un campo chiamato <code class="docutils literal notranslate"><span class="pre">Crime</span> <span class="pre">type</span></code> che descrive il tipo di crimine. Possiamo utilizzare queste categorie per dare un peso diverso all’evento.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1115.png" class="align-center" src="../../_images/1115.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Fate click sul pulsante <span class="guilabel">Open field calculator</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1213.png" class="align-center" src="../../_images/1213.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>Inseriremo ora una fomula che fornisce un peso in funzione della categoria nella colonna  <code class="docutils literal notranslate"><span class="pre">Crime</span> <span class="pre">type</span></code>. QGIS ha un modo molto utile di creare campi virtuali - <em>Virtual Fields</em>. Il campo virtuale viene salvato nel progetto QGIS e non va a modificare i dati nella fonte (i.e. nel file). Viene calcolato dinamicamente e può essere utilizzato come qualsiasi altro campo nella tabella attributi. Inserisci <code class="docutils literal notranslate"><span class="pre">weight</span></code> come <span class="guilabel">Output field name</span> e imposta il <span class="guilabel">Output field type</span> a <code class="docutils literal notranslate"><span class="pre">Whole</span> <span class="pre">number</span> <span class="pre">(integer)</span></code> (numero intero). Inserisci al seguente espressione nel <span class="guilabel">Expression editor</span>. Utilizziamo l’operatore <strong>CASE</strong> per assegnare diversi valori numerici in funzione della categoria del crimine. Clicca <span class="guilabel">OK</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CASE
WHEN &quot;Crime type&quot; LIKE &#39;Violence%&#39; THEN 10
WHEN &quot;Crime type&quot; LIKE &#39;Criminal%&#39; THEN 5
ELSE 1
END
</pre></div>
</div>
<img alt="../../_images/1311.png" class="align-center" src="../../_images/1311.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Un nuovo valore verrà aggiunto per ogni punto con il peso calcolato dall’espressione.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1410.png" class="align-center" src="../../_images/1410.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>Nel pannello  <span class="guilabel">Layer Styling</span> clicca il menù a tendina <span class="guilabel">Weight points by</span> e seleziona la colonna appena creata <code class="docutils literal notranslate"><span class="pre">weight</span></code> .</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1510.png" class="align-center" src="../../_images/1510.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>Vedrete la mappa cambiare dato che usa il peso indicato. Chiudi il pannello  <span class="guilabel">Layer Styling</span></p></li>
</ol>
<blockquote>
<div><img alt="../../_images/169.png" class="align-center" src="../../_images/169.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>Se volete che la vostra mappa sia memorizzata come un file raster permanente o volete usate il modulo <strong>Heatmap (Kernel Density Estimation)</strong> dal pannello Processing Toolbox (Strumenti di processing). Andate su <span class="menuselection">Processing ‣ Toolbox</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1710.png" class="align-center" src="../../_images/1710.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Attenzione che prima di creare la mappa di concentrazione in questo modo, dobbiamo trasformare il SR/CRS in un sistema di referimento cartografico, i.e. proiettato.  Infatti la distanza gioca un ruolo fondamentale nel calcolo del raster, e ragionare in termini di gradi (unità di misura di un SR geografico, i.e. che usa latitudine e longitudine), non è ottimale. Usate per questo il modulo <span class="menuselection">Vector general ‣ Reproject layer</span></p></li>
</ol>
<blockquote>
<div><img alt="../../_images/188.png" class="align-center" src="../../_images/188.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>Nella finestra  <span class="guilabel">Reproject layer</span>, clicca  il pulsante <span class="guilabel">Select CRS</span> per <span class="guilabel">Target CRS</span>. Seleziona il SR/CRS <code class="docutils literal notranslate"><span class="pre">EPSG:27700</span> <span class="pre">OSGB</span> <span class="pre">1936</span> <span class="pre">/</span> <span class="pre">British</span> <span class="pre">National</span> <span class="pre">Grid</span></code>. Cliccare <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/198.png" class="align-center" src="../../_images/198.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>Un nuovo layer chiamato <code class="docutils literal notranslate"><span class="pre">Reprojected</span></code> verrà aggiunto al pannello <span class="guilabel">Layers</span>. Nasconti il livello precedete <code class="docutils literal notranslate"><span class="pre">2019-02-surrey-street</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/208.png" class="align-center" src="../../_images/208.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>Seleziona e trova il modulo <span class="menuselection">Interpolation ‣ Heatmap (Kernel Density Estimation)</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2112.png" class="align-center" src="../../_images/2112.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>Nella finestra <span class="guilabel">Heatmap (Kernel Density Estimation)</span>, useremo gli stessi parametri di prima. Selezionare <span class="guilabel">Radius</span> come <code class="docutils literal notranslate"><span class="pre">5000</span></code> metri e <span class="guilabel">Weight from field</span> seleziona la colonna <code class="docutils literal notranslate"><span class="pre">weight</span></code>. Impostare <span class="guilabel">Pixel size X</span> e <span class="guilabel">Pixel size Y</span> a <code class="docutils literal notranslate"><span class="pre">50</span></code> metri. Lascia <span class="guilabel">Kernel shape</span> alla funzione predefinita  <code class="docutils literal notranslate"><span class="pre">Quartic</span></code>. Clicca <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2210.png" class="align-center" src="../../_images/2210.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Il parametro <span class="guilabel">Radius from field</span> consente di specificare un raggio variabile usando i valori di una colonna. Può essere utilizzato insieme a <span class="guilabel">Weight from field</span> per impostare in modo più complesso l’influenza di ogni punto nello spazio.</p>
</div>
<ol class="arabic simple" start="23">
<li><p>Una volta terminato il processo, viene caricato un nuovo livello chiamato <code class="docutils literal notranslate"><span class="pre">OUTPUT</span></code>. La visualizzazione predefinita non è ottimale in quanto utilizza la scala di grigi <code class="docutils literal notranslate"><span class="pre">Singleband</span> <span class="pre">gray</span></code>. Clicca il pulsante <span class="guilabel">Open the Layer Styling panel</span> .</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/237.png" class="align-center" src="../../_images/237.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>Modifica il tema a <code class="docutils literal notranslate"><span class="pre">Singleband</span> <span class="pre">Pseudocolor</span></code> e seleziona la scala <code class="docutils literal notranslate"><span class="pre">Reds</span></code> . Il livello assomiglia a quello creato prima.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/248.png" class="align-center" src="../../_images/248.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Notare che il livello  <code class="docutils literal notranslate"><span class="pre">OUTPUT</span></code> nel pannello <span class="guilabel">Layers</span> ha una legenda ma il livello <code class="docutils literal notranslate"><span class="pre">2019-02-surrey-street</span></code> no. Un problema comune nella mappe di concentrazione è la mancanza di legenda. Se vuoi utilizzarla nel modello di stampa <span class="guilabel">Print Layout</span> bisogna aggiungere una legenda. Il raster creato con quest’ultimo secondo metodo consente di avere una legenda.</p>
</div>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      Ultimo aggiornamento feb 22, 2024.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/creating_heatmaps.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>