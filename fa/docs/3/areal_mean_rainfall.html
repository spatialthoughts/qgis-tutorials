<!DOCTYPE html>

<html lang="fa" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>محاسبه منطقه ای میانگین بارش(QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=40f7bd05"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=35c83baa"></script>
    <link rel="search" title="جستجو" href="../../search.html" />
    <link rel="next" title="ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)" href="colorized_river_basin_map.html" />
    <link rel="prev" title="Travel Time Analysis with Uber Movement (QGIS3)" href="travel_time_analysis.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">مقدمه</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Working with Attributes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">استایل برداری پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">محاسبه طول خط و آمار (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">استایل‌سازی و تحلیل شطرنجی پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">کار با پروژکشن</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">زمین مرجع کردن نقشه  شیت توپوگرافی اسکن شده (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">زمین مرجع کردن عکس هوایی (QGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">رقومی کردن داده های نقشه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">اجرای اتصال جدول (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">اجرای اتصال مکانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">متحرک سازی داده های سری زمانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">تجزیه و تحلیل شطرنجی پیشرفته (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">گردش کار خودکار با استفاده از مدل پردازش (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">تحلیل همپوشانی چندمعیار­ه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Making Interactive Canvas Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Creating an Animated Cartogram (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">تجسم و مسیریابی شبکه پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">محاسبه منطقه ای میانگین بارش(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">ایجاد نقشه کاربری اراضی(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">محاسبه تراکم تقاطع خیابان(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">تعیین مناطق بافر کاربری اراضی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">نقشه برداری حجم دفع زباله (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">شروع برنامه نویسی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">استفاده از بیان توابع عبارتی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">ساخت پلاگین پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">اجرا و برنامه ریزی پردازش وظیفه ای در QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">نقشه برداری وب با QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">جستجو و دانلود داده های OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">منابع آموزشی QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">اعتبار داده ها</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">پردازش دسته ای با استفاده از چارچوب پردازش (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="travel_time_analysis.html" title="Previous Chapter: Travel Time Analysis with Uber Movement (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Travel Time A...</span>
    </a>
  </li>
  <li>
    <a href="colorized_river_basin_map.html" title="Next Chapter: ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ایجاد یک نقشه... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="calculating-areal-mean-rainfall-qgis3">
<h1>محاسبه منطقه ای میانگین بارش(QGIS3)<a class="headerlink" href="#calculating-areal-mean-rainfall-qgis3" title="Link to this heading">¶</a></h1>
<p>محاسبه بیلان آب، مدل سازی سیلاب، پیش بینی رواناب، مطالعات اقلیمی و غیره اغلب به عمق متوسط بارندگی در یک حوضه هیدرولوژیکی به عنوان ورودی نیاز دارد - که همچنین به نام بارش منطقه ای یا میانگین بارندگی (AMR) نامیده می شود.</p>
<p>محاسبه AMR را می توان با استفاده از داده های باران سنج انجام داد. با استفاده از محل بارش باران و بارش مشاهده شده، می توان با استفاده از هر یک از تکنیک های زیر، بارش متوسط را در یک مکان مشخص تخمین زد:</p>
<ol class="arabic simple">
<li><p>** میانگین ریاضی <a href="#id1"><span class="problematic" id="id2">**</span></a>: می توان به سادگی به طور متوسط از تمام مقادیر مشاهده شده استفاده کرد. این روش فرض می کند که میدان بارندگی همگن است و مشاهدات در باران نگارها مستقل است و وزن برابری به تمام سنجه های باران می دهد.</p></li>
<li><p>** چندضلعی تیسن Thiessen <a href="#id1"><span class="problematic" id="id2">**</span></a>: این روش منطقه را با استفاده از چند ضلعی Thiessen تقسیم می کند با این فرض که بارندگی در محدوده پوشش هر ایستگاه همگن است. این روش همچنین به طور متوسط میانگین وزن منطقه ای نامیده می شود. این مفروضات برای زمین های کم  ارتفاع و یا مسطح خوب است، اما برای زمین های کوهستانی مناسب نیست.</p></li>
<li><p>** روش <em>Iso-hyetal *</em>: این تکنیک درونیابی  خطوط هم تراز Isohyets - خطوط  با بارش یکسان با محاسبه می کند. فرض بر این است که بارندگی بین دو خط تراز   Isohyets همگن است. این روش زمانی  مناسب است که شبکه باران سنجی متراکم است.</p></li>
<li><p>** فاصله وزنیWeighting / شبکه Gridded  ** - این یک تکنیک درون یابی است که در آن یک شبکه شطرنجی ایجاد می شود و مقدار برای هر پیکسل بر اساس فاصله تا ایستگاه تخمین زده می شود. هنگامی که نقاط شبکه تخمین زده شده اند، جمع شده اند و مجموع با تعداد سلول های شبکه تقسیم می شود تا میانگین بارش  منطقه ای را بدست آورد.</p></li>
<li><p>** روش های زمین آماری Geostatistic**: بارندگی به شدت تحت تأثیر عوامل محلی - مانند ارتفاع قرار دارد. با استفاده از تکنیک های رگرسیون چند متغیره یا تکنیک های کریگینگ، می توان ازخودهمبستگی مکانی حساب کرد و می تواند دقت بیشتری به دست آورد. این روش ها زمانی مناسب هستند که توزیع ایستگاه سنجنده باران یکنواخت و متراکم باشد.</p></li>
</ol>
<p>در این آموزش، گردش کار QGIS برای محاسبه میانگین مساحتی با استفاده از روش <strong>Thiessen Polygon</strong> را یاد می گیریم.</p>
<section id="overview-of-the-task">
<h2>بررسی اجمالی کار<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>در این آموزش، میزان بارندگی را که توسط ایستگاه‌های شبکه جهانی اقلیم‌شناسی تاریخی (GHCN) اندازه‌گیری می‌شود، می‌گیریم و میانگین بارندگی را در هر حوضه هیدرولوژیکی در ایالت فلوریدا محاسبه می‌کنیم.</p>
</section>
<section id="other-skills-you-will-learn">
<h2>مهارت های دیگری که یاد خواهید گرفت<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>نحوه حذف داده ها با مقادیر Null</p></li>
<li><p>نحوه اصلاح هندسه های نامعتبر در یک لایه</p></li>
<li><p>چگونه تاریخچه پردازش خود را بررسی کنید و ابزاری را با همان پارامترها دوباره اجرا کنید.</p></li>
<li><p>چگونه چند ضلعی ها را حل کنیم و آمار را خلاصه کنیم.</p></li>
<li><p>نحوه استفاده از تنها ویژگی های انتخاب شده در الگوریتم های پردازش</p></li>
</ul>
</section>
<section id="get-the-data">
<h2>داده ها را دریافت کنید<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p>ما از «داده‌های آب و هوایی NOAA &lt;<a class="reference external" href="https://www.ncdc.noaa.gov/cdo-web/">https://www.ncdc.noaa.gov/cdo-web/</a>&gt;`_، «HydroSHEDS &lt;<a class="reference external" href="https://www.hydrosheds.org/">https://www.hydrosheds.org/</a>&gt;» و «کارتوگرافی اداره سرشماری ایالات متحده» استفاده خواهیم کرد. لایه های داده مرزی &lt;<a class="reference external" href="https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html">https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html</a>&gt;`_.</p>
<section id="station-wise-precipitation">
<h3>بارش از نظر ایستگاهی<a class="headerlink" href="#station-wise-precipitation" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>به وب سایت «NOAA Climate data &lt;<a class="reference external" href="https://www.ncdc.noaa.gov/cdo-web/">https://www.ncdc.noaa.gov/cdo-web/</a>&gt;`_ بروید. بر روی ابزار جستجو کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd01.png" class="align-center" src="../../_images/cd01.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>&quot;خلاصه جهانی ماه&quot; را در :guilabel:&quot;انتخاب نوع مشاهده آب و هوا/مجموعه داده&quot; انتخاب کنید، سپس در :guilabel:&quot;انتخاب محدوده تاریخ&quot; جولای 2020 را انتخاب کنید، در :guilabel:&quot;جستجو برای&quot; را انتخاب کنید &quot;States&quot; &quot;، در :guilabel:&quot;یک عبارت جستجو را وارد کنید&quot; تایپ کنید &quot;فلوریدا&quot;. روی :guilabel:'Search' کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd02.png" class="align-center" src="../../_images/cd02.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>روی :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>افزودن به سبد خرید کلیک کنید، در موارد روی :guilabel:<a href="#id3"><span class="problematic" id="id4">`</span></a>مشاهده آیتم ها کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd03.png" class="align-center" src="../../_images/cd03.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>به <span class="guilabel">Custom Global Summary of the Month CSV</span> بروید، روی :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Continue کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd04.png" class="align-center" src="../../_images/cd04.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p><span class="guilabel">موقعیت‌های جغرافیایی</span> را بررسی کنید و در <span class="guilabel">انتخاب انواع داده برای خروجی سفارشی``</span> بارش را گسترش دهید``` بارش (PRCP)`` را انتخاب کنید. روی :guilabel:'Continue' کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd05.png" class="align-center" src="../../_images/cd05.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>آدرس ایمیل را وارد کنید و روی :guilabel:'SUBMIT ORDER' کلیک کنید تا داده ها را دانلود کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/cd06.png" class="align-center" src="../../_images/cd06.png" />
</div></blockquote>
</section>
<section id="hydrological-basins">
<h3>حوضه های هیدرولوژیکی<a class="headerlink" href="#hydrological-basins" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>به &quot;وب سایت HydroSHEDS &lt;<a class="reference external" href="https://www.hydrosheds.org/">https://www.hydrosheds.org/</a>&gt;&quot;_ بروید و روی :guilabel:&quot;دانلود&quot; کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/hydrosheds1.png" class="align-center" src="../../_images/hydrosheds1.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>انتخاب کنید:menuselection:<cite>HydroBASINS --&gt; استاندارد --&gt; آمریکای شمالی و کارائیب --&gt; hybas_na_lev06_v1c.zip</cite></p></li>
</ol>
<blockquote>
<div><img alt="../../_images/hydrosheds2.png" class="align-center" src="../../_images/hydrosheds2.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>آدرس ایمیل را وارد کنید و روی :guilabel:'Submit Request' کلیک کنید تا داده ها را دانلود کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/hydrosheds3.png" class="align-center" src="../../_images/hydrosheds3.png" />
</div></blockquote>
</section>
<section id="state-boundaries">
<h3>مرزهای ایالتی<a class="headerlink" href="#state-boundaries" title="Link to this heading">¶</a></h3>
<p>از صفحه &lt;<a class="reference external" href="https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html">https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html</a>&gt;`_ فایل های مرزی نقشه برداری - Shapefile دیدن کنید. فایل <code class="docutils literal notranslate"><span class="pre">cb_2018_us_state_500k.zip</span></code> را از بخش <em>States</em> دانلود کنید.</p>
<p>برای راحتی کار، می‌توانید مستقیماً یک نسخه از مجموعه داده‌ها را از لینک‌های زیر دانلود کنید:</p>
<p>florida_2020_07_prcp &lt;<a class="reference external" href="https://www.qgistutorials.com/downloads/florida_2020_07_prcp.csv">https://www.qgistutorials.com/downloads/florida_2020_07_prcp.csv</a>&gt;`_</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/hybas_na_lev06_v1c.zip">hybas_na_lev06_v1c</a></p>
<p>cb_2018_us_state_500k &lt;<a class="reference external" href="https://www.qgistutorials.com/downloads/cb_2018_us_state_500k.zip">https://www.qgistutorials.com/downloads/cb_2018_us_state_500k.zip</a>&gt;`_</p>
<p>منابع داده: <a class="reference internal" href="../credits.html#ghcn" id="id2"><span>[GHCN]</span></a>، <a class="reference internal" href="../credits.html#hydrosheds" id="id3"><span>[HYDROSHEDS]</span></a>، <a class="reference internal" href="../credits.html#uscensus" id="id4"><span>[USCENSUS]</span></a></p>
</section>
</section>
<section id="procedure">
<h2>روش<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>QGIS را باز کرده و روی :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Open Data Source Manager کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/012.png" src="../../_images/012.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>در کادر محاوره ای <span class="guilabel">Data Source Manager</span> به :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Text محدود شده تغییر دهید. روی &quot;...&quot;&quot; در :guilabel:&quot;نام فایل&quot; کلیک کنید، سپس فایل &quot;florida_2020_07_prcp.csv&quot; را مرور کرده و انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/022.png" src="../../_images/022.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>اکنون، در زیر <span class="guilabel">Geometry Definition</span> <span class="guilabel">مختصات نقطه</span>، <span class="guilabel">فیلد X</span> و <span class="guilabel">فیلد Y</span> باید به ترتیب <span class="guilabel">طول جغرافیایی</span> و <span class="guilabel">طول جغرافیایی</span> باشند را انتخاب کنید. . <span class="guilabel">Geometry CRS</span> را به عنوان :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>EPSG 4326 - WGS 84 انتخاب کنید. روی :guilabel:'Add' کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/032.png" src="../../_images/032.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>اکنون یک لایه نقطه جدید اضافه می شود، روی نماد :guilabel:'Open Attribute Table' کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/042.png" src="../../_images/042.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>در جدول Attribute فیلد <span class="guilabel">PRCP</span> نشان دهنده میزان بارندگی در ایستگاه در طول ژوئیه 2020 است. همچنین این داده ها بر حسب <em>اینچ</em> ثبت شده است. توجه داشته باشید که مقادیر «تهی» کمی وجود دارد که می تواند در حین محاسبه مشکل ایجاد کند. ستون PRCP را مرتب کنید، و خواهید دید که تنها بخش کوچکی از مجموعه داده Null است. اکنون ایستگاه های با مقادیر Null را حذف می کنیم.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/052.png" src="../../_images/052.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>جعبه ابزار پردازش را با رفتن به <span class="menuselection">Processing ‣ Toolbox</span> باز کنید و الگوریتم <span class="menuselection">Vector selection ‣ Extract by attribute</span> algorithm را جستجو کرده و مکان یابی کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/062.png" src="../../_images/062.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>در کادر محاوره ای <span class="guilabel">Extract by Attribute, :guilabel:`Input Layer</span> را به عنوان <code class="docutils literal notranslate"><span class="pre">florida_2020_07_prcp</span></code> انتخاب کنید، سپس در <span class="guilabel">خصیصه انتخابی، ``PRCP`</span> را انتخاب کنید، سپس <code class="docutils literal notranslate"><span class="pre">```</span></code> null`` در <span class="guilabel">اپراتور</span>. روی &quot;…&quot;&quot; در کنار :guilabel:&quot;Extracted (ویژگی)&quot; کلیک کنید، :guilabel:&quot;Save to File...&quot; را انتخاب کنید، نام لایه را به عنوان &quot;precipitation_filtered.gpkg&quot; وارد کنید و روی :guilabel کلیک کنید: &quot;دویدن&quot;.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/072.png" src="../../_images/072.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>حالا یک لایه جدید به canvas اضافه می شود، لایه قدیمی را خاموش کنید و می بینید که ایستگاه های با مقادیر Null حذف شده اند.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/082.png" src="../../_images/082.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>اکنون چند ضلعی های thiessen را از این لایه تولید می کنیم. جعبه ابزار پردازش را با رفتن به <span class="menuselection">Processing ‣ Toolbox</span> باز کنید و الگوریتم <span class="menuselection">Vector Geometry ‣ Voronoi Polygon</span> را جستجو و مکان یابی کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/092.png" src="../../_images/092.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>چند ضلعی های تیسن نشان دهنده ناحیه نفوذ در اطراف هر نقطه است. هر چند ضلعی ناحیه ای را مشخص می کند که نسبت به هر ایستگاه دیگری به یک ایستگاه خاص نزدیکتر است. این بدان معنی است که بارش در هر نقطه با نزدیکترین ایستگاه یکسان فرض می شود.</p>
</div>
<ol class="arabic simple" start="10">
<li><p>''recipitation_filtered'' را به عنوان :guilabel:'لایه ورودی' انتخاب کنید. از آنجایی که ما داده ای برای هیچ ایستگاه باران سنج خارج از مرز حوضه نداریم، می توانیم مقداری ناحیه بافر اضافه کنیم. &quot;15&quot; را به عنوان :guilabel:&quot;منطقه بافر (% وسعت)&quot; وارد کنید. روی &quot;...&quot;&quot; در :guilabel:&quot;Polygons Voronoi&quot; کلیک کنید و :guilabel:&quot;Save to File...&quot; را انتخاب کنید، سپس نام را به عنوان &quot;thiessen_polygons.gpkg&quot; وارد کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/103.png" src="../../_images/103.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>یک لایه جدید &quot;thiessen_polygons&quot; به بوم اضافه خواهد شد. بیایید این لایه را روی مرز حالت کلیپ کنیم. فایل <code class="docutils literal notranslate"><span class="pre">cb_2018_us_state_500k.shp</span></code> را در <span class="guilabel">Browser</span> جستجو کنید و آن را روی بوم بکشید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/113.png" src="../../_images/113.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>لایه حالت ها در یک CRS متفاوت از <em>Project CRS</em> است. شما یک درخواست با گزینه های مختلف برای تبدیل این CRS به پروژه CRS دریافت خواهید کرد. در کادر گفتگوی <span class="guilabel">Select Transformation</span> می توانید تبدیل پیش فرض را انتخاب کرده و روی <span class="guilabel">OK</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/123.png" src="../../_images/123.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>اکنون لایه «چند ضلعی های تیسن» را روی مرز ایالت فلوریدا گیره می دهیم. روی نماد <span class="guilabel">Select Feature by area یا Single Click</span> کلیک کنید و روی ایالت فلوریدا کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/132.png" src="../../_images/132.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>جعبه ابزار پردازش را با رفتن به <span class="menuselection">Processing ‣ Toolbox</span> باز کنید و الگوریتم <span class="menuselection">Vector overlay ‣ Clip</span> را جستجو و مکان یابی کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/142.png" src="../../_images/142.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>در کادر محاوره ای <span class="guilabel">Clip</span>، <span class="guilabel">لایه ورودی</span> را به عنوان &quot;thiessen_polygons&quot; انتخاب کنید، در :guilabel:&quot;لایه Overlay&quot; لایه &quot;cb_2018_us_state_500K&quot; را انتخاب کنید و :guilabel را علامت بزنید: کادر انتخاب «فقط ویژگی‌های انتخاب‌شده»، سپس روی «…»» در :guilabel: «Clipped» کلیک کنید و :guilabel: «Save to File…» را انتخاب کنید، سپس نام را به‌عنوان «thiessen_polygons_clipped.gpkg» وارد کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/152.png" src="../../_images/152.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>لایه چند ضلعی های بریده شده «thiessen_polygons_clipped» به بوم اضافه می شود. قابلیت دید همه لایه های دیگر را خاموش کنید. از آنجایی که وظیفه ما محاسبه میانگین بارندگی در هر حوضه است، اکنون چند ضلعی های نشان دهنده حوضه ها را بارگذاری می کنیم. لایه <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c.shp</span></code> را از <span class="guilabel">Browser</span> پیدا کنید و آن را به بوم اضافه کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/162.png" src="../../_images/162.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>متوجه خواهید شد که هر حوضه توسط چند ضلعی های تیسن پوشیده شده است و هر چند ضلعی حوضه های متعددی را در بر می گیرد. برای تجسم این نماد :guilabel:` پانل استایل لایه باز` و <span class="guilabel">Opacity</span> را به <code class="docutils literal notranslate"><span class="pre">75%</span></code> تغییر دهید. اکنون هر دو لایه را قطع می کنیم تا چند ضلعی های تیسن را تا مرز هر حوضه برش دهیم.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/172.png" src="../../_images/172.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>جعبه ابزار پردازش را با رفتن به <span class="menuselection">Processing ‣ Toolbox</span> باز کنید و الگوریتم <span class="menuselection">Vector overlay ‣ Intersection</span> را جستجو و مکان یابی کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/181.png" src="../../_images/181.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>در کادر محاوره ای <span class="guilabel">تقاطع</span>، <span class="guilabel">لایه ورودی</span> را به عنوان <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_clipped</span></code> و <span class="guilabel">لایه روکش</span> را به عنوان <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c</span></code> انتخاب کنید، سپس بر روی &quot;...&quot; کلیک کنید. در :guilabel:'Intersected' و :guilabel:'Save to File…' را انتخاب کنید، سپس نام را به عنوان &quot;thiessen_polygons_basin.gpkg&quot; وارد کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/191.png" src="../../_images/191.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>اجرا با یک پیغام خطا ناموفق خواهد بود * هندسه نامعتبر دارد. لطفاً هندسه را اصلاح کنید یا تنظیمات پردازش را به گزینه &quot;نادیده گرفتن ویژگی های ورودی نامعتبر&quot; تغییر دهید.*. در آموزش <a class="reference internal" href="handling_invalid_geometries.html"><span class="doc">Handling Invalid Geometries (QGIS3)</span></a> می توانید در مورد این خطا اطلاعات بیشتری کسب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/201.png" src="../../_images/201.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>برای اصلاح هندسه ها، جعبه ابزار پردازش را با رفتن به <span class="menuselection">Processing ‣ Toolbox</span> باز کنید و الگوریتم :menuselection:` هندسه برداری --&gt; فیکس هندسه را جستجو و مکان یابی کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/211.png" src="../../_images/211.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>در کادر محاوره ای <span class="guilabel">Fix Geometries</span> <span class="guilabel">Input layer</span> را به عنوان <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c</span></code> انتخاب کنید و روی <code class="docutils literal notranslate"><span class="pre">…</span></code> در <span class="guilabel">Fixed geometries</span> کلیک کنید و <span class="guilabel">Save to را انتخاب کنید. File…</span>، نام فایل را به صورت <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c_fixed.gpkg</span></code> وارد کنید و روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/221.png" src="../../_images/221.png" />
</div></blockquote>
<ol class="arabic simple" start="23">
<li><p>اکنون یک لایه جدید به بوم اضافه می شود. اکنون می توانیم تقاطع را دوباره امتحان کنیم. به جای اینکه ابزار را از ابتدا اجرا کنیم و تمام پارامترها را پر کنیم، می‌توانیم گفتگوی از پیش پر شده را از <em>Processing History</em> بازیابی کنیم و فقط لایه Overlay را تغییر دهیم. روی :menuselection:'Processing --&gt; History' کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/231.png" src="../../_images/231.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>روی الگوریتم <em>native:intersection</em> از لیست دوبار کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/241.png" src="../../_images/241.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>Change the <span class="guilabel">Overlay layer</span> to <code class="docutils literal notranslate"><span class="pre">hybas_na_lev06_v1c_fixed</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/251.png" src="../../_images/251.png" />
</div></blockquote>
<ol class="arabic simple" start="26">
<li><p>اکنون یک لایه جدید بارگذاری می‌شود و می‌توانید ببینید که &quot;thiessen_polygons_basin&quot; بر اساس مرز حوضه بریده شده است.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/26.png" src="../../_images/26.png" />
</div></blockquote>
<ol class="arabic simple" start="27">
<li><p>حال، بیایید مقدار میانگین بارندگی را از چند ضلعی های تیسن برای هر حوضه محاسبه کنیم. این کار با استفاده از ابزار <strong>Aggregate</strong> انجام می شود که به ما امکان می دهد چند ضلعی های جداگانه را در حین محاسبه آمار مربوط به مقادیر ویژگی ها حل کنیم. اکنون جعبه ابزار پردازش را با رفتن به <span class="menuselection">Processing ‣ Toolbox</span> باز کنید و الگوریتم :menuselection:'Vector geometry --&gt; Aggregate' را جستجو و مکان یابی کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/271.png" src="../../_images/271.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>در کادر محاوره ای <span class="guilabel">Aggregate</span> <span class="guilabel">لایه ورودی</span> را به عنوان <code class="docutils literal notranslate"><span class="pre">thiessen_polygons_basin</span></code> انتخاب کنید، همه فیلدها به جز <code class="docutils literal notranslate"><span class="pre">PRCP</span></code> و <code class="docutils literal notranslate"><span class="pre">HYBAS_ID</span></code> را انتخاب کنید و روی :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Delete Selected Field کلیک کنید. .</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/281.png" src="../../_images/281.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>در :guilabel:&quot;گروه بر اساس عبارت&quot; &quot;HYBAS_ID&quot; را انتخاب کنید. این به این معنی است که ابزار همه چند ضلعی هایی را که مقدار &quot;HYBAS_ID&quot; یکسانی دارند حل می کند. در مورد ما، اینها همه چند ضلعی های thiessen هستند که در یک حوضه سقوط می کنند. در بخش <span class="guilabel">Aggregates، می‌توانیم نحوه جمع‌آوری مقادیر مختلف فیلد از همه چند ضلعی‌هایی را که منحل می‌شوند، پیکربندی کنیم. برای :guilabel:`PRCP</span> روی دکمه <span class="guilabel">expression کلیک کنید تا عبارت زیر را وارد کنید. عبارت، کسر مساحتی را برای هر چند ضلعی محاسبه می کند. :guilabel:'Aggregate Function' را روی ``sum`</span> تنظیم کنید، که تمام کسرهای مساحت وزن را جمع آوری می کند که منجر به میانگین وزنی مساحت می شود. برای <span class="guilabel">HYBAS_ID</span>، تابع <span class="guilabel">Aggregate را به ``first_value`</span> تغییر دهید. از آنجایی که ما همه چند ضلعی های thiessen را بر اساس HYBAS_ID گروه بندی می کنیم، همه مقادیر یکسان خواهند بود و تابع <em>first_value</em> از مقدار مشخصه اولین چند ضلعی در هر حوضه استفاده می کند. روی &quot;...&quot;&quot; در :guilabel:&quot;Aggregated&quot; کلیک کنید و :guilabel:&quot;Save to File...&quot; را انتخاب کنید، نام فایل را به عنوان &quot;areal_mean_rainfall.gpkg&quot; وارد کنید و روی :guilabel:&quot;Run&quot; کلیک کنید.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(PRCP * $area) / sum($area)
</pre></div>
</div>
<img alt="../../_images/291.png" src="../../_images/291.png" />
</div></blockquote>
<ol class="arabic simple" start="30">
<li><p>یک لایه جدید به بوم اضافه خواهد شد، اجازه دهید جدول ویژگی را برای کاوش باز کنیم. روی نماد :guilabel:'Open Attribute Table' کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/301.png" src="../../_images/301.png" />
</div></blockquote>
<ol class="arabic simple" start="31">
<li><p>فیلد <span class="guilabel">PRCP</span> حاوی میانگین بارندگی منطقه ای برای هر حوضه بر حسب اینچ است.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/311.png" src="../../_images/311.png" />
</div></blockquote>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      آخرین بروز رسانی در اوت 18, 2024 .<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/areal_mean_rainfall.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>