<!DOCTYPE html>

<html lang="fa" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=40f7bd05"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=5df48d09"></script>
    <link rel="search" title="جستجو" href="../../search.html" />
    <link rel="next" title="ایجاد نقشه کاربری اراضی(QGIS3)" href="creating_landuse_map.html" />
    <link rel="prev" title="محاسبه منطقه ای میانگین بارش(QGIS3)" href="areal_mean_rainfall.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">مقدمه</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Working with Attributes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">استایل برداری پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">محاسبه طول خط و آمار (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">استایل‌سازی و تحلیل شطرنجی پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">کار با پروژکشن</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">زمین مرجع کردن نقشه  شیت توپوگرافی اسکن شده (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">زمین مرجع کردن عکس هوایی (QGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">رقومی کردن داده های نقشه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">اجرای اتصال جدول (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">اجرای اتصال مکانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">متحرک سازی داده های سری زمانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">تجزیه و تحلیل شطرنجی پیشرفته (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">گردش کار خودکار با استفاده از مدل پردازش (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">تحلیل همپوشانی چندمعیار­ه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometric_buildings.html">Creating Isometric Buildings (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Making Interactive Canvas Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_reveal_maps.html">Making Interactive Reveal Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Creating an Animated Cartogram (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">تجسم و مسیریابی شبکه پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">محاسبه منطقه ای میانگین بارش(QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">ایجاد نقشه کاربری اراضی(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">محاسبه تراکم تقاطع خیابان(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">تعیین مناطق بافر کاربری اراضی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">نقشه برداری حجم دفع زباله (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">شروع برنامه نویسی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">استفاده از بیان توابع عبارتی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">ساخت پلاگین پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">اجرا و برنامه ریزی پردازش وظیفه ای در QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">نقشه برداری وب با QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">جستجو و دانلود داده های OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">منابع آموزشی QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">اعتبار داده ها</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">پردازش دسته ای با استفاده از چارچوب پردازش (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="areal_mean_rainfall.html" title="Previous Chapter: محاسبه منطقه ای میانگین بارش(QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; محاسبه منطقه ...</span>
    </a>
  </li>
  <li>
    <a href="creating_landuse_map.html" title="Next Chapter: ایجاد نقشه کاربری اراضی(QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ایجاد نقشه کا... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p><a href="https://www.linkedin.com/in/spatialthoughts/"><img src="../../_static/ujaval.png">Ujaval Gandhi</a></p>

<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="creating-a-colorized-river-basin-map-qgis3">
<h1>ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)<a class="headerlink" href="#creating-a-colorized-river-basin-map-qgis3" title="Link to this heading">¶</a></h1>
<p>در این آموزش، ما گردش کار QGIS را برای ایجاد نقشه های هنری رودخانه برای کشور یا منطقه خود با استفاده از داده های هیدرولوژیکی در دسترس می آموزیم.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>این آموزش از نقشه های زیبای تولید شده توسط <a class="reference external" href="https://www.grasshoppergeography.com/">Grasshopper Geography</a> الهام گرفته شده است. من صاحب یکی از چاپ های آنها هستم و شما نیز می توانید با خرید یکی از نقشه های آنها از &quot;فروشگاه آنلاین &lt;<a class="reference external" href="https://www.etsy.com/shop/GrasshopperGeography">https://www.etsy.com/shop/GrasshopperGeography</a>&gt;&quot; از کار آنها حمایت کنید.</p>
</div>
<section id="overview-of-the-task">
<h2>بررسی اجمالی کار<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>در این آموزش، لایه های داده حوضه ها و رودخانه ها را از HydroSHEDS می گیریم و یک نقشه حوضه برای رودخانه های هند ایجاد می کنیم.</p>
<blockquote>
<div><img alt="../../_images/rivers_of_india.png" class="align-center" src="../../_images/rivers_of_india.png" />
</div></blockquote>
</section>
<section id="other-skills-you-will-learn">
<h2>مهارت های دیگری که یاد خواهید گرفت<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>نحوه اختصاص دادن طرح به یک لایه برداری با طرح نادرست یا گم شده است.</p></li>
<li><p>چگونه چندین لایه را در یک GeoPackage اضافه کنیم.</p></li>
<li><p>چگونه یک نشان «ساخته شده با QGIS» را به نقشه خود اضافه کنید.</p></li>
</ul>
</section>
<section id="get-the-data">
<h2>داده ها را دریافت کنید<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://www.hydrosheds.org/">HydroSHEDS</a> مجموعه داده های هیدرولوژیکی جهانی را برای کاربردهای منطقه ای و جهانی فراهم می کند. لایه های داده از DEM شرطی شده هیدرولوژیکی از SRTM مشتق شده اند.</p>
<section id="basin-boundaries">
<h3>مرزهای حوضه<a class="headerlink" href="#basin-boundaries" title="Link to this heading">¶</a></h3>
<p>HydroBasins مرزهای چند ضلعی حوضه ها را برای قاره های مختلف فراهم می کند. مرزها سلسله مراتبی هستند - هر حوضه در سطح N بیشتر به حوضه های کوچکتر در سطح N+1 تقسیم می شود. برای این آموزش از مرزهای حوضه سطح 6 استفاده می کنیم. بسته به منطقه و نوع نقشه ای که می خواهید ایجاد کنید، می توانید از سطوح مختلف استفاده کنید. از صفحه <a class="reference external" href="https://www.hydrosheds.org/products/hydrobasins">HydroBASINS</a> دیدن کنید و فایل فشرده را برای منطقه خود دانلود کنید.</p>
<blockquote>
<div><img alt="../../_images/download1.png" class="align-center" src="../../_images/download1.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>HydroSHEDS basin boundaries are derived from SRTM data which is over 20 years old at this point. The basin boundaries may not match the official basin boundaries in your region. You can substitute HydroBasins data with polygons from official sources when available.</p>
</div>
</section>
<section id="river-network">
<h3>شبکه رودخانه<a class="headerlink" href="#river-network" title="Link to this heading">¶</a></h3>
<p>HydroRIVERS یک شکل فایل خطی را ارائه می دهد که شبکه رودخانه را نشان می دهد. از صفحه «HydroRIVERS &lt;<a class="reference external" href="https://www.hydrosheds.org/products/hydrorivers">https://www.hydrosheds.org/products/hydrorivers</a>&gt;» دیدن کنید و فایل فشرده را برای منطقه مورد علاقه خود دانلود کنید.</p>
<blockquote>
<div><img alt="../../_images/download2.png" class="align-center" src="../../_images/download2.png" />
</div></blockquote>
</section>
<section id="administrative-boundary">
<h3>مرز اداری<a class="headerlink" href="#administrative-boundary" title="Link to this heading">¶</a></h3>
<p>ما داده‌های HydroSHEDS را در مرز منطقه انتخابی شما برش می‌دهیم. در این آموزش می خواهیم نقشه حوضه رودخانه هند را ایجاد کنیم، بنابراین شکل فایل مرزی را از Survey of India دریافت می کنیم. از صفحه «نقشه های کلی هند &lt;<a class="reference external" href="https://surveyofindia.gov.in/pages/outline-maps-of-india">https://surveyofindia.gov.in/pages/outline-maps-of-india</a>&gt;» دیدن کنید و فرمت برداری مرز بین المللی هند را دانلود کنید. اگر به مرزهای سرپرست برای سایر کشورها یا ایالت ها نیاز دارید، می توانید آنها را از «GADM &lt;<a class="reference external" href="https://gadm.org/">https://gadm.org/</a>&gt;`_ یا «geoBoundaries &lt;<a class="reference external" href="https://www.geoboundaries.org/">https://www.geoboundaries.org/</a>&gt;`_ دریافت کنید.</p>
<blockquote>
<div><img alt="../../_images/download3.png" class="align-center" src="../../_images/download3.png" />
</div></blockquote>
<p>پس از دانلود تمامی فایل ها، آنها را از حالت فشرده خارج کرده و در یک پوشه کپی کنید. اکنون باید 3 شکل فایل داشته باشید: <code class="docutils literal notranslate"><span class="pre">hybas_as_lev06_v1c.shp</span></code>, <code class="docutils literal notranslate"><span class="pre">HydroRIVERS_v10_as.shp</span></code> و مرزهای مدیریتی <code class="docutils literal notranslate"><span class="pre">`polymap15m_area.shp`</span></code>.</p>
<blockquote>
<div><img alt="../../_images/download4.png" class="align-center" src="../../_images/download4.png" />
</div></blockquote>
<p>منابع داده: <a class="reference internal" href="../credits.html#hydrosheds" id="id1"><span>[HYDROSHEDS]</span></a>، <a class="reference internal" href="../credits.html#soi" id="id2"><span>[SOI]</span></a></p>
</section>
</section>
<section id="procedure">
<h2>روش<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>QGIS را باز کنید و فایل های دانلود شده را در QGIS <span class="guilabel">Browser</span> پیدا کنید. «hybas_as_lev06_v1c.shp» و «HydroRIVERS_v10_as.shp» را روی بوم بکشید و رها کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/150.png" class="align-center" src="../../_images/150.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>شکل فایل مرزهای اداری «polymap15m_area.shp» را پیدا کنید و آن را روی بوم بکشید و رها کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/229.png" class="align-center" src="../../_images/229.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>لایه‌های داده HydroSHEDS دارای ویژگی‌هایی با هندسه‌های نامعتبر هستند، بیایید در ادامه آن‌ها را اصلاح کنیم. جعبه ابزار پردازش را از <span class="menuselection">Processing ‣ Toolbox</span> باز کنید. ابزار :menuselection:'Vector geometry --&gt; Fix geometries' را جستجو و پیدا کنید. برای راه اندازی آن دوبار کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/320.png" class="align-center" src="../../_images/320.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>می توانید آموزش <a class="reference internal" href="handling_invalid_geometries.html"><span class="doc">Handling Invalid Geometries (QGIS3)</span></a> را مرور کنید تا در مورد علل و راه حل های هندسه های نامعتبر بیشتر بدانید.</p>
</div>
<ol class="arabic simple" start="4">
<li><p>«hybas_as_lev06_v1c» را به عنوان :guilabel:` لایه ورودی انتخاب کنید. روی دکمه <span class="guilabel">...</span> در کنار :guilabel:` هندسه ثابت کلیک کنید و <span class="guilabel">Save to GeoPackage...</span> را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/49.png" class="align-center" src="../../_images/49.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>به مکانی که می‌خواهید داده‌های خروجی را ذخیره کنید، بروید و نام «data.gpkg» را وارد کنید. روی :guilabel:'Save' کلیک کنید. از شما خواسته می شود که یک :guilabel:` نام لایه را وارد کنید. &quot;حوضه_اصلاح&quot;&quot; را وارد کنید. روی <span class="guilabel">OK</span> کلیک کنید. سپس روی <span class="guilabel">Run</span> کلیک کنید تا الگوریتم اجرا شود و لایه خروجی تولید شود.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/59.png" class="align-center" src="../../_images/59.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>مرحله را برای لایه «HydroRIVERS_v10_as» تکرار کنید. همان GeoPackage «data.gpkg» را که در مرحله قبل ایجاد شد، انتخاب کنید. اگر پیامی دریافت کردید که نشان می‌دهد فایل رونویسی می‌شود، نگران نباشید. QGIS فایل را بازنویسی نمی کند، اما یک لایه جدید به همان GeoPackage اضافه می کند. این بار از «rivers_fixed» به عنوان :guilabel:«نام لایه» استفاده کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/69.png" class="align-center" src="../../_images/69.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>لایه <code class="docutils literal notranslate"><span class="pre">polymap15m_area</span></code> با طرح ریزی ارائه می شود که توسط QGIS شناسایی نمی شود. ما یک طرح مشخص به این لایه اختصاص می دهیم. ابزار :menuselection:'Vector general --&gt; Assign projection' را جستجو و پیدا کنید و برای باز کردن آن دوبار کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/79.png" class="align-center" src="../../_images/79.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>به یاد داشته باشید که ابزار <em>Assign projection</em> لایه را دوباره طرح نمی کند، بلکه به سادگی اطلاعات طرح ریزی صحیح را به یک لایه ارجاع داده شده موجود با طرح ریزی گم شده یا نادرست اضافه می کند. اگر می خواهید CRS یک لایه را تغییر دهید از ابزار <em>Reproject layer</em> استفاده کنید.</p>
</div>
<ol class="arabic simple" start="8">
<li><p>&quot;Polymap15m_area&quot; را به عنوان :guilabel:&quot;لایه ورودی&quot; انتخاب کنید. روی دکمه :guilabel:'Select CRS' کلیک کنید و طرح &quot;EPSG:7755 - WGS 84 / India NSF LCC&quot; را جستجو کنید و آن را انتخاب کنید. روی دکمه <span class="guilabel">...</span> در کنار <span class="guilabel">CRS اختصاص داده شده کلیک کنید و :guilabel:`Save to GeoPackage...</span> را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/89.png" class="align-center" src="../../_images/89.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>همان GeoPackage «data.gpkg» را انتخاب کنید و نام لایه «admin_boundary_fixed» را وارد کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/99.png" class="align-center" src="../../_images/99.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>اکنون 3 لایه جدید «حوضه_تثبیت شده»، «ریورس_تثبیت شده» و «محدودیت_مدیریت ثابت شده» را خواهید داشت که در پنل <span class="guilabel">لایه ها در QGIS بارگذاری شده اند. کلید :kbd:`Shift را نگه دارید و تمام لایه های باقیمانده را انتخاب کنید. کلیک راست کرده و :guilabel:`Remove Layer...</span> را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1013.png" class="align-center" src="../../_images/1013.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>اکنون لایه های حوضه ها و رودخانه ها را به مرز اداری می بندیم. ابزار :menuselection:'Vector overlay --&gt; Clip' را از جعبه ابزار پردازش جستجو و پیدا کنید. برای باز کردن آن دوبار کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1116.png" class="align-center" src="../../_images/1116.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>«basins_fixed» را به‌عنوان :guilabel: «لایه ورودی» و «admin_boundary_fixed» را به‌عنوان :guilabel: «لایه روکش» انتخاب کنید. خروجی را در همان GeoPackage «data.gpkg» به عنوان لایه «basins_clipped» ذخیره کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1214.png" class="align-center" src="../../_images/1214.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>پس از پایان پردازش، فرآیند را با لایه «rivers_fixed» به عنوان :guilabel:` لایه ورودی تکرار کنید. خروجی را در همان geopackage «data.gpkg» به عنوان لایه «rivers_clipped» ذخیره کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1312.png" class="align-center" src="../../_images/1312.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>اکنون 2 لایه جدید «basins_clipped» و «rivers_clipped» و همچنین لایه «admin_boundary_fixed» در پنل <span class="guilabel">Layers در QGIS بارگذاری شده است. کلید :kbd:`Shift را نگه دارید و تمام لایه های باقیمانده را انتخاب کنید. کلیک راست کرده و :guilabel:`Remove Layer...</span> را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1411.png" class="align-center" src="../../_images/1411.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>قبل از اینکه ادامه دهیم، اجازه دهید پروژه را ذخیره کنیم. QGIS به شما این امکان را می دهد که یک پروژه را در داخل یک GeoPackage ذخیره کنید - این کار را برای جلوگیری از مدیریت فایل های اضافی بسیار راحت می کند. به <span class="menuselection">Project ‣ Save To ‣ GeoPackage...</span> بروید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1511.png" class="align-center" src="../../_images/1511.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>در گفتگوی :guilabel:&quot;ذخیره پروژه در GeoPackage&quot;، روی دکمه :guilabel:&quot;...&quot; در کنار :guilabel:&quot;Connection&quot; کلیک کنید و فایل &quot;data.gpkg&quot; موجود را مرور کنید. نام <code class="docutils literal notranslate"><span class="pre">rivers_basin_map</span></code> را به عنوان نام <span class="guilabel">Project وارد کنید. روی :guilabel:`OK</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1610.png" class="align-center" src="../../_images/1610.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>پس از ذخیره، می‌توانید «data.gpkg» را در پنل :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Browser گسترش دهید و ببینید که پروژه QGIS اکنون در GeoPackage ذخیره شده است. کاربران این GeoPackage اکنون می توانند پروژه را مستقیماً از GeoPackage باز کنند.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1711.png" class="align-center" src="../../_images/1711.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>برای ایجاد نقشه رنگی خود، باید همه حوضه ها را طوری رنگ کنیم که هیچ حوضه مجاور هم رنگ نباشد. QGIS ابزاری برای این کار دارد. ابزار :menuselection:'Cartography --&gt; Topological Coloring' را از جعبه ابزار پردازش باز کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/189.png" class="align-center" src="../../_images/189.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>&quot;basins_clipped&quot; را به عنوان :guilabel:&quot;لایه ورودی&quot; انتخاب کنید. گزینه های دیگر را به مقادیر پیش فرض خود رها کنید. خروجی را در همان GeoPackage &quot;data.gpkg&quot; به عنوان لایه &quot;basins_with_color&quot; ذخیره کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/198.png" class="align-center" src="../../_images/198.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>پس از پایان پردازش، یک لایه جدید «حوضه_با_رنگ» در پنل :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Layers بارگذاری می شود. روی لایه کلیک راست کرده و :guilabel:'Open Attribute Table' را انتخاب کنید. متوجه خواهید شد که لایه دارای ویژگی جدیدی به نام &quot;color_id&quot; با مقدار صحیح است. اختصاص یک رنگ منحصر به فرد به هر عدد صحیح منجر به رنگ آمیزی توپولوکال لایه می شود.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/208.png" class="align-center" src="../../_images/208.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>ما می خواهیم شناسه رنگ حوضه را به تمام رودخانه های موجود در آن منتقل کنیم. ابزار :menuselection:'Vector general --&gt; Join features by location' را از جعبه ابزار پردازش باز کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2113.png" class="align-center" src="../../_images/2113.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>در اینجا می‌خواهیم «rivers_clipped» را به‌عنوان لایه :guilabel: «پیوستن به ویژگی‌های in» و «basins_with_color» را به‌عنوان لایه برای :guilabel: «با مقایسه با» انتخاب کنیم. در قسمت <span class="guilabel">Fields to add</span> روی دکمه <span class="guilabel">...</span> کلیک کنید و قسمت <code class="docutils literal notranslate"><span class="pre">color_id</span></code> را انتخاب کنید. خروجی را در geopackage &quot;data.gpkg&quot; به عنوان لایه &quot;rivers_with_color&quot; ذخیره کنید. روی <span class="guilabel">Run</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2210.png" class="align-center" src="../../_images/2210.png" />
</div></blockquote>
<ol class="arabic simple" start="23">
<li><p>پس از پایان پردازش، یک لایه جدید «rivers_with_color» در پنل :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Layers بارگذاری می شود. اکنون زمان اعمال نمادشناسی است. لایه &quot;admin_boundary_fixed&quot; را انتخاب کنید و روی دکمه :guilabel:&quot;Open Layer Styling Panel&quot; در پنل :guilabel:&quot;Layers&quot; کلیک کنید. رنگ را به مشکی تغییر دهید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/237.png" class="align-center" src="../../_images/237.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>سپس لایه «رودخانه‌های_با_رنگ» را انتخاب کرده و رندر «طبقه شده» را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/248.png" class="align-center" src="../../_images/248.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>&quot;color_id&quot; را به عنوان :guilabel:&quot;Value&quot; انتخاب کنید و روی :guilabel:&quot;Classify&quot; کلیک کنید. خواهید دید که رودخانه ها در حوضه های مختلف رنگ متفاوتی به خود اختصاص می دهند.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/258.png" class="align-center" src="../../_images/258.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>&quot;color_id&quot; را به عنوان :guilabel:&quot;Value&quot; انتخاب کنید و روی :guilabel:&quot;Classify&quot; کلیک کنید. دید که رودخانه ها در حوضه های مختلف رنگ های متفاوت به خود اختصاص می دهند.</p>
</div>
<ol class="arabic simple" start="26">
<li><p>خطوط پیش فرض برای نقشه ما خیلی ضخیم هستند. بیا عوضش کنیم کلید <kbd class="kbd docutils literal notranslate">Shift</kbd> <kbd class="kbd docutils literal notranslate">را</kbd> <kbd class="kbd docutils literal notranslate">نگه</kbd> <kbd class="kbd docutils literal notranslate">دارید</kbd> <kbd class="kbd docutils literal notranslate">و</kbd> <kbd class="kbd docutils literal notranslate">تمام</kbd> <kbd class="kbd docutils literal notranslate">نمادهای</kbd> <kbd class="kbd docutils literal notranslate">موجود</kbd> <kbd class="kbd docutils literal notranslate">در</kbd> <kbd class="kbd docutils literal notranslate">لیست</kbd> <kbd class="kbd docutils literal notranslate">را</kbd> <kbd class="kbd docutils literal notranslate">انتخاب</kbd> <kbd class="kbd docutils literal notranslate">کنید.</kbd> <kbd class="kbd docutils literal notranslate">روی</kbd> <kbd class="kbd docutils literal notranslate">:guilabel:`Symbol</kbd> کلیک کنید تا :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Symbol Settings باز شود.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/267.png" class="align-center" src="../../_images/267.png" />
</div></blockquote>
<ol class="arabic simple" start="27">
<li><p>روی :guilabel:'Simple Line' کلیک کنید و عرض stroke را به <code class="docutils literal notranslate"><span class="pre">0.1</span></code> تغییر دهید. اکنون نقشه بسیار بهتر به نظر می رسد.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/278.png" class="align-center" src="../../_images/278.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>ما می توانیم نقشه را با اختصاص عرض های مختلف به رودخانه ها بر اساس اندازه آنها بهبود دهیم. لایه «رودخانه‌های_با_رنگ» دارای یک فیلد «ORD_STRA» است که حاوی مقدار «نظم Strahler &lt;<a class="reference external" href="https://en.wikipedia.org/wiki/Strahler_number">https://en.wikipedia.org/wiki/Strahler_number</a>&gt;»_ رودخانه است. هرچه این عدد بزرگتر باشد، رودخانه بزرگتر است. ما از Assistant استفاده خواهیم کرد تا به ما کمک کند تا از مقدار دستور strahler در عرض ضربه مناسب استفاده کنیم. روی دکمه :guilabel:'Oride defined data' در کنار :guilabel:'Stroke width' کلیک کنید و :guilabel:'Assistant...' را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/288.png" class="align-center" src="../../_images/288.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>در بخش <span class="guilabel">ورودی</span>، فیلد &quot;ORD_STRA&quot; را به عنوان :guilabel:&quot;منبع&quot; با :guilabel:&quot;مقادیر از&quot;&quot;1&quot; تا :guilabel:&quot;به&quot; &quot;6&quot; انتخاب کنید. <cite>. در بخش :guilabel:`Output</cite> <span class="guilabel">Size from</span> را به عنوان <code class="docutils literal notranslate"><span class="pre">0.05</span></code> و <span class="guilabel">to</span> را به عنوان <code class="docutils literal notranslate"><span class="pre">0.2</span></code> انتخاب کنید. با وارد کردن مقادیر، نقشه به صورت پویا به روز می شود. ممکن است مجبور شوید این مقادیر را بسته به منطقه خود تنظیم کنید. هنگامی که از نقشه راضی شدید، روی دکمه <span class="guilabel">Back</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/297.png" class="align-center" src="../../_images/297.png" />
</div></blockquote>
<ol class="arabic simple" start="30">
<li><p>متوجه خواهید شد که دکمه :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>بازگردانی تعریف شده داده‌ها برای :guilabel:<a href="#id3"><span class="problematic" id="id4">`</span></a>عرض ضربه، اکنون زرد است، که نشان می‌دهد یک لغو فعال برای این تنظیم اعمال شده است.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/306.png" class="align-center" src="../../_images/306.png" />
</div></blockquote>
<ol class="arabic simple" start="31">
<li><p>نقشه حوضه رودخانه رنگی ما اکنون آماده است. بیایید این نقشه را در یک طرح قرار دهیم تا بتوانیم یک نسخه با وضوح بالا را با سایر عناصر نقشه صادر کنیم. به <span class="menuselection">Project ‣ New Print Layout...</span> بروید. وقتی از شما خواسته شد نامی را وارد کنید، آن را خالی بگذارید و روی <span class="guilabel">OK</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/3110.png" class="align-center" src="../../_images/3110.png" />
</div></blockquote>
<ol class="arabic simple" start="32">
<li><p>در پنجره <span class="guilabel">Layout 1</span> روی بوم خالی کلیک راست کرده و <span class="guilabel">Page Properties...</span> را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/324.png" class="align-center" src="../../_images/324.png" />
</div></blockquote>
<ol class="arabic simple" start="33">
<li><p>&quot;A4&quot; را به عنوان :guilabel:&quot;Size&quot; انتخاب کنید. رنگ <span class="guilabel">Background</span> را به مشکی تغییر دهید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/332.png" class="align-center" src="../../_images/332.png" />
</div></blockquote>
<ol class="arabic simple" start="34">
<li><p>به <span class="menuselection">Add Item ‣ Add Map</span> بروید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/342.png" class="align-center" src="../../_images/342.png" />
</div></blockquote>
<ol class="arabic simple" start="35">
<li><p>دکمه سمت چپ ماوس را نگه دارید و منطقه ای را روی بوم انتخاب کنید که می خواهید نقشه در آن قرار گیرد.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/352.png" class="align-center" src="../../_images/352.png" />
</div></blockquote>
<ol class="arabic simple" start="36">
<li><p>هنگامی که نقشه ظاهر شد، در برگه :guilabel:'Item Properties' به پایین اسکرول کنید و :guilabel:'Background' را خاموش کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/361.png" class="align-center" src="../../_images/361.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>اگر برگه :guilabel: <cite>ویژگی های آیتم</cite> را نمی بینید یا به طور تصادفی آن را نمی بندید، می توانید با رفتن به <span class="menuselection">View ‣ Panels ‣ Item Properties</span> در منوی Layout آن را برگردانید.</p>
</div>
<ol class="arabic simple" start="37">
<li><p>بیایید وسعت نقشه را تنظیم کنیم. روی دکمه :guilabel:'Interactively Edit Map Extent' کلیک کنید و سپس از ماوس برای حرکت نقشه استفاده کنید. همچنین می توانید از چرخ اسکرول خود برای تنظیم زوم استفاده کنید. اگر می خواهید کنترل دقیق تری روی Zoom داشته باشید، مقدار <span class="guilabel">Scale</span> را به صورت دستی تنظیم کنید. تا زمانی که از قرارگیری نقشه راضی باشید این کار را تکرار کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/371.png" class="align-center" src="../../_images/371.png" />
</div></blockquote>
<ol class="arabic simple" start="38">
<li><p>سپس یک لوگوی QGIS به نقشه اضافه می کنیم. به <span class="menuselection">Add Item ‣ Add Picture</span> بروید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/381.png" class="align-center" src="../../_images/381.png" />
</div></blockquote>
<ol class="arabic simple" start="39">
<li><p>یک مستطیل در جایی که می خواهید لوگو قرار دهید بکشید. در گفتگوی :guilabel: <cite>ویژگی های مورد</cite>، گروه آیکون :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>logos را پیدا کنید. لوگوی &quot;ساخته شده با QGIS&quot; را انتخاب کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/391.png" class="align-center" src="../../_images/391.png" />
</div></blockquote>
<ol class="arabic simple" start="40">
<li><p>بعد، ما یک برچسب با اعتبار داده ها اضافه می کنیم. به <span class="menuselection">Add Item ‣ Add Label</span> بروید. متن را برای اعتبار داده ها وارد کنید و تراز قلم و برچسب را تنظیم کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/40.png" class="align-center" src="../../_images/40.png" />
</div></blockquote>
<ol class="arabic simple" start="41">
<li><p>هنگامی که برای صادرات نتایج آماده شدید، به :menuselection:` Layout --&gt; Export as Image...` بروید. به پوشه ای در رایانه خود بروید که می خواهید تصویر PNG را در آن ذخیره کنید و نام <code class="docutils literal notranslate"><span class="pre">river_basins.png</span></code> را وارد کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/411.png" class="align-center" src="../../_images/411.png" />
</div></blockquote>
<ol class="arabic simple" start="42">
<li><p>&quot;300 dpi&quot; را به عنوان :guilabel:&quot;Export وضوح&quot; انتخاب کنید و روی :guilabel:&quot;Save&quot; کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/421.png" class="align-center" src="../../_images/421.png" />
</div></blockquote>
<ol class="arabic simple" start="43">
<li><p>پس از اتمام صادرات، تصویر نقشه نهایی خود را در مکان انتخابی خواهید داشت.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/431.png" class="align-center" src="../../_images/431.png" />
</div></blockquote>
<ol class="arabic simple" start="44">
<li><p>در اینجا تصویر نهایی PNG است که با استفاده از QGIS و مجموعه داده های باز ایجاد کردیم.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/441.png" class="align-center" src="../../_images/441.png" />
</div></blockquote>
</section>
</section>



<!-- Turn on comments on only newer tutorials having 3/ in URL -->

  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2025, Ujaval Gandhi.<br/>
      آخرین بروز رسانی در سپتامبر 02, 2025 .<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a>.<br>
  You are free to use the material for any purpose as long as you give appropriate credit to the original author.</p>
</div>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/colorized_river_basin_map.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>