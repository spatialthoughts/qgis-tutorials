<!DOCTYPE html>

<html lang="fa" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>تحلیل همپوشانی چندمعیار­ه (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=40f7bd05"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=5df48d09"></script>
    <link rel="search" title="جستجو" href="../../search.html" />
    <link rel="next" title="Basic Filtering and Styling with Expressions (QGIS3)" href="vector_styling_expressions.html" />
    <link rel="prev" title="ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)" href="automating_map_creation.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">مقدمه</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Working with Attributes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">استایل برداری پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">محاسبه طول خط و آمار (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">استایل‌سازی و تحلیل شطرنجی پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">کار با پروژکشن</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">زمین مرجع کردن نقشه  شیت توپوگرافی اسکن شده (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">زمین مرجع کردن عکس هوایی (QGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">رقومی کردن داده های نقشه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">اجرای اتصال جدول (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">اجرای اتصال مکانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">متحرک سازی داده های سری زمانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">تجزیه و تحلیل شطرنجی پیشرفته (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">گردش کار خودکار با استفاده از مدل پردازش (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">تحلیل همپوشانی چندمعیار­ه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometric_buildings.html">Creating Isometric Buildings (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Making Interactive Canvas Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_reveal_maps.html">Making Interactive Reveal Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Creating an Animated Cartogram (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">تجسم و مسیریابی شبکه پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">محاسبه منطقه ای میانگین بارش(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">ایجاد نقشه کاربری اراضی(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">محاسبه تراکم تقاطع خیابان(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">تعیین مناطق بافر کاربری اراضی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">نقشه برداری حجم دفع زباله (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">شروع برنامه نویسی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">استفاده از بیان توابع عبارتی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">ساخت پلاگین پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">اجرا و برنامه ریزی پردازش وظیفه ای در QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">نقشه برداری وب با QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">جستجو و دانلود داده های OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">منابع آموزشی QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">اعتبار داده ها</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">پردازش دسته ای با استفاده از چارچوب پردازش (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="automating_map_creation.html" title="Previous Chapter: ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ایجاد خودکار ...</span>
    </a>
  </li>
  <li>
    <a href="vector_styling_expressions.html" title="Next Chapter: Basic Filtering and Styling with Expressions (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Basic Filteri... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p><a href="https://www.linkedin.com/in/spatialthoughts/"><img src="../../_static/ujaval.png">Ujaval Gandhi</a></p>

<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="multi-criteria-overlay-analysis-qgis3">
<h1>تحلیل همپوشانی چندمعیار­ه (QGIS3)<a class="headerlink" href="#multi-criteria-overlay-analysis-qgis3" title="Link to this heading">¶</a></h1>
<p>تحلیل  همپوشانی وزنی چندمعیار­هMulti-criteria weighted-overlay analysis  فرآیند تخصیص یک زمین بر اساس خصوصیات متنوعی است که باید ارزیابی شوند. اگرچه این یک عملیات معمولی GIS است، اما بهتر است با استفاده از یک روش مبتنی بر رستر انجام شود.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>همپوشانی رستر و بردار</p>
<p>You can do the overlay analysis on vector layers using geoprocessing tools such as buffer, dissolve, difference and intersection. This method is ideal if you wanted to find a binary <strong>suitable/non-suitable</strong> answer and you are working with a handful of layers. You can review our video tutorial on <a class="reference external" href="https://www.youtube.com/watch?v=nTz2khWi2-s&amp;list=PLppGmFLhQ1HIqNiNWxVqs5wBLiA_UrKTQ&amp;index=26">Locating A New Bicycle Parking Station using Multicriteria Overlay Analysis</a> for a step-by-step guide on this approach.</p>
<p>کار با رستر علاوه بر یافتن بهترین سایت مناسب به شما کمک می‌کند تناسب را <strong>رتبه‌بندی</strong> نمایید؛ همچنین به شما این امکان می‌دهد تعداد زیادی از لایه ورودی را به‌راحتی ترکیب کرده و وزن‌های مختلفی را به هر یک از معیارها اختصاص دهید. به‌طورکلی، این روش مناسب برای تناسب اراضی است.</p>
</div>
<p>این آموزش برای انجام تجزیه‌وتحلیل تناسب اراضی است که گردش کار عملیات آن شامل تبدیل داده‌های برداری به رستر، طبقه‌بندی و ارزش‌گذاری آن‌ها و انجام عملیات ریاضی هستند.</p>
<section id="overview-of-the-task">
<h2>نمای کلی تمرین<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>در این آموزش، با اجرای تناسب اراضی، «منطقه مناسب جهت توسعه» مکان‌یابی می‌شود، بدین منظور در ابتدا، یک سری قواعد (معیار) تعریف می‌شود: یعنی منطقه مناسب برای توسعه دارای شرایط ذیل باشد</p>
<ul class="simple">
<li><p>·  نزدیک به جاده باشد و</p></li>
<li><p>· دور از منابع آبی باشد و</p></li>
<li><p>·در منطقه حفاظت‌شده قرار نگیرد.</p></li>
</ul>
<img alt="../../_images/output5.png" class="align-center" src="../../_images/output5.png" />
</section>
<section id="get-the-data">
<h2>اخذ داده<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p>ما از لایه‌های داده‌برداری <cite>OpenStreetMap (OSM) &lt;http://www.openstreetmap.org/&gt;</cite> استفاده خواهیم کرد؛ OSM یک پایگاه داده جهانی از داده‌های نقشه پایه است که به‌طور آزاد در دسترس است. <a class="reference external" href="http://download.geofabrik.de/">Geofabrik</a> فایلهای روزانه مجموعه داده OpenStreetMap را به‌روز می‌کند.</p>
<p>We will be using the OSM data layers for the state of Assam in India. Geofabrik <a class="reference external" href="http://download.geofabrik.de/asia/india.html">India shapefiles</a> were downloaded, reprojected to a UTM projection, clipped to the state boundary and packaged in a single GeoPackage file. You can download a copy of the geopackage from the link below:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/assam.gpkg">assam.gpkg</a></p>
<p>منابع داده : <a class="reference internal" href="../credits.html#geofabrik" id="id1"><span>[GEOFABRIK]</span></a></p>
</section>
<section id="procedure">
<h2>مراحل<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>در محیط نرم‌افزار QGIS، در پانل Browser آن به فایل پایگاه داده  assam.gpkgدانلود شده بروید؛ آن را بازکنید و هر پنج لایه داده جداگانه را به فریم نقشه بکشید. شما لایه‌برداری مرز منطقه <code class="docutils literal notranslate"><span class="pre">boundary</span></code>، راه‌ها <cite>roads`</cite>، مناطق حفاظت‌شده <code class="docutils literal notranslate"><span class="pre">protected_regions</span></code>، پلی‌گون منابع آب <code class="docutils literal notranslate"><span class="pre">water_polygons</span></code> و رودخانه <a href="#id1"><span class="problematic" id="id2">`</span></a>water_polylines``در پانل Layers خواهید دید</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1109.png" class="align-center" src="../../_images/1109.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>First step in the overlay analysis, is to convert each data layer to raster. An important consideration is that all rasters must be of the same extent. We will use the <code class="docutils literal notranslate"><span class="pre">boundary</span></code> layer as the extent for all the rasters. Go to <span class="menuselection">Processing ‣ Toolbox</span>. Search for and locate the <span class="menuselection">GDAL ‣ Vector conversion ‣ Rasterize (vector to raster)</span> algorithm. Double-click to launch it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2105.png" class="align-center" src="../../_images/2105.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>In the <span class="guilabel">Vector Conversion - Rasterize (vector to raster)</span> dialog, select <code class="docutils literal notranslate"><span class="pre">roads</span></code> as the <span class="guilabel">Input layer</span>. We want to create an output raster where pixel values are 1 where there is a road and 0 where there are no roads. Enter <code class="docutils literal notranslate"><span class="pre">1</span></code> as the <span class="guilabel">A fixed value to burn</span>. The input layers are in a projected CRS with meters are the unit. Select <code class="docutils literal notranslate"><span class="pre">Geoferenced</span> <span class="pre">units</span></code> as the <span class="guilabel">Output raster size units</span>. We will set the resolution of the output raster to be 15 meters. Select <code class="docutils literal notranslate"><span class="pre">15</span></code> as both <span class="guilabel">Width/Horizontal resolution</span> and <span class="guilabel">Height/Vertical resolution</span>. Next, click the arrow next to <span class="guilabel">Output extent</span> and select <span class="menuselection">Calculate from Layer ‣ boundary</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/348.png" class="align-center" src="../../_images/348.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Scroll down to find the <span class="guilabel">Advanced Parameters</span> and select the profile <code class="docutils literal notranslate"><span class="pre">High</span> <span class="pre">Compression</span></code> to apply the compression. This will generate the compressed raster file of smaller size after running the tool. Applying lossless compression is highly recommended while working with raster data.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/426.png" class="align-center" src="../../_images/426.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Set the <span class="guilabel">Rasterized</span> output raster as <code class="docutils literal notranslate"><span class="pre">raster_roads.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/523.png" class="align-center" src="../../_images/523.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Once the processing finishes, you will see a new layer <span class="guilabel">raster_roads</span> loaded in the <span class="guilabel">Layers</span> panel. The raster has pixel values 1 for pixels which intersected with the roads. All other pixels are set as <strong>NoData</strong> values. These nodata values are problematic because when raster calculator (which we will use later) encounters a pixel with nodata value in any layer, it sets the output value of that pixel to nodata as well, resulting is unexpected output. We will fill these nodata values with the value 0. Search for and locate the <span class="menuselection">Raster Tools ‣ Fill NoData cells</span> algorithm. Double-click to launch it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/623.png" class="align-center" src="../../_images/623.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">raster_roads</span></code> as the <span class="guilabel">Raster input</span> and choose <code class="docutils literal notranslate"><span class="pre">0</span></code> as the <span class="guilabel">Fill value</span>. Scroll down to find the <span class="guilabel">Advanced Parameters</span> and select the profile <code class="docutils literal notranslate"><span class="pre">High</span> <span class="pre">Compression</span></code> to apply the compression. Set the <span class="guilabel">Output raster</span> as <code class="docutils literal notranslate"><span class="pre">raster_roads_filled.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/722.png" class="align-center" src="../../_images/722.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Once the processing finishes, you will see the new layer <code class="docutils literal notranslate"><span class="pre">raster_roads_filled</span></code> loaded in the <span class="guilabel">Layers</span> panel. This raster has values 1 for roads and 0 for no roads. If the layer is not visualized correctly, you can click the <span class="guilabel">Open the Layer Styling Panel</span> and set the <span class="guilabel">Min</span> to <code class="docutils literal notranslate"><span class="pre">0</span></code> and <span class="guilabel">Max</span> to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/822.png" class="align-center" src="../../_images/822.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>Repeat steps 3-8 for the other 3 vector layers <code class="docutils literal notranslate"><span class="pre">protected_regions</span></code>, <code class="docutils literal notranslate"><span class="pre">water_polylines</span></code> and <code class="docutils literal notranslate"><span class="pre">water_polygons</span></code> layers. You need to rasterize and fill the nodata cells for these layers. If you want to run these steps manually, you can configure the processing algorithm dialog, run the algorithm and once the algorithm finishes, switch to the <span class="guilabel">Parameters</span> tab and just change the input and output layer names. You can also run each algorithm on all 4 layers in a single step using Batch Processing. See the <a class="reference internal" href="batch_processing.html"><span class="doc">Batch Processing using Processing Framework (QGIS3)</span></a> tutorial to learn more. Once you are done, you should have 4 raster layers  and generate the corresponding raster layers <code class="docutils literal notranslate"><span class="pre">raster_roads_filled</span></code>, <code class="docutils literal notranslate"><span class="pre">raster_protected_regions_filled</span></code>, <code class="docutils literal notranslate"><span class="pre">raster_water_polylines_filled</span></code> and <code class="docutils literal notranslate"><span class="pre">raster_water_polygons_filled</span></code>. You will notice that we have 2 water related layers - both representing water. We can merge them to have a single layer representing water areas in the region. Search for and locate <span class="menuselection">Raster analysis ‣ Raster calculator</span> algorithm in the Processing Toolbox. Double-click to launch it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/922.png" class="align-center" src="../../_images/922.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">raster_water_polygons</span></code> and <code class="docutils literal notranslate"><span class="pre">raster_water_polylines</span></code> layers using <span class="guilabel">...</span> button as Input Layers. Enter the following expression using <span class="guilabel">ε</span> button. Keep all the other options as default and save the output layer with the name <code class="docutils literal notranslate"><span class="pre">raster_water_merged.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;raster_water_polygons_filled@1&quot; + &quot;raster_water_polylines_filled@1&quot;
</pre></div>
</div>
<img alt="../../_images/1028.png" class="align-center" src="../../_images/1028.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>رستر ادغام‌شده باید دارای پیکسل‌هایی با مقادیر 1 برای تمام مناطق آب خواهد بود. ملاحظه خواهید کرد که مناطقی وجود دارند که دولایه یعنی، هم لایه چندضلعی آب و لایه خطی آب وجود دارند. لذا این مناطق پیکسل‌هایی با مقادیر 2 خواهند داشت - که درست نیست. ما می‌توانیم با یک دستور ساده آن را برطرف کنیم؛ دستور <span class="menuselection">Raster analysis ‣ Raster calculator</span>  دوباره باز کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1131.png" class="align-center" src="../../_images/1131.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">raster_water_merged</span></code> layer using <span class="guilabel">...</span> button as an Input Layer. Enter the following expression using <span class="guilabel">ε</span> button. Keep all the other options as default and save the output layer with the name <code class="docutils literal notranslate"><span class="pre">raster_water_filled.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;raster_water_merged@1&quot; &gt; 0
</pre></div>
</div>
<img alt="../../_images/1229.png" class="align-center" src="../../_images/1229.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>The resulting layer <code class="docutils literal notranslate"><span class="pre">raster_water_filled</span></code> now has pixels with only 0 and 1 values.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1327.png" class="align-center" src="../../_images/1327.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>اکنون‌که لایه‌هایی رستری جاده و منابع آب داریم، می‌توانیم لایه رستری فاصله (مجاورت) ایجاد کنیم. این‌ها همچنین به‌عنوان فاصله اقلیدسی شناخته می‌شوند - جایی که هر پیکسل در رستر خروجی نشان‌دهنده فاصله تا نزدیک‌ترین پیکسل در رستر ورودی است. سپس، می‌توان از این رستر به‌دست‌آمده برای تعیین مناطق مناسب که در فاصله مشخصی از ورودی قرار دارند، استفاده کرد. الگوریتم <span class="menuselection">GDAL ‣ Raster analysis ‣ Proximity (raster distance)</span> را جستجو و پیدا کنید. برای اجرای آن دو بار کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1425.png" class="align-center" src="../../_images/1425.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>In the <span class="guilabel">Raster Analysis - Proximity (Raster Distance)</span> dialog, select <code class="docutils literal notranslate"><span class="pre">raster_roads_filled</span></code> as the <span class="guilabel">Input layer</span>. Choose <code class="docutils literal notranslate"><span class="pre">Georeferenced</span> <span class="pre">coordinates</span></code> as the <span class="guilabel">Distance units</span>. As the input layers are in a projected CRS with meters as the units, enter <code class="docutils literal notranslate"><span class="pre">5000</span></code> (5 kilometers) as the <span class="guilabel">Maximum distance to be generated</span>. For all pixels that are more than the maximum distance away - we will set their values to be 5000 as well. So set the <span class="guilabel">Nodata value to use for the destination proximity raster</span> value to <code class="docutils literal notranslate"><span class="pre">5000</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1522.png" class="align-center" src="../../_images/1522.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>You can expand the <span class="guilabel">Advanced Parameters</span> and select the profile <code class="docutils literal notranslate"><span class="pre">High</span> <span class="pre">Compression</span></code> to apply the compression. Name the output file as <code class="docutils literal notranslate"><span class="pre">roads_proximity.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2016.png" class="align-center" src="../../_images/2016.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>It may take upto 15 minutes for this process to run. It is a computationally intensive algorithm that needs to compute distance for each pixel of the input raster.</p>
</div>
<ol class="arabic simple" start="17">
<li><p>Once the processing is over, a new layer <code class="docutils literal notranslate"><span class="pre">roads_proximity</span></code> will be added to the <span class="guilabel">Layers</span> panel. To visualize it better, let's change the default styling. Click the <span class="guilabel">Open the Layer Styling panel</span> button in the <span class="guilabel">Layers</span> panel. Change the <span class="guilabel">Max</span> value to <code class="docutils literal notranslate"><span class="pre">5000</span></code> under <span class="guilabel">Color gradient</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1722.png" class="align-center" src="../../_images/1722.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Repeat the <span class="guilabel">Proximity (Raster Distance)</span> algorithm for the <code class="docutils literal notranslate"><span class="pre">raster_water_filled</span></code> layer with same parameters and name the output <code class="docutils literal notranslate"><span class="pre">water_proximity.tif</span></code>. If you click around the resulting raster, you will see that it is a continuum of values from 0 to 5000. To use this raster in overlay analysis ,we must first re-classify it to create discrete values. Open <span class="menuselection">Raster analysis ‣ Raster calculator</span> algorithm again.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1819.png" class="align-center" src="../../_images/1819.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>We want to give higher score to pixels that are near to roads. So let's use the following scheme.</p></li>
</ol>
<ul>
<li><p>0-1000m –&gt; 100</p></li>
<li><p>1000-2000m –&gt; 50</p></li>
<li><p>&gt;2000m –&gt; 10</p>
<p>Select <code class="docutils literal notranslate"><span class="pre">roads_proximity</span></code> layer using <span class="guilabel">...</span> button as an Input Layer. Enter the following expression that applies the above criteria on the input. Keep all the other options as default and save the output layer with the name <code class="docutils literal notranslate"><span class="pre">roads_reclass.tif</span></code> and click <span class="guilabel">Run</span>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>100*(&quot;roads_proximity@1&quot;&lt;=1000)
    + 50*(&quot;roads_proximity@1&quot;&gt;1000)*(&quot;roads_proximity@1&quot;&lt;=2000)
    + 10*(&quot;roads_proximity@1&quot;&gt;2000)
</pre></div>
</div>
<img alt="../../_images/1916.png" class="align-center" src="../../_images/1916.png" />
</li>
</ul>
<ol class="arabic simple" start="20">
<li><p>Once the re-classification process finishes, a new layer <code class="docutils literal notranslate"><span class="pre">roads_reclass</span></code> will be added to the <span class="guilabel">Layers</span> panel. This layer has only 3 different values, 10, 50 and 100 indicating relative suitability of the pixels with regards to distance from roads. Open <span class="menuselection">Raster analysis ‣ Raster calculator</span> algorithm again.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2016.png" class="align-center" src="../../_images/2016.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>Repeat the re-classification process for the <code class="docutils literal notranslate"><span class="pre">water_proximity</span></code> layer. Here the scheme will be reverse, where pixels that are further away from water shall have higher score.</p></li>
</ol>
<ul>
<li><p>· 0-1000 -&gt; 10</p></li>
<li><p>1000 -2000m —&gt; 50</p></li>
<li><p>&gt;2000m –&gt; 100</p>
<p>Select <code class="docutils literal notranslate"><span class="pre">water_proximity</span></code> layer using <span class="guilabel">...</span> button as an Input Layer. Enter the following expression hat applies the above criteria on the      input. Keep all the other options as default and save the output layer with the name <code class="docutils literal notranslate"><span class="pre">water_reclass.tif</span></code> and click <span class="guilabel">Run</span>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>100*(&quot;water_proximity@1&quot;&gt;2000)
+ 50*(&quot;water_proximity@1&quot;&gt;1000)*(&quot;water_proximity@1&quot;&lt;=2000)
+ 10*(&quot;water_proximity@1&quot;&lt;1000)
</pre></div>
</div>
<img alt="../../_images/2119.png" class="align-center" src="../../_images/2119.png" />
</li>
</ul>
<ol class="arabic simple" start="22">
<li><p>Now we are ready to do the final overlay analysis. Recall that our criteria for determining suitability is as follows - close to roads, away from water and not in a protected region. Open <span class="menuselection">Raster analysis ‣ Raster calculator</span>. Select <code class="docutils literal notranslate"><span class="pre">roads_reclass</span></code>, <code class="docutils literal notranslate"><span class="pre">water_reclass</span></code>, <code class="docutils literal notranslate"><span class="pre">raster_protected_regions_filled</span></code> layers using <span class="guilabel">...</span> button as Input Layers. Use <span class="guilabel">ε</span> button to enter the following expression that applies these criteria. Keep other parameters as default. Name the output <code class="docutils literal notranslate"><span class="pre">overlay.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>((&quot;roads_reclass@1&quot; + &quot;water_reclass@1&quot;)/2)
*(&quot;raster_protected_regions_filled@1&quot;  !=  1 )
</pre></div>
</div>
<img alt="../../_images/2217.png" class="align-center" src="../../_images/2217.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>In this example, we are giving equal <em>weight</em> to both road and water proximity. In real-life scenario, you may have multiple criteria with different importance. You can simulate that by multiplying the rasters with appropriate <em>weights</em> in the above expression. For example, if proximity to roads is twice as importance as proximity away from water, instead of <code class="docutils literal notranslate"><span class="pre">((&quot;roads_reclass&#64;1&quot;</span> <span class="pre">+</span> <span class="pre">&quot;water_reclass&#64;1&quot;)/2)</span></code>, you can use the expression <code class="docutils literal notranslate"><span class="pre">((2*&quot;roads_reclass&#64;1&quot;</span> <span class="pre">+</span> <span class="pre">&quot;water_reclass&#64;1&quot;)/3)</span></code>.</p>
</div>
<ol class="arabic simple" start="23">
<li><p>Once the processing finishes, the resulting raster <code class="docutils literal notranslate"><span class="pre">overlay</span></code> will be added to the <span class="guilabel">Layers</span> panel. The pixel values in this raster range from 0 to 100 - where 0 is the least suitable and 100 is the most suitable area for development. Let's clip the results to the boundary layer. Open <span class="menuselection">Raster extraction ‣ Clip raster by mask layer</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2315.png" class="align-center" src="../../_images/2315.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>In the <span class="guilabel">Raster Extraction - Clip Raster by Mask Layer</span> dialog, select <code class="docutils literal notranslate"><span class="pre">overlay</span></code> as the <span class="guilabel">Input layer</span> and <code class="docutils literal notranslate"><span class="pre">boundary</span></code> as the <span class="guilabel">Mask layer</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2414.png" class="align-center" src="../../_images/2414.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>Scroll down to find the <span class="guilabel">Advanced Parameters</span> and select the profile <code class="docutils literal notranslate"><span class="pre">High</span> <span class="pre">Compression</span></code> to apply the compression. Save the <span class="guilabel">Clipped (mask)</span> layer as <code class="docutils literal notranslate"><span class="pre">overlay_clipped.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2513.png" class="align-center" src="../../_images/2513.png" />
</div></blockquote>
<ol class="arabic simple" start="26">
<li><p>Once the processing finishes, the final output layer <code class="docutils literal notranslate"><span class="pre">overlay_clipped</span></code> will be added to the <span class="guilabel">Layers</span> panel. Click the <span class="guilabel">Open the Layer Styling panel</span> button in the Layers panel and select the <code class="docutils literal notranslate"><span class="pre">Singleband</span> <span class="pre">pseudocolor</span></code> renderer.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2612.png" class="align-center" src="../../_images/2612.png" />
</div></blockquote>
<ol class="arabic simple" start="27">
<li><p>Set the <span class="guilabel">Interpolation</span> to <code class="docutils literal notranslate"><span class="pre">Discrete</span></code> and choose the <code class="docutils literal notranslate"><span class="pre">Spectral</span></code> color ramp.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2713.png" class="align-center" src="../../_images/2713.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>Click on the default label values next to each color and enter appropriate labels.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2813.png" class="align-center" src="../../_images/2813.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>The labels will also appear as the legend under the <code class="docutils literal notranslate"><span class="pre">overlay_clipped</span></code> layer. This is our final map showing the site suitability according to the chosen criteria.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2912.png" class="align-center" src="../../_images/2912.png" />
</div></blockquote>
</section>
</section>



<!-- Turn on comments on only newer tutorials having 3/ in URL -->

  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2025, Ujaval Gandhi.<br/>
      آخرین بروز رسانی در اکتبر 07, 2025 .<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a>.<br>
  You are free to use the material for any purpose as long as you give appropriate credit to the original author.</p>
</div>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/multi_criteria_overlay.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>