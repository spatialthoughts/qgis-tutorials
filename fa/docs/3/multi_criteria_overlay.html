<!DOCTYPE html>

<html lang="fa" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>تحلیل همپوشانی چندمعیار­ه (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=40f7bd05"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=35c83baa"></script>
    <link rel="search" title="جستجو" href="../../search.html" />
    <link rel="next" title="Basic Filtering and Styling with Expressions (QGIS3)" href="vector_styling_expressions.html" />
    <link rel="prev" title="ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)" href="automating_map_creation.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">مقدمه</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Working with Attributes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">استایل برداری پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">محاسبه طول خط و آمار (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">استایل‌سازی و تحلیل شطرنجی پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">کار با پروژکشن</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">زمین مرجع کردن نقشه  شیت توپوگرافی اسکن شده (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">زمین مرجع کردن عکس هوایی (QGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">رقومی کردن داده های نقشه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">اجرای اتصال جدول (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">اجرای اتصال مکانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">متحرک سازی داده های سری زمانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">تجزیه و تحلیل شطرنجی پیشرفته (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">گردش کار خودکار با استفاده از مدل پردازش (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">تحلیل همپوشانی چندمعیار­ه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">تجسم و مسیریابی شبکه پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">محاسبه منطقه ای میانگین بارش(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">ایجاد نقشه کاربری اراضی(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">محاسبه تراکم تقاطع خیابان(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">تعیین مناطق بافر کاربری اراضی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">نقشه برداری حجم دفع زباله (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">شروع برنامه نویسی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">استفاده از بیان توابع عبارتی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">ساخت پلاگین پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">اجرا و برنامه ریزی پردازش وظیفه ای در QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">نقشه برداری وب با QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">جستجو و دانلود داده های OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">منابع آموزشی QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">اعتبار داده ها</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">پردازش دسته ای با استفاده از چارچوب پردازش (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="automating_map_creation.html" title="Previous Chapter: ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ایجاد خودکار ...</span>
    </a>
  </li>
  <li>
    <a href="vector_styling_expressions.html" title="Next Chapter: Basic Filtering and Styling with Expressions (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Basic Filteri... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="multi-criteria-overlay-analysis-qgis3">
<h1>تحلیل همپوشانی چندمعیار­ه (QGIS3)<a class="headerlink" href="#multi-criteria-overlay-analysis-qgis3" title="Link to this heading">¶</a></h1>
<p>تحلیل  همپوشانی وزنی چندمعیار­هMulti-criteria weighted-overlay analysis  فرآیند تخصیص یک زمین بر اساس خصوصیات متنوعی است که باید ارزیابی شوند. اگرچه این یک عملیات معمولی GIS است، اما بهتر است با استفاده از یک روش مبتنی بر رستر انجام شود.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>همپوشانی رستر و بردار</p>
<p>شما می‌توانید با استفاده از ابزارهای پردازش مکانی مانند بافر buffer، ادغام لایه‌ها dissolve ، برش clip و اجتماع intersection، تجزیه‌وتحلیل همپوشانی overlayروی لایه‌های برداری را انجام دهید. اگر می‌خواهید یک جواب دوگزینه‌ای مثل** مناسب / نامناسب ** را پیدا کنید و با تعداد لایه کم باشد، این روش ایدئال است.</p>
<p>کار با رستر علاوه بر یافتن بهترین سایت مناسب به شما کمک می‌کند تناسب را <strong>رتبه‌بندی</strong> نمایید؛ همچنین به شما این امکان می‌دهد تعداد زیادی از لایه ورودی را به‌راحتی ترکیب کرده و وزن‌های مختلفی را به هر یک از معیارها اختصاص دهید. به‌طورکلی، این روش مناسب برای تناسب اراضی است.</p>
</div>
<p>این آموزش برای انجام تجزیه‌وتحلیل تناسب اراضی است که گردش کار عملیات آن شامل تبدیل داده‌های برداری به رستر، طبقه‌بندی و ارزش‌گذاری آن‌ها و انجام عملیات ریاضی هستند.</p>
<section id="overview-of-the-task">
<h2>نمای کلی تمرین<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>در این آموزش، با اجرای تناسب اراضی، «منطقه مناسب جهت توسعه» مکان‌یابی می‌شود، بدین منظور در ابتدا، یک سری قواعد (معیار) تعریف می‌شود: یعنی منطقه مناسب برای توسعه دارای شرایط ذیل باشد</p>
<ul class="simple">
<li><p>·  نزدیک به جاده باشد و</p></li>
<li><p>· دور از منابع آبی باشد و</p></li>
<li><p>·در منطقه حفاظت‌شده قرار نگیرد.</p></li>
</ul>
</section>
<section id="get-the-data">
<h2>اخذ داده<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p>ما از لایه‌های داده‌برداری <cite>OpenStreetMap (OSM) &lt;http://www.openstreetmap.org/&gt;</cite> استفاده خواهیم کرد؛ OSM یک پایگاه داده جهانی از داده‌های نقشه پایه است که به‌طور آزاد در دسترس است. <a class="reference external" href="http://download.geofabrik.de/">Geofabrik</a> فایلهای روزانه مجموعه داده OpenStreetMap را به‌روز می‌کند.</p>
<p>ما از لایه‌های داده  OSMمنطقه ایالت آسام هند استفاده خواهیم کرد. فایل برداری شیب فایل بدین منظور از Geofabrik <a class="reference external" href="http://download.geofabrik.de/asia/india.html">India shapefiles</a> بارگیری شدند ، پس از برش در یک فایل GeoPackage قرار داده شدند. می‌توانید نسخه‌ای از ژئوپکیج را از لینک زیر بارگیری کنید:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/assam.gpkg">assam.gpkg</a></p>
<p>منابع داده : <a class="reference internal" href="../credits.html#geofabrik" id="id1"><span>[GEOFABRIK]</span></a></p>
</section>
<section id="procedure">
<h2>مراحل<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>در محیط نرم‌افزار QGIS، در پانل Browser آن به فایل پایگاه داده  assam.gpkgدانلود شده بروید؛ آن را بازکنید و هر پنج لایه داده جداگانه را به فریم نقشه بکشید. شما لایه‌برداری مرز منطقه <code class="docutils literal notranslate"><span class="pre">boundary</span></code>، راه‌ها <cite>roads`</cite>، مناطق حفاظت‌شده <code class="docutils literal notranslate"><span class="pre">protected_regions</span></code>، پلی‌گون منابع آب <code class="docutils literal notranslate"><span class="pre">water_polygons</span></code> و رودخانه <a href="#id1"><span class="problematic" id="id2">`</span></a>water_polylines``در پانل Layers خواهید دید</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1104.png" class="align-center" src="../../_images/1104.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>First step in the overlay analysis, is to convert each data layer to raster. An important consideration is that all rasters must be of the same extent. We will use the <code class="docutils literal notranslate"><span class="pre">boundary</span></code> layer as the extent for all the rasters. Go to <span class="menuselection">Processing ‣ Toolbox</span>. Search for and locate the <span class="menuselection">GDAL ‣ Vector conversion ‣ Rasterize (vector to raster)</span> algorithm. Double-click to launch it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/290.png" class="align-center" src="../../_images/290.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>در کادرمحاوره‌ای  <span class="guilabel">Rasterize (vector to raster)</span>   لایه <code class="docutils literal notranslate"><span class="pre">roads``به‌عنوان</span> <span class="pre">لایه</span> <span class="pre">ورودی</span> <span class="pre">انتخاب</span> <span class="pre">کنید.</span> <span class="pre">ما</span> <span class="pre">می‌خواهیم</span> <span class="pre">یک</span> <span class="pre">رستر</span> <span class="pre">خروجی</span> <span class="pre">ایجاد</span> <span class="pre">کنیم</span> <span class="pre">که</span> <span class="pre">در</span> <span class="pre">آن</span> <span class="pre">مقادیر</span> <span class="pre">ارزش</span> <span class="pre">پیکسل</span> <span class="pre">برابر</span> <span class="pre">با</span> <span class="pre">عدد</span> <span class="pre">1</span> <span class="pre">داشته</span> <span class="pre">باشد؛</span> <span class="pre">یعنی</span> <span class="pre">هر</span> <span class="pre">جا</span> <span class="pre">جاده</span> <span class="pre">هست</span> <span class="pre">ارزش</span> <span class="pre">یک</span> <span class="pre">داشته</span> <span class="pre">باشد</span> <span class="pre">و</span> <span class="pre">درجایی</span> <span class="pre">که</span> <span class="pre">هیچ</span> <span class="pre">راهی</span> <span class="pre">وجود</span> <span class="pre">ندارد،</span> <span class="pre">نیز</span> <span class="pre">عدد</span> <span class="pre">صفر</span> <span class="pre">وارد</span> <span class="pre">شود.</span> <span class="pre">عدد</span> <span class="pre">``1``به</span> <span class="pre">عنوان</span> <span class="pre">ارزش</span> <span class="pre">ثابت</span> <span class="pre">در</span> <span class="pre">کادر</span> <span class="pre">ورودی</span>&#160; <span class="pre">:guilabel:`A</span> <span class="pre">fixed</span> <span class="pre">value</span> <span class="pre">to</span> <span class="pre">burn`</span> <span class="pre">وارد</span> <span class="pre">کنید.</span> <span class="pre">لایه‌های</span> <span class="pre">ورودی</span> <span class="pre">دارای</span> <span class="pre">پروژکشن</span> <span class="pre">CRSبا</span> <span class="pre">واحد</span> <span class="pre">متر</span> <span class="pre">هستند؛</span> <span class="pre">لذا</span> <span class="pre">Geoferenced</span> <span class="pre">units</span> <span class="pre"> برای</span> <span class="pre">Output</span> <span class="pre">raster</span> <span class="pre">size</span> <span class="pre">units</span> <span class="pre">(واحد</span> <span class="pre">اندازه</span> <span class="pre">رستر</span> <span class="pre">خروجی)</span> <span class="pre">انتخاب</span> <span class="pre">کنید.</span> <span class="pre">تفکیک</span> <span class="pre">مکانی</span> <span class="pre">داده</span> <span class="pre">خروجی</span> <span class="pre">را</span> <span class="pre">``15``متر</span> <span class="pre">در</span> <span class="pre">نظر</span> <span class="pre">بگیرید.</span> <span class="pre">برای</span> <span class="pre">هر</span> <span class="pre">دو</span> <span class="pre">تفکیک</span> <span class="pre">مکانی</span> <span class="pre">عرض</span> <span class="pre">/</span> <span class="pre">افقی:guilabel:`Width/Horizontal</span> <span class="pre">resolution`</span>&#160; <span class="pre">و</span> <span class="pre">طول</span> <span class="pre">/عمودی</span> <span class="pre">:guilabel:`Height/Vertical</span> <span class="pre">resolution`عمودی</span> <span class="pre">این</span> <span class="pre">عدد</span> <span class="pre">را</span> <span class="pre">بنویسید.</span> <span class="pre">در</span> <span class="pre">مرحله</span> <span class="pre">بعد،</span> <span class="pre">با</span> <span class="pre">کلیک</span> <span class="pre">بر</span> <span class="pre">روی</span> <span class="pre">دکمه</span>&#160; <span class="pre">:guilabel:`...`</span> <span class="pre">کنار</span> <span class="pre">کادر</span>&#160; <span class="pre">:guilabel:`Output</span> <span class="pre">extent`</span>&#160; <span class="pre">کلیک</span> <span class="pre">کنید؛</span> <span class="pre">در</span> <span class="pre">کادر</span> <span class="pre">Use</span> <span class="pre">extent</span> <span class="pre">برای</span> <span class="pre">محدوده­کاری،</span> <span class="pre">لایه</span> <span class="pre">``boundary</span></code> برای <span class="guilabel">Use extent for</span> را انتخاب نمایید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/340.png" class="align-center" src="../../_images/340.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Scroll down further and click the arrow button in the <span class="guilabel">Assign a specific nodata value to output bands</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/419.png" class="align-center" src="../../_images/419.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>That field should now be set to <code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">set</span></code>. This is important because when raster calculator (which we will use later) encounters a pixel with nodata value in any layer, it sets the output to nodata as well, resulting is wrong output.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/518.png" class="align-center" src="../../_images/518.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Scroll down to find the <span class="guilabel">Advanced Parameters</span> and select the profile <code class="docutils literal notranslate"><span class="pre">High</span> <span class="pre">Compression</span></code> to apply the compression. This will generate the compressed raster file of smaller size after running the tool. Applying lossless compression is highly recommended while working with raster data.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/618.png" class="align-center" src="../../_images/618.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Set the <span class="guilabel">Rasterized</span> output raster as <code class="docutils literal notranslate"><span class="pre">raster_roads.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/717.png" class="align-center" src="../../_images/717.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Once the processing finishes, you will see a new layer <span class="guilabel">raster_roads</span> loaded in the <span class="guilabel">Layers</span> panel. The default styling will show pixels with roads as white and others as black. We want to convert other 4 vector layers to rasters as well. Rather than running the rasterize algorithm one-by-one, we can use the built-in batch-processing functionality to convert them all at once. See <a class="reference internal" href="batch_processing.html"><span class="doc">Batch Processing using Processing Framework (QGIS3)</span></a> tutorial to learn more about batch processing. Right-click the <code class="docutils literal notranslate"><span class="pre">Rasterize</span> <span class="pre">(vector</span> <span class="pre">to</span> <span class="pre">raster)</span></code> algorithm and select <span class="guilabel">Execute as Batch Process</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/817.png" class="align-center" src="../../_images/817.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>در کادرمحاوره‌ای پردازش دسته‌ای <span class="guilabel">Batch Processing</span> ، با کلیک بر روی دکمه <span class="guilabel">...</span>  در ستون <span class="guilabel">Input layer</span> آن را فشار دهید و گزینه Select from Open layers  برای انتخاب لایه‌های ورودی کلیک نمایید. در کادر بازشده ،لایه ورودی‌های <code class="docutils literal notranslate"><span class="pre">boundary</span></code>،  <code class="docutils literal notranslate"><span class="pre">protected_regions</span></code>،  <code class="docutils literal notranslate"><span class="pre">water_polygons</span></code>  و <code class="docutils literal notranslate"><span class="pre">water_polylines</span></code>  لایه تیک بزیند؛ سپس، دکمه :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>OK`کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/917.png" class="align-center" src="../../_images/917.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>This  <span class="guilabel">Advanced Parameters</span> option is not available while executing the algorithm in batch mode. You will have to repeat the steps above for all the layer and skip steps 8 to 12 for applying compression on all the <span class="guilabel">Rasterized</span> outputs.</p>
</div>
<ol class="arabic simple" start="10">
<li><p>7.    پارامترها را با همان مقادیری که در لایه جاده  roads استفاده کردیم پر کنید. پس از پر کردن ردیف اول ، از  دکمه :menuselection:<a href="#id1"><span class="problematic" id="id2">`</span></a>Autofill --&gt; Fill D استفاده کنید تا مقدار یکسانی را برای همه گزینه­ های زیرین اضافه شود.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1023.png" class="align-center" src="../../_images/1023.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>در آخرین ستون این کادر، در ردیف اول، گزینه guilabel:<cite>Rasterized</cite> با کلیک بر دکمه  <span class="guilabel">...</span> آن را فشار دهید؛ در کادر <span class="guilabel">Autofill mode`تکمیل خودکار گزینه ``Fill with parameter values`</span>  و <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">layer</span></code>  برای  the <span class="guilabel">Parameter to use</span> انتخاب کنید، سپس دکمه guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>OK`بزنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1126.png" class="align-center" src="../../_images/1126.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Browse to a directory on your computer and name the layer as <code class="docutils literal notranslate"><span class="pre">raster_</span></code>. The batch processing interface will autocomplete the name with the layer name and fill in all rows. Make sure the <span class="guilabel">Load layers on completion</span> box is checked and click <span class="guilabel">OK</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1224.png" class="align-center" src="../../_images/1224.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>س از اتمام پردازش، 4 لایه رستری جدید در صفحه لایه‌ها. مشاهده خواهید کرد که 2 لایه مربوط به آب داریم ما می‌توانیم آن‌ها را ادغام کنیم تا یک‌لایه واحد مناطق آبی در منطقه داشته باشند. الگوریتم <span class="menuselection">Raster analysis ‣ Raster calculator</span> را در جعبه‌ابزار Processing جستجو و پیدا کنید. برای اجرای آن، دو بار کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1322.png" class="align-center" src="../../_images/1322.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Enter the following expression in the <span class="guilabel">Expression</span> box. You can click on the appropriate layer in the <span class="guilabel">Layers</span> box to auto insert the layer names. This expression means that we want to sum the pixel values in the first band of both the water rasters. Click the <span class="guilabel">...</span> button next to <span class="guilabel">Reference layer(s) and select ``raster_water_polygons`</span> as the reference layer. Name the output <code class="docutils literal notranslate"><span class="pre">raster_water_merged.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;raster_water_polygons@1&quot; + &quot;raster_water_polylines@1&quot;
</pre></div>
</div>
<img alt="../../_images/1420.png" class="align-center" src="../../_images/1420.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>رستر ادغام‌شده باید دارای پیکسل‌هایی با مقادیر 1 برای تمام مناطق آب خواهد بود. ملاحظه خواهید کرد که مناطقی وجود دارند که دولایه یعنی، هم لایه چندضلعی آب و لایه خطی آب وجود دارند. لذا این مناطق پیکسل‌هایی با مقادیر 2 خواهند داشت - که درست نیست. ما می‌توانیم با یک دستور ساده آن را برطرف کنیم؛ دستور <span class="menuselection">Raster analysis ‣ Raster calculator</span>  دوباره باز کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1519.png" class="align-center" src="../../_images/1519.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>Enter the following expression which will assign the value 1 that match the expression and 0 where it doesn't. Click the <span class="guilabel">...</span> button next to <span class="guilabel">Reference layer(s) and select ``raster_water_merged`</span> layer. Name the output <code class="docutils literal notranslate"><span class="pre">raster_water.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;raster_water_merged@1&quot; &gt; 0
</pre></div>
</div>
<img alt="../../_images/1618.png" class="align-center" src="../../_images/1618.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>The resulting layer <code class="docutils literal notranslate"><span class="pre">raster_water</span></code> now has pixels with only 0 and 1 values.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1719.png" class="align-center" src="../../_images/1719.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>اکنون‌که لایه‌هایی رستری جاده و منابع آب داریم، می‌توانیم لایه رستری فاصله (مجاورت) ایجاد کنیم. این‌ها همچنین به‌عنوان فاصله اقلیدسی شناخته می‌شوند - جایی که هر پیکسل در رستر خروجی نشان‌دهنده فاصله تا نزدیک‌ترین پیکسل در رستر ورودی است. سپس، می‌توان از این رستر به‌دست‌آمده برای تعیین مناطق مناسب که در فاصله مشخصی از ورودی قرار دارند، استفاده کرد. الگوریتم <span class="menuselection">GDAL ‣ Raster analysis ‣ Proximity (raster distance)</span> را جستجو و پیدا کنید. برای اجرای آن دو بار کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1817.png" class="align-center" src="../../_images/1817.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>In the <span class="guilabel">Proximity (Raster Distance)</span> dialog, select <code class="docutils literal notranslate"><span class="pre">raster_roads</span></code> as the <span class="guilabel">Input layer</span>. Choose <code class="docutils literal notranslate"><span class="pre">Georeferenced</span> <span class="pre">coordinates</span></code> as the <span class="guilabel">Distance units</span>. As the input layers are in a projected CRS with meters as the units, enter <code class="docutils literal notranslate"><span class="pre">5000</span></code> (5 kilometers) as the <span class="guilabel">Maximum distance to be generated</span>. Make sure the <span class="guilabel">Nodata value to use for the destination proximity raster</span> value is <code class="docutils literal notranslate"><span class="pre">Not</span> <span class="pre">set</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1914.png" class="align-center" src="../../_images/1914.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>You can expand the <span class="guilabel">Advanced Parameters</span> and select the profile <code class="docutils literal notranslate"><span class="pre">High</span> <span class="pre">Compression</span></code> to apply the compression. Name the output file as <code class="docutils literal notranslate"><span class="pre">roads_proximity.tif</span></code> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2014.png" class="align-center" src="../../_images/2014.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>It may take upto 15 minutes for this process to run. It is a computationaly intensive algorithm that needs to compute distance for each pixel of the input raster and our input contains over 1 billion pixels.</p>
</div>
<ol class="arabic simple" start="21">
<li><p>Once the processing is over, a new layer <code class="docutils literal notranslate"><span class="pre">roads_proximity</span></code> will be added to the <span class="guilabel">Layers</span> panel. To visualize it better, let's change the default styling. Click the <span class="guilabel">Open the Layer Styling panel</span> button in the <span class="guilabel">Layers</span> panel. Change the <span class="guilabel">Max</span> value to <code class="docutils literal notranslate"><span class="pre">5000</span></code> under <span class="guilabel">Color gradient</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2118.png" class="align-center" src="../../_images/2118.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>الگوریتم <span class="guilabel">Proximity (Raster Distance)</span>  برای <code class="docutils literal notranslate"><span class="pre">raster_water</span></code> تکرار نمایید. لایه با همان پارامترها و نام خروجی <code class="docutils literal notranslate"><span class="pre">water_proximity.tif</span></code> باشد.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2216.png" class="align-center" src="../../_images/2216.png" />
</div></blockquote>
<ol class="arabic simple" start="23">
<li><p>Once the processing finishes, you can apply the similar styling as before to visualize the results better. If you click around the resulting raster, you will see that it is a continuum of values from 0 to 5000. To use this raster in overlay analysis ,we must first re-classify it to create discrete values. Open <span class="menuselection">Raster analysis ‣ Raster calculator</span> algorithm again.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2314.png" class="align-center" src="../../_images/2314.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>We want to give higher score to pixels that are near to roads. So let's use the following scheme.</p></li>
</ol>
<ul>
<li><p>0-1000m –&gt; 100</p></li>
<li><p>0-1000m –&gt; 100</p></li>
<li><p>&gt;5000m –&gt; 10</p>
<p>عبارت زیر را وارد کنید که معیارهای فوق را در ورودی اعمال می‌کند. با کلیک بر روی دکمه:guilabel:<cite>...</cite>  کنار :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Reference layer(s)   لایه <a href="#id3"><span class="problematic" id="id4">``</span></a>roads_proximity``به‌عنوان مرجع انتخاب نمایید. لایه خروجی را <a href="#id5"><span class="problematic" id="id6">``</span></a>roads_reclass.tif``نام‌گذاری کرده و بر روی  :guilabel:<a href="#id7"><span class="problematic" id="id8">`</span></a>Run`کلیک کنید.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>100*(&quot;roads_proximity@1&quot;&lt;=1000) + 50*(&quot;roads_proximity@1&quot;&gt;1000)*(&quot;roads_proximity@1&quot;&lt;=5000) + 10*(&quot;roads_proximity@1&quot;&gt;5000)
</pre></div>
</div>
<img alt="../../_images/2413.png" class="align-center" src="../../_images/2413.png" />
</li>
</ul>
<ol class="arabic simple" start="25">
<li><p>Once the re-classification process finishes, a new layer <code class="docutils literal notranslate"><span class="pre">roads_reclass</span></code> will be added to the <span class="guilabel">Layers</span> panel. This layer has only 3 different values, 10, 50 and 100 indicating relative suitability of the pixels with regards to distance from roads. Open <span class="menuselection">Raster analysis ‣ Raster calculator</span> algorithm again.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2512.png" class="align-center" src="../../_images/2512.png" />
</div></blockquote>
<ol class="arabic simple" start="26">
<li><p>Repeat the re-classification process for the <code class="docutils literal notranslate"><span class="pre">water_proximity</span></code> layer. Here the scheme will be reverse, where pixels that are further away from water shall have higher score.</p></li>
</ol>
<ul>
<li><p>· 0-1000 -&gt; 10</p></li>
<li><p>·  1000-50000m -&gt; 50</p></li>
<li><p>5000m &lt; -&gt; 100</p>
<p>عبارت زیر را وارد کنید که معیارهای فوق را در ورودی اعمال می‌کند. با کلیک بر روی دکمه. <span class="guilabel">...</span>  کنار <span class="guilabel">Reference layer(s)  کلیک نموده برای مرجع لایه ``water_proximity``را انتخاب کنید. خروجی را ``water_reclass.tif`</span>  نام‌گذاری کرده و بر روی :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Run`کلیک کنید.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>100*(&quot;water_proximity@1&quot;&gt;5000) + 50*(&quot;water_proximity@1&quot;&gt;1000)*(&quot;water_proximity@1&quot;&lt;=5000) + 10*(&quot;water_proximity@1&quot;&lt;1000)
</pre></div>
</div>
<img alt="../../_images/2612.png" class="align-center" src="../../_images/2612.png" />
</li>
</ul>
<ol class="arabic simple" start="27">
<li><p>اکنون ما آماده انجام تحلیل نهایی همپوشانی هستیم. به یاد بیاورید که معیارهای ما برای تعیین تناسب به شرح زیر است – مناطق نزدیک به جاده‌ها باشند، دور از منابع آبی واقع شوند و در یک منطقه محافظت‌شده قرار نگیرند. منوی <span class="menuselection">Raster analysis ‣ Raster calculator`را بازکنید؛ عبارت زیر را وارد کنید که این معیارها را اعمال می‌کند. توجه داشته باشید که ما نتیجه را در انتها با لایه مرز  ``raster_boundary&#64;1`</span> ضرب می‌نماییم تا مقادیر پیکسل خارج از مرز، ارزش صفر داشته باشد. با کلیک بر روی دکمه   <span class="guilabel">...</span> کنار <span class="guilabel">Reference layer(s)</span>  کلیک نموده <code class="docutils literal notranslate"><span class="pre">raster_boundary</span></code> را به‌عنوان مرجع انتخاب کنید؛ خروجی را <code class="docutils literal notranslate"><span class="pre">overlay.tif</span></code> نام‌گذاری کرده و بر روی :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Run`کلیک کنید تا اجرا شود.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&quot;roads_reclass@1&quot; + &quot;water_reclass@1&quot;)*(&quot;raster_protected_regions@1&quot;  !=  1 )*&quot;raster_boundary@1&quot;
</pre></div>
</div>
<img alt="../../_images/2712.png" class="align-center" src="../../_images/2712.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>در این مثال، ما <em>وزن</em> یکسانی به لایه ­های «فاصله از راه» و «فاصله از رودخانه» دادیم؛ در سناریوی واقعی، ممکن است چندین معیار با <em>اوزان</em> اهمیت متفاوت داشته باشید. می‌توانید با ضرب رسترها با وزن مناسب در عبارت بالا، آن را شبیه‌سازی کنید. به‌عنوان‌مثال، اگر اهمیت وزن فاصله از راه‌ دو برابر فاصله از رودخانه است، می‌توانید لایه <code class="docutils literal notranslate"><span class="pre">roads_reclass</span></code> را  در عدد  <a href="#id1"><span class="problematic" id="id2">``</span></a>2``ضرب كنید.</p>
</div>
<ol class="arabic simple" start="28">
<li><p>پس از پایان پردازش، رستر حاصل <code class="docutils literal notranslate"><span class="pre">overlay</span></code> به صفحه لایه‌ها <span class="guilabel">Layers</span> اضافه می‌شود. مقادیر پیکسل در این رستر از 0 تا 200 است - جایی که 0 کمترین تناسب و 200 مناسب‌ترین منطقه برای توسعه است. روی دکمه <span class="guilabel">Open the Layer Styling panel</span>   در پنل <span class="guilabel">Layers</span> کلیک کنید.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2812.png" class="align-center" src="../../_images/2812.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>نمایش رندر <code class="docutils literal notranslate"><span class="pre">singleband_pseudocolor</span></code> و با رنگ نمایش <code class="docutils literal notranslate"><span class="pre">Spectral</span></code> را انتخاب کنید. برای طبقه‌بندی روی دکمه :guilabel:<a href="#id1"><span class="problematic" id="id2">`</span></a>Classify`کلیک کنید تا تنظیمات نمایش بر لایه رستری اعمال شود.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2911.png" class="align-center" src="../../_images/2911.png" />
</div></blockquote>
<ol class="arabic simple" start="30">
<li><p>روی مقادیر پیش‌فرض برچسب در کنار هر رنگ کلیک کنید و اسامی برچسب‌های مناسب را وارد کنید. همچنین برچسب‌ها به‌عنوان کلید راهنما در زیر نام <code class="docutils literal notranslate"><span class="pre">overlay</span></code> لایه ظاهر می‌شوند.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/3011.png" class="align-center" src="../../_images/3011.png" />
</div></blockquote>
<ol class="arabic simple" start="31">
<li><p>لایه‌های رستر به‌صورت شبکه‌های چهارگوشی هستند. ما می‌خواهیم پیکسل‌ها را خارج از مرز منطقه پنهان کنیم. یک روش آسان برای این هدف، استفاده از یک لایه رندر شده <code class="docutils literal notranslate"><span class="pre">Inverted</span> <span class="pre">Polygons</span></code> بر روی لایه‌برداری مرز است. در پانل لایه‌ها <span class="guilabel">Layers</span> به پایین برویید و لایه <a href="#id1"><span class="problematic" id="id2">``</span></a>boundary``را پیدا کنید لایه چندضلعی، به‌عنوان لایه نمایشی انتخاب کنید و گزینه‌های دیگر به‌طور پیش‌فرض باشد.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/3115.png" class="align-center" src="../../_images/3115.png" />
</div></blockquote>
<ol class="arabic simple" start="32">
<li><p>For the effect of the renderer to show, it needs to be at the top of the Table of Contents. Right-click the <code class="docutils literal notranslate"><span class="pre">boundary</span></code> layer and select <span class="guilabel">Move to Top</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/3211.png" class="align-center" src="../../_images/3211.png" />
</div></blockquote>
<ol class="arabic simple" start="33">
<li><p>Check the layer and the map canvas would update to show the <code class="docutils literal notranslate"><span class="pre">overlay</span></code> raster clipped to the <code class="docutils literal notranslate"><span class="pre">boundary</span></code> layer. This is the final output that shows areas within the state that are suitable for development.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/3310.png" class="align-center" src="../../_images/3310.png" />
</div></blockquote>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      آخرین بروز رسانی در مه 10, 2024 .<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/multi_criteria_overlay.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>