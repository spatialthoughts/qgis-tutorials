<!DOCTYPE html>

<html lang="fa" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Handling Invalid Geometries (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=40f7bd05"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=35c83baa"></script>
    <link rel="search" title="جستجو" href="../../search.html" />
    <link rel="next" title="تجزیه و تحلیل شطرنجی پیشرفته (QGIS3)" href="advanced_raster_analysis.html" />
    <link rel="prev" title="متحرک سازی داده های سری زمانی (QGIS3)" href="animating_time_series.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">مقدمه</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Working with Attributes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">استایل برداری پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">محاسبه طول خط و آمار (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">استایل‌سازی و تحلیل شطرنجی پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">کار با پروژکشن</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">زمین مرجع کردن نقشه  شیت توپوگرافی اسکن شده (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">زمین مرجع کردن عکس هوایی (QGIS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">رقومی کردن داده های نقشه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">اجرای اتصال جدول (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">اجرای اتصال مکانی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">متحرک سازی داده های سری زمانی (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">تجزیه و تحلیل شطرنجی پیشرفته (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">گردش کار خودکار با استفاده از مدل پردازش (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">ایجاد خودکار نقشه با اطلس طرح بندی چاپی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">تحلیل همپوشانی چندمعیار­ه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometric_buildings.html">Creating Isometric Buildings (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Making Interactive Canvas Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_reveal_maps.html">Making Interactive Reveal Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Creating an Animated Cartogram (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">تجسم و مسیریابی شبکه پایه (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">محاسبه منطقه ای میانگین بارش(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">ایجاد یک نقشه حوضه رودخانه رنگی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">ایجاد نقشه کاربری اراضی(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">محاسبه تراکم تقاطع خیابان(QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">تعیین مناطق بافر کاربری اراضی (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">نقشه برداری حجم دفع زباله (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">شروع برنامه نویسی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">استفاده از بیان توابع عبارتی پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">ساخت پلاگین پایتون (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">اجرا و برنامه ریزی پردازش وظیفه ای در QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">نقشه برداری وب با QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">جستجو و دانلود داده های OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">منابع آموزشی QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">اعتبار داده ها</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">پردازش دسته ای با استفاده از چارچوب پردازش (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="animating_time_series.html" title="Previous Chapter: متحرک سازی داده های سری زمانی (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; متحرک سازی دا...</span>
    </a>
  </li>
  <li>
    <a href="advanced_raster_analysis.html" title="Next Chapter: تجزیه و تحلیل شطرنجی پیشرفته (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">تجزیه و تحلیل... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p><a href="https://www.linkedin.com/in/spatialthoughts/"><img src="../../_static/ujaval.png">Ujaval Gandhi</a></p>

<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="handling-invalid-geometries-qgis3">
<h1>Handling Invalid Geometries (QGIS3)<a class="headerlink" href="#handling-invalid-geometries-qgis3" title="Link to this heading">¶</a></h1>
<p>When working with vector data layers, you may encounter geometry errors. These errors often become part of your data after running geoprocessing, digitizing, editing or data conversion. QGIS3 comes with build-in tools and algorithms to detect and fix invalid geometries. This tutorial will show you a typical workflow for handling invalid geometries in your data.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>Different software systems implement different notions of geometry validity. But the leading standard for the geometry model for use in a GIS is the OGC <a class="reference external" href="https://www.opengeospatial.org/standards/sfs">Simple Features Specifications (SFS)</a>. In this tutorial, we will use GEOS library to check for geometry validity which uses this standard. <a class="reference external" href="https://support.safe.com/s/article/invalid-ogc-geometry-examples">This post</a> gives a good overview of common geometry errors as defined by the OGC standard.</p>
</div>
<section id="overview-of-the-task">
<h2>Overview of the task<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>We will work with an admin boundary layer for India and fix a geometry error for a state polygon.</p>
<section id="other-skills-you-will-learn">
<h3>Other skills you will learn<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Using the <em>Topological Coloring</em> algorithm to apply a coloring scheme to a polygon layer.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Get the data<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="http://projects.datameet.org/maps/">Datameet</a> provides community-created administrative boundary shapefiles for India.</p>
<p>Download the <a class="reference external" href="https://codeload.github.com/datameet/maps/zip/0fa9fd850eda3d2062e66f2caabc65872639c85a">Datameet Spatial Data Repository [~150 MB]</a> zipfile. The downloaded archive contains multiple folders. Extract the archive and use the files in the <code class="docutils literal notranslate"><span class="pre">States/</span></code> folder.</p>
<p>Data Source: <a class="reference internal" href="../credits.html#datameet" id="id1"><span>[DATAMEET]</span></a></p>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Browse to the downloaded <code class="docutils literal notranslate"><span class="pre">India-States.zip</span></code> file in QGIS Browser. Expand it and drag the <code class="docutils literal notranslate"><span class="pre">India-States.shp</span></code> file to the map canvas.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1102.png" class="align-center" src="../../_images/1102.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>You will see a new <code class="docutils literal notranslate"><span class="pre">India-States</span></code> layer loaded in the <span class="guilabel">Layers</span> panel. Go to <span class="menuselection">Processing ‣ Toolbox</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/280.png" class="align-center" src="../../_images/280.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>We will attemp to run a processing algorithm on the input layer to demonstrate how invalid geometries can cause problems during geoprocessing operations. Search for and locate the <span class="menuselection">Cartography ‣ Topological coloring</span> algorithm. Double-click to launch it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/336.png" class="align-center" src="../../_images/336.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>In the <span class="guilabel">Topological coloring</span> dialog, select <code class="docutils literal notranslate"><span class="pre">India-States</span></code> as the <span class="guilabel">Input layer</span>. Keep all other parameters to default and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/417.png" class="align-center" src="../../_images/417.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>The <em>Topological coloring</em> algorithm implements an algorithm to color a map so that no adjacent polygons have the same color. This is a useful cartography technique and the <a class="reference external" href="https://en.wikipedia.org/wiki/Four_color_theorem">Four Color Theorem</a> states that 4 colors are enough to achieve this result. There is a graph-theory version of this theorem called <a class="reference external" href="https://en.wikipedia.org/wiki/Five_color_theorem">Five color theorem</a>. The QGIS algorithm implementation is based on  graphs so in practive you will see that complex polygon layers such as this will require upto 5 colors.</p>
</div>
<ol class="arabic simple" start="5">
<li><p>As the algorithm runs, you will see a warning displayed in the <span class="guilabel">Log</span> tab. 1 feature in the input layer had invalid geometry and was skipped during the processing. The default setting to handle invalid geometry in the Processing Toolbox is located at <span class="menuselection">Settings ‣ Options ‣ Processing ‣ General ‣ Invalid features filtering</span> and is set to <code class="docutils literal notranslate"><span class="pre">Skip</span> <span class="pre">(ignore)</span> <span class="pre">features</span> <span class="pre">with</span> <span class="pre">invalid</span> <span class="pre">geometries</span></code>. This is a good default setting, but if your input is large, you may miss this warning and may not know that an input feature was skipped. You may want to change the value to <code class="docutils literal notranslate"><span class="pre">Stop</span> <span class="pre">algorithm</span> <span class="pre">execution</span> <span class="pre">when</span> <span class="pre">a</span> <span class="pre">geometry</span> <span class="pre">is</span> <span class="pre">invalid</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/516.png" class="align-center" src="../../_images/516.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Back in the main QGIS window, you will see a new layer <code class="docutils literal notranslate"><span class="pre">Colored</span></code> added to the <span class="guilabel">Layers</span> panel. Notice that the new layer is missing a state which had invalid geometry. We now know that this particular state polygon had invalid geometry but we don't know what was the cause. We can easily find that out. Search for and locate the <span class="menuselection">Vector geometry ‣ Check validity</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/616.png" class="align-center" src="../../_images/616.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>In the <span class="guilabel">Check Validity</span> dialog, select <code class="docutils literal notranslate"><span class="pre">India-States</span></code> as the <span class="guilabel">Input layer</span>. Select <code class="docutils literal notranslate"><span class="pre">GEOS</span></code> as the <span class="guilabel">Method</span>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/715.png" class="align-center" src="../../_images/715.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>As the algorithm finishes processing, you will see 3 new layers in the <span class="guilabel">Layers</span> panel - <code class="docutils literal notranslate"><span class="pre">Valid</span> <span class="pre">output</span></code>, <code class="docutils literal notranslate"><span class="pre">Invalid</span> <span class="pre">output</span></code> and <code class="docutils literal notranslate"><span class="pre">Error</span> <span class="pre">output</span></code>. The layer <code class="docutils literal notranslate"><span class="pre">Error</span> <span class="pre">output</span></code> contains the locations and description of the geometry errors. Right-click it and select <span class="guilabel">Open Attribute Table</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/815.png" class="align-center" src="../../_images/815.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>The QGIS documentation has a detailed article on <a class="reference external" href="https://docs.qgis.org/testing/en/docs/user_manual/processing_algs/qgis/vectorgeometry.html#types-of-error-messages-and-their-meanings">Types of error messages and their meanings</a> that explains the causes of all the errors.</p>
</div>
<ol class="arabic simple" start="9">
<li><p>You will see that the error message is <em>Ring self-intersection</em>. Select the row and click <span class="guilabel">Zoom map to selected features</span> button. As you zoom in, you will see the root cause of the geometry error.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/915.png" class="align-center" src="../../_images/915.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>QGIS comes with a built-in algorithm to fix geometry errors automatically. Search for and locate the <span class="menuselection">Vector geometry ‣ Fix geometries</span> algorithm. Double-click to run it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1021.png" class="align-center" src="../../_images/1021.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>In the <span class="guilabel">Fix Geometries</span> dialog, select <code class="docutils literal notranslate"><span class="pre">India-States</span></code> as the <span class="guilabel">Input layer</span> and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1124.png" class="align-center" src="../../_images/1124.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>A new layer <code class="docutils literal notranslate"><span class="pre">Fixed</span> <span class="pre">Geometries</span></code> will be added to the <span class="guilabel">Layers</span> panel. At this point, the geometry error is fixed and you can run any processing algorithm on this layer without problems. But we can see that there is still a gap between the adjacent polygons that is unexpected and can cause topological errors down the line. We can fix this too by editing the polygon. Click the <span class="guilabel">Toggle Editing</span> button in the <span class="guilabel">Digitizing Toolbar</span>. Select the <span class="guilabel">Vertex Tool</span> and from the drop-down select <code class="docutils literal notranslate"><span class="pre">Vertex</span> <span class="pre">Tool</span> <span class="pre">(Current</span> <span class="pre">Layer)</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1222.png" class="align-center" src="../../_images/1222.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>When the vertex tool is active, click on a vertex to select it. You can press <kbd class="kbd docutils literal notranslate">Delete</kbd> key to delete a vertex or drag it to move it. You can move the vertex so that the polygon edge now touches the adjacent polygon.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/13.gif" class="align-center" src="../../_images/13.gif" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Once done, click the <span class="guilabel">Toggle Editing</span> button again and click <span class="guilabel">Save</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1418.png" class="align-center" src="../../_images/1418.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>Let's run the <span class="menuselection">Cartography ‣ Topological coloring</span> algorithm again.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1516.png" class="align-center" src="../../_images/1516.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>In the <span class="guilabel">Topological Coloring</span> dialog, make sure you select <code class="docutils literal notranslate"><span class="pre">Fixed</span> <span class="pre">Geometries</span></code> as the <span class="guilabel">Input layer</span>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1615.png" class="align-center" src="../../_images/1615.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>You will see the algorithm run without any errors and a new layer <code class="docutils literal notranslate"><span class="pre">Colored</span></code> will be added to the <span class="guilabel">Layers</span> panel. Note that the algorithm doesn't color the layer by itself, but works by adding a new column called <code class="docutils literal notranslate"><span class="pre">color_id</span></code> to each polygon that can be used to assign a unique color that is different than adjacent polygons. Select the <code class="docutils literal notranslate"><span class="pre">Colored</span></code> layer and click the <span class="guilabel">Open the Layer Styling Panel</span> button.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1716.png" class="align-center" src="../../_images/1716.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">Categorized</span></code> renderer and the column <code class="docutils literal notranslate"><span class="pre">color_id</span></code> as the <span class="guilabel">Value</span>. Click <span class="guilabel">Classify</span>. You will now see the map colored so that adjacent polygons have different colors.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1814.png" class="align-center" src="../../_images/1814.png" />
</div></blockquote>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      آخرین بروز رسانی در آوریل 01, 2025 .<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/handling_invalid_geometries.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>