<!DOCTYPE html>

<html lang="sr" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Kreiranje dodatka za Pajton (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=7e8936b6"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=552f857c"></script>
    <link rel="search" title="Претрага" href="../../search.html" />
    <link rel="next" title="Izrada dodatka za obradu (QGIS3)" href="processing_python_plugin.html" />
    <link rel="prev" title="Pisanje Pajton skripti za okvir za obradu (QGIS3)" href="processing_python_scripts.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Uvod</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Pravljenje mape (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Rad sa atributima (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Uvoz tabela ili CSV datoteka (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Osnovno stilizovanje vektora (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Izračunavanje dužina linija i statistika (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Osnovno stilizovanje i analiza rastera (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Rastersko mozaičko kreiranje i isecanje (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Rad sa podacima o terenu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Rad sa WMS podacima (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Rad sa projekcijama (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciranje topografskih listova i skeniranih mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenciranje aerosnimaka (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitalizacija podataka mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Spajanje tabela (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Izvršavanje prostornih spajanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Izvršavanje prostornih upita (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analiza najbližeg suseda (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Uzorkovanje rasterskih podataka korišćenjem tačaka ili poligona (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Izračunavanje površine rastera (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Kreiranje toplotnih mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animiranje podataka vremenskih serija (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Rukovanje nevažećim geometrijama (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Napredna rasterska analiza (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpoliranje podataka o tačkama (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Paketna obrada pomoću okvira za obradu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automatizacija složenih tokova rada pomoću Processing Modeler-a (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatizacija kreiranja mapa pomoću Atlasa za štampanje (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Analiza višekriterijumskog preklapanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Osnovno filtriranje i stilizovanje pomoću izraza (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Kreiranje mape sveta u bloku (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Stilizovanje rečne mreže pomoću izraza (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Stilizovanje kontura u 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometric_buildings.html">Kreiranje izometrijskih zgrada (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Izrada interaktivnih mapa na platnu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_reveal_maps.html">Izrada interaktivnih mapa otkrivanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Kreiranje animiranog kartograma (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Osnovna vizuelizacija i rutiranje mreže (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Lociranje najbližeg objekta pomoću matrice porekla i odredišta (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Analiza područja usluge korišćenjem Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Analiza vremena putovanja pomoću Uber kretanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Izračunavanje srednje površinske količine padavina (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">Kreiranje karte rečnog sliva u boji (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">Kreiranje mape korišćenja zemljišta (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Izračunavanje gustine raskrsnica ulica (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">Određivanje zaštitnih zona korišćenja zemljišta (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">Mapiranje količina odloženog otpada (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Početak programiranja u Pajtonu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Pokretanje algoritama za obradu putem Pajtona (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Korišćenje prilagođenih Pajton izraznih funkcija (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Pisanje Pajton skripti za okvir za obradu (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Kreiranje dodatka za Pajton (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Izrada dodatka za obradu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Pokretanje i zakazivanje QGIS zadataka obrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Veb mapiranje pomoću QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Kreiranje osnovnih mapa pomoću QTiles-a</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Korišćenje dodataka (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Pretraživanje i preuzimanje podataka OpenStreetMap-a</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">QGIS resursi za učenje</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Krediti za podatke</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Paketna obrada pomoću Processing Framework-a (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="processing_python_scripts.html" title="Previous Chapter: Pisanje Pajton skripti za okvir za obradu (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Pisanje Pajto...</span>
    </a>
  </li>
  <li>
    <a href="processing_python_plugin.html" title="Next Chapter: Izrada dodatka za obradu (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Izrada dodatk... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p><a href="https://www.linkedin.com/in/spatialthoughts/"><img src="../../_static/ujaval.png">Ujaval Gandhi</a></p>

<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="building-a-python-plugin-qgis3">
<h1>Kreiranje dodatka za Pajton (QGIS3)<a class="headerlink" href="#building-a-python-plugin-qgis3" title="Link to this heading">¶</a></h1>
<p>Dodaci „Plagin-ovi” su odličan način za proširenje funkcionalnosti QGIS-a. Možete pisati dodatke koristeći Python, koji mogu varirati od dodavanja jednostavnog dugmeta do sofisticiranih alata. Ovaj tutorijal će opisati proces podešavanja razvojnog okruženja, dizajniranja korisničkog interfejsa za dodatak i pisanja koda za interakciju sa QGIS-om. Molimo vas da pregledate tutorijal <a class="reference internal" href="getting_started_with_pyqgis.html"><span class="doc">Početak programiranja u Pajtonu (QGIS3)</span></a> da biste se upoznali sa osnovama.</p>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Ako pravite novi dodatak, toplo preporučujem da napravite dodatak za obradu umesto dodatka za grafički korisnički interfejs opisanog u ovom tutorijalu. Pogledajte <a class="reference internal" href="processing_python_plugin.html"><span class="doc">Izrada dodatka za obradu (QGIS3)</span></a> za detalje.</p>
</div>
<section id="overview-of-the-task">
<h2>Pregled zadataka<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>Razvićemo jednostavan dodatak pod nazivom „Sačuvaj atribute“ koji će omogućiti korisnicima da izaberu vektorski sloj i zapišu njegove atribute u CSV datoteku.</p>
</section>
<section id="get-the-tools">
<h2>Nabavite alate<a class="headerlink" href="#get-the-tools" title="Link to this heading">¶</a></h2>
<section id="qt-creator">
<h3>QT Kreator<a class="headerlink" href="#qt-creator" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="http://www.qt.io/">Qt</a> je frejmvork za razvoj softvera koji se koristi za razvoj aplikacija koje rade na Windows, Mac, Linux, kao i raznim mobilnim operativnim sistemima. Sam QGIS je napisan pomoću Qt frejmvorka. Za razvoj dodataka, koristićemo aplikaciju pod nazivom <a class="reference external" href="https://doc.qt.io/qt-5/qtdesigner-manual.html">Qt Creator</a> da bismo dizajnirali interfejs za naš dodatak.</p>
<p>Preuzmite i instalirajte instalater Qt Creator-a sa sajta <a class="reference external" href="https://www.qt.io/offline-installers">Qt Offline Installers</a>. Uverite se da ste izabrali <strong>Qt Creator</strong> na stranici za preuzimanje. Imajte na umu da ćete morati da kreirate besplatan Qt nalog da biste instalirali paket.</p>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Instalater OSGeo4w za QGIS na Windows-u uključuje kopiju programa <strong>Qt Designer</strong>, koji je lagana verzija <strong>Qt Creator-a</strong> i savršeno je pogodan za izradu dodataka. Možete preskočiti preuzimanje Qt Creator-a i koristiti ga umesto toga iz <span class="menuselection">C:\OSGeo4W64\bin\qgis-designer</span>.</p>
</div>
<img alt="../../_images/setup1.png" class="align-center" src="../../_images/setup1.png" />
</section>
<section id="python-bindings-for-qt">
<h3>Pajton povezivanja za Qt<a class="headerlink" href="#python-bindings-for-qt" title="Link to this heading">¶</a></h3>
<p>Pošto razvijamo dodatak u Pajtonu, potrebno je da instaliramo Pajton povezivanja za Qt. Način njihovog instaliranja zavisiće od platforme koju koristite. Za izradu dodataka potreban nam je alat komandne linije <code class="docutils literal notranslate"><span class="pre">pyrcc5</span></code>.</p>
<p><strong>Windows</strong></p>
<p>Relevantna povezivanja za Pajton su uključena u instalaciju QGIS-a na Windows-u. Ali da bismo ih koristili iz fascikle dodataka, moramo naznačiti putanju do instalacije QGIS-a.</p>
<p>Napravite Windows Batch datoteku (ekstenzija .bat) sa sledećim sadržajem i sačuvajte je na računaru kao <code class="docutils literal notranslate"><span class="pre">compile.bat</span></code>. Kasnije ćemo kopirati ovu datoteku u fasciklu dodatka. Ako ste instalirali QGIS na drugoj putanji, zamenite <code class="docutils literal notranslate"><span class="pre">C:\OSGeo4W64\bin\</span></code> sa vašom putanjom.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>@echo off
call &quot;C:\OSGeo4W64\bin\o4w_env.bat&quot;
call &quot;C:\OSGeo4W64\bin\qt5_env.bat&quot;
call &quot;C:\OSGeo4W64\bin\py3_env.bat&quot;

@echo on
pyrcc5 -o resources.py resources.qrc
</pre></div>
</div>
<img alt="../../_images/setup2.png" class="align-center" src="../../_images/setup2.png" />
<p><strong>Mac</strong></p>
<p>Instalirajte <a class="reference external" href="http://brew.sh">Homebrew</a> menadžer paketa. Instalirajte <code class="docutils literal notranslate"><span class="pre">PyQt</span></code> paket pokretanjem sledeće komande:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>brew install pyqt
</pre></div>
</div>
<dl class="simple">
<dt><strong>Linux</strong></dt><dd><p>U zavisnosti od vaše distribucije, pronađite i instalirajte paket <code class="docutils literal notranslate"><span class="pre">python-qt5</span></code>. Na distribucijama zasnovanim na Ubuntu i Debian-u, možete pokrenuti sledeću komandu:</p>
</dd>
</dl>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get install python-qt5
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Možda ćete otkriti da je QGIS već instalirao ovaj paket.</p>
</div>
</section>
<section id="a-text-editor-or-a-python-ide">
<h3>Uređivač teksta ili Pajton IDE<a class="headerlink" href="#a-text-editor-or-a-python-ide" title="Link to this heading">¶</a></h3>
<p>Bilo koja vrsta razvoja softvera zahteva dobar uređivač teksta. Ako već imate omiljeni uređivač teksta ili IDE (integrisano razvojno okruženje), možete ga koristiti za ovaj tutorijal. U suprotnom, svaka platforma nudi širok izbor besplatnih ili plaćenih opcija za uređivače teksta. Izaberite onaj koji odgovara vašim potrebama.</p>
<p>Ovaj tutorijal koristi Notepad++ editor na Windows-u.</p>
<p><strong>Windows</strong></p>
<p><a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> je dobar besplatni editor za Windows. Preuzmite i instalirajte <a class="reference external" href="https://notepad-plus-plus.org/download/">Notepad++ editor</a>.</p>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Ako koristite Notepad++, obavezno idite na <span class="menuselection">Settings ‣ Preferences ‣ Tab Settings</span> i omogućite <span class="guilabel">Replace by space</span>. Python je veoma osetljiv na razmake i ovo podešavanje će osigurati da se tabulatori i razmaci pravilno tretiraju.</p>
</div>
</section>
<section id="plugin-builder-plugin">
<h3>Dodatak za kreiranje dodataka<a class="headerlink" href="#plugin-builder-plugin" title="Link to this heading">¶</a></h3>
<p>Postoji koristan QGIS dodatak pod nazivom <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Builder</span></code> koji kreira sve potrebne datoteke i šablonski kod za dodatak. Pronađite i instalirajte dodatak <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Builder</span></code>. Pogledajte <a class="reference internal" href="../using_plugins.html"><span class="doc">Korišćenje dodataka</span></a> za više detalja o tome kako instalirati dodatke.</p>
</section>
<section id="plugins-reloader-plugin">
<h3>Dodaci dodatak za ponovno učitavanje<a class="headerlink" href="#plugins-reloader-plugin" title="Link to this heading">¶</a></h3>
<p>Ovo je još jedan pomoćni dodatak koji omogućava iterativni razvoj dodataka. Koristeći ovaj dodatak, možete promeniti kod svog dodatka i on će se odraziti u QGIS-u bez potrebe da svaki put ponovo pokrećete QGIS. Pronađite i instalirajte dodatak <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Reloader</span></code>. Pogledajte <a class="reference internal" href="../using_plugins.html"><span class="doc">Korišćenje dodataka</span></a> za više detalja o tome kako instalirati dodatke.</p>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Plugin Reloader je eksperimentalni dodatak. Uverite se da ste označili <span class="guilabel">Prikaži i eksperimentalne dodatke</span> u podešavanjima <span class="guilabel">Plugin Manager</span> ako ga ne možete pronaći.</p>
</div>
</section>
</section>
<section id="procedure">
<h2>Procedura<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Otvorite QGIS. Idite na <span class="menuselection">Dodaci ‣ Konstruktor dodataka ‣ Konstruktor dodataka</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/129.png" class="align-center" src="../../_images/129.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Videćete dijalog <span class="guilabel">QGIS Plugin Builder</span> sa formularom. Možete popuniti formular detaljima koji se odnose na naš dodatak. <span class="guilabel">Naziv klase</span> će biti naziv Pajton klase koja sadrži logiku dodatka. Ovo će takođe biti naziv fascikle koja sadrži sve datoteke dodatka. Unesite <code class="docutils literal notranslate"><span class="pre">SaveAttributes</span></code> kao naziv klase. <span class="guilabel">Naziv dodatka</span> je naziv pod kojim će se vaš dodatak pojaviti u <span class="guilabel">Plugin Manager</span>. Unesite naziv kao <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span></code>. Dodajte opis u polje <span class="guilabel">Description</span>. <span class="guilabel">Naziv modula</span> će biti naziv glavne Pajton datoteke za dodatak. Unesite ga kao <code class="docutils literal notranslate"><span class="pre">save_attributes</span></code>. Ostavite brojeve verzija kakvi jesu i unesite svoje ime i adresu e-pošte u odgovarajuća polja. Kliknite na <span class="guilabel">Dalje</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/219.png" class="align-center" src="../../_images/219.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Unesite kratak opis dodatka za dijalog <span class="guilabel">O nama</span> i kliknite na <span class="guilabel">Dalje</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/317.png" class="align-center" src="../../_images/317.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Izaberite „Dugme za alatke sa dijalogom“ iz selektora <span class="guilabel">Šablon</span>. Vrednost <span class="guilabel">Tekst za stavku menija</span> će biti način na koji će korisnici pronaći vaš dodatak u QGIS meniju. Unesite je kao <code class="docutils literal notranslate"><span class="pre">Sačuvaj</span> <span class="pre">atribute</span> <span class="pre">kao</span> <span class="pre">CSV</span></code>. Polje <span class="guilabel">Meni</span> će odrediti gde će se stavka vašeg dodatka dodati u QGIS. Pošto je naš dodatak za vektorske podatke, izaberite <code class="docutils literal notranslate"><span class="pre">Vektor</span></code>. Kliknite na <span class="guilabel">Sledeće</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/46.png" class="align-center" src="../../_images/46.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Konstruktor dodataka će vas pitati koje vrste datoteka treba generisati. Zadržite podrazumevani izbor i kliknite na <span class="guilabel">Dalje</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/56.png" class="align-center" src="../../_images/56.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Pošto ne nameravamo da objavimo dodatak, možete ostaviti vrednosti <span class="guilabel">Praćenje grešaka</span>, <span class="guilabel">Repozitorijum</span> i <span class="guilabel">Početna stranica</span> na podrazumevane vrednosti. Označite polje <span class="guilabel">Označi dodatak kao eksperimentalni</span> na dnu i kliknite na <span class="guilabel">Sledeće</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/66.png" class="align-center" src="../../_images/66.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Biće vam zatraženo da izaberete direktorijum za vaš dodatak. Za sada, sačuvajte ga u direktorijum koji možete lako pronaći na računaru i kliknite na <span class="guilabel">Generiši</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/76.png" class="align-center" src="../../_images/76.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Zatim, pritisnite dugme <span class="guilabel">generate</span>. Videćete dijalog za potvrdu kada vaš šablon dodatka bude kreiran.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/86.png" class="align-center" src="../../_images/86.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Možda ćete dobiti poruku koja kaže da pyrcc5 nije pronađen u putanji. Možete ignorisati ovu poruku.</p>
</div>
<ol class="arabic simple" start="9">
<li><p>Pre nego što možemo da koristimo novokreirani dodatak, potrebno je da kompajliramo datoteku <code class="docutils literal notranslate"><span class="pre">resources.qrc</span></code> koju je kreirao Plugin Builder. Ova datoteka je deo <a class="reference external" href="https://doc.qt.io/qt-5/resources.html">Qt Resource System</a> koji se odnosi na sve binarne datoteke korišćene u dodatku. Za ovaj dodatak, on će imati samo ikonu dodatka. Kompajliranje ove datoteke generiše kod aplikacije koji se može koristiti u dodatku nezavisno od toga na kojoj platformi se dodatak pokreće. Pratite uputstva specifična za platformu za ovaj korak.</p></li>
</ol>
<p><strong>Windows</strong></p>
<p>Sada možete kopirati datoteku <code class="docutils literal notranslate"><span class="pre">compile.bat</span></code> (kreiranu tokom odeljka <em>Python Bindings for Qt</em> na početku) u fasciklu dodatka. Nakon kopiranja, dvaput kliknite na datoteku da biste je pokrenuli. Ako je pokretanje bilo uspešno, videćete novu datoteku pod nazivom <code class="docutils literal notranslate"><span class="pre">resources.py</span></code> u fascikli.</p>
<blockquote>
<div><img alt="../../_images/96.png" class="align-center" src="../../_images/96.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Ako ovaj korak ne uspe, možete pokrenuti <code class="docutils literal notranslate"><span class="pre">cmd.exe</span></code> i pregledati fasciklu sa dodatkom pomoću komande <code class="docutils literal notranslate"><span class="pre">cd</span></code>. Pokrenite paketnu datoteku pokretanjem <code class="docutils literal notranslate"><span class="pre">compile.bat</span></code> da biste videli grešku.</p>
</div>
<p><strong>Mac and Linux</strong></p>
<p>Prvo ćete morati da instalirate <code class="docutils literal notranslate"><span class="pre">pb_tool</span></code>. Otvorite terminal i instalirajte ga preko pip-a.</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo pip3 install pb_tool
</pre></div>
</div>
</div></blockquote>
<p>Otvorite terminal, idite u direktorijum dodataka i otkucajte <code class="docutils literal notranslate"><span class="pre">pb_tool</span> <span class="pre">compile</span></code>. Ovo će pokrenuti komandu <code class="docutils literal notranslate"><span class="pre">pyrcc5</span></code> koju smo instalirali kao deo odeljka <em>Python Bindings for Qt</em>.</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pb_tool compile
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Dodaci u QGIS-u se čuvaju u posebnoj fascikli. Moramo da kopiramo naš direktorijum dodataka u tu fasciklu pre nego što se može koristiti. U QGIS-u, pronađite trenutnu fasciklu profila tako što ćete otići na <span class="menuselection">Podešavanja ‣ Korisnički profili ‣ Otvori fasciklu aktivnog profila</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/109.png" class="align-center" src="../../_images/109.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>U folderu profila, kopirajte folder sa dodatkom u podfolder <span class="menuselection">python ‣ plugins</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1112.png" class="align-center" src="../../_images/1112.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Sada smo spremni da prvi put pogledamo potpuno novi dodatak koji smo kreirali. Zatvorite QGIS i ponovo ga pokrenite. Idite na <span class="menuselection">Dodaci ‣ Upravljanje i instaliranje dodataka</span> i omogućite dodatak <code class="docutils literal notranslate"><span class="pre">Sačuvaj</span> <span class="pre">atribute</span></code> na kartici <span class="guilabel">Instalirano</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1210.png" class="align-center" src="../../_images/1210.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>Primetićete da postoji nova ikona u traci sa alatkama dodatka i novi meni pod <span class="menuselection">Vektor ‣ Sačuvaj atribute ‣ Sačuvaj atribute kao CSV`</span>. Izaberite ga da biste pokrenuli dijalog dodatka.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/138.png" class="align-center" src="../../_images/138.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Primetićete novi prazan dijalog pod nazivom <span class="guilabel">Sačuvaj atribute</span>. Zatvorite ovaj dijalog.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/148.png" class="align-center" src="../../_images/148.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>Sada ćemo dizajnirati naš dijaloški okvir i dodati mu neke elemente korisničkog interfejsa. Otvorite program <code class="docutils literal notranslate"><span class="pre">Qt</span> <span class="pre">Creator</span></code> i idite na <span class="menuselection">File ‣ Open File or Project</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/158.png" class="align-center" src="../../_images/158.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>Idite do direktorijuma dodatka i izaberite datoteku <code class="docutils literal notranslate"><span class="pre">save_attributes_dialog_base.ui</span></code>. Kliknite na <span class="guilabel">Otvori</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/16.gif" class="align-center" src="../../_images/16.gif" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Windows skriva fasciklu „AppData“ tako da je možda nećete videti u dijalogu za izbor datoteka. Možete uneti „AppData“ u <span class="guilabel">Ime datoteke</span> iz njenog matičnog direktorijuma da biste je otvorili.</p>
</div>
<ol class="arabic simple" start="17">
<li><p>Videćete prazan dijalog iz dodatka. Možete prevlačiti i ispuštati elemente sa leve strane dijaloga. Dodaćemo tip <span class="guilabel">Combo Box</span> sa <span class="guilabel">Input Widgets</span>. Prevucite ga u dijalog dodatka.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/178.png" class="align-center" src="../../_images/178.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Promenite veličinu kombinovanog okvira i podesite njegovu veličinu. Sada prevucite <span class="guilabel">Oznaka</span> tipa <span class="guilabel">Prikaz vidžeta</span> u dijalog.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/186.png" class="align-center" src="../../_images/186.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>Kliknite na tekst oznake i unesite „Izaberi sloj“.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/195.png" class="align-center" src="../../_images/195.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>Sačuvajte ovu datoteku tako što ćete otići na <span class="menuselection">File ‣ Save save_attributes_dialog_base.ui</span>. Imajte na umu da je naziv objekta kombinovane kutije <code class="docutils literal notranslate"><span class="pre">comboBox</span></code>. Da bismo interagovali sa ovim objektom koristeći Pajton kod, moraćemo da ga pozovemo pod ovim imenom.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/205.png" class="align-center" src="../../_images/205.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>Hajde da ponovo učitamo naš dodatak kako bismo mogli da vidimo promene u dijaloškom prozoru. Idite na <span class="menuselection">Dodatak ‣ Program za ponovno učitavanje dodataka ‣ Izaberite dodatak koji treba ponovo učitati</span>. Izaberite <code class="docutils literal notranslate"><span class="pre">SaveAttributes</span></code> u dijalogu <span class="guilabel">Konfiguriši program za ponovno učitavanje dodataka</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2110.png" class="align-center" src="../../_images/2110.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>Kliknite na dugme <span class="guilabel">Ponovo učitaj dodatak</span> da biste učitali najnoviju verziju dodatka. Kliknite na dugme <span class="guilabel">Sačuvaj atribute kao CSV</span> da biste otvorili novodizajnirani dijaloški prozor.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/225.png" class="align-center" src="../../_images/225.png" />
</div></blockquote>
<ol class="arabic" start="23">
<li><p>Dodajmo malo logike dodatku koji će popuniti kombinovani okvir slojevima učitanim u QGIS. Idite u direktorijum dodatka i učitajte datoteku <code class="docutils literal notranslate"><span class="pre">save_attributes.py</span></code> u uređivaču teksta. Prvo, umetnite na vrh datoteke sa ostalim uvozima:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProject</span>
</pre></div>
</div>
<p>Zatim se pomerite nadole do kraja i pronađite metodu <code class="docutils literal notranslate"><span class="pre">run(self)</span></code>. Ova metoda će biti pozvana kada kliknete na dugme na traci sa alatkama ili izaberete stavku menija dodatka. Dodajte sledeći kod na početak metode. Ovaj kod učitava slojeve u QGIS-u i dodaje ih objektu <code class="docutils literal notranslate"><span class="pre">comboBox</span></code> iz dijaloga dodatka.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fetch the currently loaded layers</span>
<span class="n">layers</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span><span class="o">.</span><span class="n">children</span><span class="p">()</span>
<span class="c1"># Clear the contents of the comboBox from previous runs</span>
<span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="c1"># Populate the comboBox with names of all the loaded layers</span>
<span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">])</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/23a.png" class="align-center" src="../../_images/23a.png" />
<img alt="../../_images/23b.png" class="align-center" src="../../_images/23b.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>Nazad u glavnom prozoru QGIS-a, ponovo učitajte dodatak klikom na dugme <span class="guilabel">Ponovo učitaj dodatak</span>. Da bismo testirali ovu novu funkcionalnost, moramo učitati neke slojeve u QGIS. Nakon što ste učitali neke slojeve, pokrenite dodatak tako što ćete otići na <span class="menuselection">Vektor ‣ Sačuvaj atribute ‣ Sačuvaj atribute kao CSV</span>. Videćete da je naš kombinovani okvir sada popunjen imenima slojeva koji su učitani u QGIS.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/245.png" class="align-center" src="../../_images/245.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>Dodajmo preostale elemente korisničkog interfejsa. Vratimo se na Qt Creator i učitajmo datoteku <code class="docutils literal notranslate"><span class="pre">save_attributes_dialog_base.ui</span></code>. Dodaj <code class="docutils literal notranslate"><span class="pre">Label</span></code> <span class="guilabel">Display Widget</span> i promeni tekst u <code class="docutils literal notranslate"><span class="pre">Select</span> <span class="pre">output</span> <span class="pre">file</span></code>. Dodaj <code class="docutils literal notranslate"><span class="pre">LineEdit</span></code> tipa <span class="guilabel">Input Widget</span> koji će prikazivati putanju izlazne datoteke koju je korisnik izabrao. Zatim, dodaj <code class="docutils literal notranslate"><span class="pre">Push</span> <span class="pre">Button</span></code> tipa <span class="guilabel">Button</span> i promeni oznaku dugmeta u <code class="docutils literal notranslate"><span class="pre">...</span></code>. Zabeležite imena objekata vidžeta koje ćemo morati da koristimo za interakciju sa njima. Sačuvaj datoteku.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/255.png" class="align-center" src="../../_images/255.png" />
</div></blockquote>
<ol class="arabic simple" start="26">
<li><p>Sada ćemo dodati Pajton kod za otvaranje pregledača datoteka kada korisnik klikne na dugme „…“ i prikazivanje putanje za izbor u vidžetu za uređivanje linije. Otvorite datoteku „save_attributes.py“ u uređivaču teksta. Dodajte „QFileDialog“ na listu uvoza „QtWidgets“ na vrhu datoteke.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/264.png" class="align-center" src="../../_images/264.png" />
</div></blockquote>
<ol class="arabic simple" start="27">
<li><p>Dodajte novu metodu pod nazivom <code class="docutils literal notranslate"><span class="pre">select_output_file</span></code> sa sledećim kodom. Ovaj kod će otvoriti pregledač datoteka i popuniti vidžet za uređivanje linije putanjom datoteke koju je korisnik izabrao. Obratite pažnju na to kako <code class="docutils literal notranslate"><span class="pre">getSaveFileName</span></code> vraća korku sa imenom datoteke i korišćenim filterom.</p></li>
</ol>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">select_output_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">filename</span><span class="p">,</span> <span class="n">_filter</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="p">,</span> <span class="s2">&quot;Select   output file &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s1">&#39;*.csv&#39;</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/275.png" class="align-center" src="../../_images/275.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>Sada treba da dodamo kod tako da kada se klikne na dugme <cite>…</cite>, bude pozvana metoda <code class="docutils literal notranslate"><span class="pre">select_output_file</span></code>. Pomerite se nadole do metode <code class="docutils literal notranslate"><span class="pre">run</span></code> i dodajte sledeći red u blok gde se dijalog inicijalizuje. Ovaj kod će povezati metodu <code class="docutils literal notranslate"><span class="pre">select_output_file</span></code> sa signalom <code class="docutils literal notranslate"><span class="pre">clicked</span></code> vidžeta dugmeta.</p></li>
</ol>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_output_file</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/285.png" class="align-center" src="../../_images/285.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>Vratite se u QGIS, ponovo učitajte dodatak i pokrenite ga. Ako je sve prošlo u redu, moći ćete da kliknete na dugme „…“ i izaberete izlaznu tekstualnu datoteku sa vašeg diska.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/294.png" class="align-center" src="../../_images/294.png" />
</div></blockquote>
<ol class="arabic" start="30">
<li><p>Kada kliknete na <span class="guilabel">OK</span> u dijalogu dodatka, ništa se ne dešava. To je zato što nismo dodali logiku za preuzimanje informacija o atributima iz sloja i njihovo pisanje u tekstualnu datoteku. Sada imamo sve delove na mestu da uradimo upravo to. Pronađite mesto u metodi <code class="docutils literal notranslate"><span class="pre">run</span></code> gde piše <code class="docutils literal notranslate"><span class="pre">pass</span></code>. Zamenite ga kodom ispod. Objašnjenje za ovaj kod možete pronaći u <a class="reference internal" href="getting_started_with_pyqgis.html"><span class="doc">Početak programiranja u Pajtonu (QGIS3)</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
  <span class="n">selectedLayerIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
  <span class="n">selectedLayer</span> <span class="o">=</span> <span class="n">layers</span><span class="p">[</span><span class="n">selectedLayerIndex</span><span class="p">]</span><span class="o">.</span><span class="n">layer</span><span class="p">()</span>
  <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">selectedLayer</span><span class="o">.</span><span class="n">fields</span><span class="p">()]</span>
  <span class="c1"># write header</span>
  <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
  <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
  <span class="c1"># write feature attributes</span>
  <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">selectedLayer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">():</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">name</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/304.png" class="align-center" src="../../_images/304.png" />
</li>
<li><p>Imamo još jednu stvar koju želimo da dodamo. Kada se operacija uspešno završi, trebalo bi da to obavestimo korisnika. Preferirani način za slanje obaveštenja korisniku u QGIS-u je putem metode <code class="docutils literal notranslate"><span class="pre">self.iface.messageBar().pushMessage()</span></code>. Dodajte <code class="docutils literal notranslate"><span class="pre">Qgis</span></code> na listu importovanih datoteka <code class="docutils literal notranslate"><span class="pre">qgis.core</span></code> na vrhu datoteke i dodajte kod ispod na kraj metode <code class="docutils literal notranslate"><span class="pre">run</span></code>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">messageBar</span><span class="p">()</span><span class="o">.</span><span class="n">pushMessage</span><span class="p">(</span>
  <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Output file written at &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">,</span>
  <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Success</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/31a.png" class="align-center" src="../../_images/31a.png" />
<img alt="../../_images/31b.png" class="align-center" src="../../_images/31b.png" />
</div></blockquote>
<ol class="arabic simple" start="32">
<li><p>Sada je naš dodatak spreman. Ponovo učitajte dodatak i isprobajte ga. Videćete da će izlazna tekstualna datoteka koju ste izabrali imati atribute iz vektorskog sloja.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/323.png" class="align-center" src="../../_images/323.png" />
</div></blockquote>
<ol class="arabic simple" start="33">
<li><p>Možete da arhivirate direktorijum dodataka i delite ga sa svojim korisnicima. Oni mogu da raspakuju sadržaj u svoj direktorijum dodataka i isprobaju vaš dodatak. Ako je ovo pravi dodatak, otpremili biste ga u <a class="reference external" href="https://plugins.qgis.org/">QGIS repozitorijum dodataka</a> kako bi svi QGIS korisnici mogli da pronađu i preuzmu vaš dodatak.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Ovaj dodatak je samo u demonstracione svrhe. Nemojte objavljivati ovaj dodatak niti ga otpremati u repozitorijum dodataka QGIS-a.</p>
</div>
<p>Ispod je kompletna datoteka <code class="docutils literal notranslate"><span class="pre">save_attributes.py</span></code> kao referenca.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin saves the attributes of the selected vector layer as a CSV file.</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-03-28</span>
<span class="sd">        git sha              : $Format:%H$</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QSettings</span><span class="p">,</span> <span class="n">QTranslator</span><span class="p">,</span> <span class="n">qVersion</span><span class="p">,</span> <span class="n">QCoreApplication</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QAction</span><span class="p">,</span> <span class="n">QFileDialog</span>
<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProject</span><span class="p">,</span> <span class="n">Qgis</span>

<span class="c1"># Initialize Qt resources from file resources.py</span>
<span class="kn">from</span> <span class="nn">.resources</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1"># Import the code for the dialog</span>
<span class="kn">from</span> <span class="nn">.save_attributes_dialog</span> <span class="kn">import</span> <span class="n">SaveAttributesDialog</span>
<span class="kn">import</span> <span class="nn">os.path</span>


<span class="k">class</span> <span class="nc">SaveAttributes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;QGIS Plugin Implementation.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        :param iface: An interface instance that will be passed to this class</span>
<span class="sd">            which provides the hook by which you can manipulate the QGIS</span>
<span class="sd">            application at run time.</span>
<span class="sd">        :type iface: QgsInterface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Save reference to the QGIS interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span>
        <span class="c1"># initialize plugin directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="c1"># initialize locale</span>
        <span class="n">locale</span> <span class="o">=</span> <span class="n">QSettings</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39;locale/userLocale&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">locale_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plugin_dir</span><span class="p">,</span>
            <span class="s1">&#39;i18n&#39;</span><span class="p">,</span>
            <span class="s1">&#39;SaveAttributes_</span><span class="si">{}</span><span class="s1">.qm&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">locale</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">locale_path</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="n">QTranslator</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">locale_path</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">qVersion</span><span class="p">()</span> <span class="o">&gt;</span> <span class="s1">&#39;4.3.3&#39;</span><span class="p">:</span>
                <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">installTranslator</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="p">)</span>

        <span class="c1"># Declare instance attributes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">menu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;&amp;Save Attributes&#39;</span><span class="p">)</span>

        <span class="c1"># Check if plugin was started the first time in current QGIS session</span>
        <span class="c1"># Must be set in initGui() to survive plugin reloads</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">first_start</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># noinspection PyMethodMayBeStatic</span>
    <span class="k">def</span> <span class="nf">tr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the translation for a string using Qt translation API.</span>

<span class="sd">        We implement this ourselves since we do not inherit QObject.</span>

<span class="sd">        :param message: String for translation.</span>
<span class="sd">        :type message: str, QString</span>

<span class="sd">        :returns: Translated version of message.</span>
<span class="sd">        :rtype: QString</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># noinspection PyTypeChecker,PyArgumentList,PyCallByClass</span>
        <span class="k">return</span> <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s1">&#39;SaveAttributes&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">add_action</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">icon_path</span><span class="p">,</span>
        <span class="n">text</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">,</span>
        <span class="n">enabled_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_to_menu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_to_toolbar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">status_tip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">whats_this</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a toolbar icon to the toolbar.</span>

<span class="sd">        :param icon_path: Path to the icon for this action. Can be a resource</span>
<span class="sd">            path (e.g. &#39;:/plugins/foo/bar.png&#39;) or a normal file system path.</span>
<span class="sd">        :type icon_path: str</span>

<span class="sd">        :param text: Text that should be shown in menu items for this action.</span>
<span class="sd">        :type text: str</span>

<span class="sd">        :param callback: Function to be called when the action is triggered.</span>
<span class="sd">        :type callback: function</span>

<span class="sd">        :param enabled_flag: A flag indicating if the action should be enabled</span>
<span class="sd">            by default. Defaults to True.</span>
<span class="sd">        :type enabled_flag: bool</span>

<span class="sd">        :param add_to_menu: Flag indicating whether the action should also</span>
<span class="sd">            be added to the menu. Defaults to True.</span>
<span class="sd">        :type add_to_menu: bool</span>

<span class="sd">        :param add_to_toolbar: Flag indicating whether the action should also</span>
<span class="sd">            be added to the toolbar. Defaults to True.</span>
<span class="sd">        :type add_to_toolbar: bool</span>

<span class="sd">        :param status_tip: Optional text to show in a popup when mouse pointer</span>
<span class="sd">            hovers over the action.</span>
<span class="sd">        :type status_tip: str</span>

<span class="sd">        :param parent: Parent widget for the new action. Defaults None.</span>
<span class="sd">        :type parent: QWidget</span>

<span class="sd">        :param whats_this: Optional text to show in the status bar when the</span>
<span class="sd">            mouse pointer hovers over the action.</span>

<span class="sd">        :returns: The action that was created. Note that the action is also</span>
<span class="sd">            added to self.actions list.</span>
<span class="sd">        :rtype: QAction</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">icon_path</span><span class="p">)</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">enabled_flag</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">status_tip</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="n">status_tip</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">whats_this</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">setWhatsThis</span><span class="p">(</span><span class="n">whats_this</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_to_toolbar</span><span class="p">:</span>
            <span class="c1"># Adds plugin icon to Plugins toolbar</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addToolBarIcon</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_to_menu</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToVectorMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">menu</span><span class="p">,</span>
                <span class="n">action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">action</span>

    <span class="k">def</span> <span class="nf">initGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the menu entries and toolbar icons inside the QGIS GUI.&quot;&quot;&quot;</span>

        <span class="n">icon_path</span> <span class="o">=</span> <span class="s1">&#39;:/plugins/save_attributes/icon.png&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span>
            <span class="n">icon_path</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Save Attributes as CSV&#39;</span><span class="p">),</span>
            <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>

        <span class="c1"># will be set False in run()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">first_start</span> <span class="o">=</span> <span class="kc">True</span>


    <span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes the plugin menu item and icon from QGIS GUI.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removePluginVectorMenu</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;&amp;Save Attributes&#39;</span><span class="p">),</span>
                <span class="n">action</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removeToolBarIcon</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select_output_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">filename</span><span class="p">,</span> <span class="n">_filter</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="p">,</span> <span class="s2">&quot;Select   output file &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s1">&#39;*.csv&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
      
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run method that performs all the real work&quot;&quot;&quot;</span>

        <span class="c1"># Create the dialog with elements (after translation) and keep reference</span>
        <span class="c1"># Only create GUI ONCE in callback, so that it will only load when the plugin is started</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">first_start</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">first_start</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span> <span class="o">=</span> <span class="n">SaveAttributesDialog</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">pushButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">select_output_file</span><span class="p">)</span>

        
        <span class="c1"># Fetch the currently loaded layers</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="n">QgsProject</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">layerTreeRoot</span><span class="p">()</span><span class="o">.</span><span class="n">children</span><span class="p">()</span>
        <span class="c1"># Clear the contents of the comboBox and lineEdit from previous runs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="c1"># Populate the comboBox with names of all the loaded layers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">])</span>
        
        <span class="c1"># show the dialog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="c1"># Run the dialog event loop</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="c1"># See if OK was pressed</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
          <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
          <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
            <span class="n">selectedLayerIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dlg</span><span class="o">.</span><span class="n">comboBox</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
            <span class="n">selectedLayer</span> <span class="o">=</span> <span class="n">layers</span><span class="p">[</span><span class="n">selectedLayerIndex</span><span class="p">]</span><span class="o">.</span><span class="n">layer</span><span class="p">()</span>
            <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">selectedLayer</span><span class="o">.</span><span class="n">fields</span><span class="p">()]</span>
            <span class="c1"># write header</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="c1"># write feature attributes</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">selectedLayer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">():</span>
              <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">name</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
              <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">messageBar</span><span class="p">()</span><span class="o">.</span><span class="n">pushMessage</span><span class="p">(</span>
            <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Output file written at &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">,</span>
            <span class="n">level</span><span class="o">=</span><span class="n">Qgis</span><span class="o">.</span><span class="n">Success</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>



<!-- Turn on comments on only newer tutorials having 3/ in URL -->

  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2025, Ujaval Gandhi.<br/>
      Last updated on сеп 02, 2025.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a>.<br>
  You are free to use the material for any purpose as long as you give appropriate credit to the original author.</p>
</div>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/building_a_python_plugin.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>