<!DOCTYPE html>

<html lang="sr" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Izrada dodatka za obradu (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=7e8936b6"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=552f857c"></script>
    <link rel="search" title="Претрага" href="../../search.html" />
    <link rel="next" title="Pokretanje i zakazivanje QGIS zadataka obrade" href="../running_qgis_jobs.html" />
    <link rel="prev" title="Kreiranje dodatka za Pajton (QGIS3)" href="building_a_python_plugin.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Uvod</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Pravljenje mape (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Rad sa atributima (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Uvoz tabela ili CSV datoteka (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Osnovno stilizovanje vektora (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Izračunavanje dužina linija i statistika (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Osnovno stilizovanje i analiza rastera (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Rastersko mozaičko kreiranje i isecanje (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Rad sa podacima o terenu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Rad sa WMS podacima (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Rad sa projekcijama (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciranje topografskih listova i skeniranih mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenciranje aerosnimaka (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitalizacija podataka mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Spajanje tabela (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Izvršavanje prostornih spajanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Izvršavanje prostornih upita (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analiza najbližeg suseda (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Uzorkovanje rasterskih podataka korišćenjem tačaka ili poligona (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Izračunavanje površine rastera (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Kreiranje toplotnih mapa (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animiranje podataka vremenskih serija (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Rukovanje nevažećim geometrijama (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Napredna rasterska analiza (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpoliranje podataka o tačkama (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Paketna obrada pomoću okvira za obradu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automatizacija složenih tokova rada pomoću Processing Modeler-a (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatizacija kreiranja mapa pomoću Atlasa za štampanje (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Analiza višekriterijumskog preklapanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Osnovno filtriranje i stilizovanje pomoću izraza (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Kreiranje mape sveta u bloku (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Stilizovanje rečne mreže pomoću izraza (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Stilizovanje kontura u 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometric_buildings.html">Kreiranje izometrijskih zgrada (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Izrada interaktivnih mapa na platnu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_reveal_maps.html">Izrada interaktivnih mapa otkrivanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Kreiranje animiranog kartograma (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Osnovna vizuelizacija i rutiranje mreže (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Lociranje najbližeg objekta pomoću matrice porekla i odredišta (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Analiza područja usluge korišćenjem Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Analiza vremena putovanja pomoću Uber kretanja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Izračunavanje srednje površinske količine padavina (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">Kreiranje karte rečnog sliva u boji (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">Kreiranje mape korišćenja zemljišta (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Izračunavanje gustine raskrsnica ulica (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">Određivanje zaštitnih zona korišćenja zemljišta (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">Mapiranje količina odloženog otpada (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Početak programiranja u Pajtonu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Pokretanje algoritama za obradu putem Pajtona (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Korišćenje prilagođenih Pajton izraznih funkcija (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Pisanje Pajton skripti za okvir za obradu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Kreiranje dodatka za Pajton (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Izrada dodatka za obradu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Pokretanje i zakazivanje QGIS zadataka obrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Veb mapiranje pomoću QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Kreiranje osnovnih mapa pomoću QTiles-a</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Korišćenje dodataka (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Pretraživanje i preuzimanje podataka OpenStreetMap-a</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">QGIS resursi za učenje</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Krediti za podatke</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Paketna obrada pomoću Processing Framework-a (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="building_a_python_plugin.html" title="Previous Chapter: Kreiranje dodatka za Pajton (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Kreiranje dod...</span>
    </a>
  </li>
  <li>
    <a href="../running_qgis_jobs.html" title="Next Chapter: Pokretanje i zakazivanje QGIS zadataka obrade"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Pokretanje i ... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p><a href="https://www.linkedin.com/in/spatialthoughts/"><img src="../../_static/ujaval.png">Ujaval Gandhi</a></p>

<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="building-a-processing-plugin-qgis3">
<h1>Izrada dodatka za obradu (QGIS3)<a class="headerlink" href="#building-a-processing-plugin-qgis3" title="Link to this heading">¶</a></h1>
<p>U prethodnom tutorijalu <a class="reference internal" href="building_a_python_plugin.html"><span class="doc">Kreiranje dodatka za Pajton (QGIS3)</span></a>, naučili ste kako da napravite Python dodatak - uključujući korisnički interfejs i prilagođenu logiku za obradu podataka. Iako su ove vrste dodataka korisne, teret dizajniranja korisničkog interfejsa stavljaju na autora dodatka. To rezultira time da svaki dodatak ima različite načine interakcije sa njim - što je zbunjujuće za korisnike. Takođe, obični dodaci ne interaguju sa drugim delovima QGIS-a. Na primer, ne možete koristiti funkcionalnost dodatka iz drugog algoritma. Ako je dodatak koji želite da napišete prvenstveno namenjen za analizu, a interakcija korisnika koju želite je ograničena na to da korisnik izabere ulaze i izlaze, postoji mnogo lakši i poželjniji način za pisanje dodataka koristeći Processing Framework. To uklanja potrebu da dizajnirate korisnički interfejs - pojednostavljujući proces. Ugrađena biblioteka za obradu kreira standardni interfejs za obradu u zavisnosti od vaših ulaza koji izgleda i ponaša se baš kao i svaki drugi algoritam za obradu u QGIS-u. Takođe se besprekorno integriše sa ostatkom Processing Framework-a - tako da se vaši algoritmi dodataka mogu koristiti u grupnoj obradi, grafičkom modeleru, pozivati iz Python konzole itd.</p>
<section id="overview-of-the-task">
<h2>Pregled zadatka<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>Ponovo ćemo implementirati jednostavan dodatak iz tutorijala <a class="reference internal" href="building_a_python_plugin.html"><span class="doc">Kreiranje dodatka za Pajton (QGIS3)</span></a> kao dodatak za obradu. To će rezultirati novim provajderom obrade pod nazivom <code class="docutils literal notranslate"><span class="pre">Sačuvaj</span> <span class="pre">atribute</span></code> i algoritmom <code class="docutils literal notranslate"><span class="pre">Sačuvaj</span> <span class="pre">atribute</span> <span class="pre">kao</span> <span class="pre">CSV</span></code> koji će omogućiti korisnicima da izaberu vektorski sloj i zapišu njegove atribute u CSV datoteku.</p>
</section>
<section id="get-the-tools">
<h2>Nabavite alate<a class="headerlink" href="#get-the-tools" title="Link to this heading">¶</a></h2>
<section id="a-text-editor-or-a-python-ide">
<h3>Uređivač teksta ili Pajton IDE<a class="headerlink" href="#a-text-editor-or-a-python-ide" title="Link to this heading">¶</a></h3>
<p>Bilo koja vrsta razvoja softvera zahteva dobar uređivač teksta. Ako već imate omiljeni uređivač teksta ili IDE (integrisano razvojno okruženje), možete ga koristiti za ovaj tutorijal. U suprotnom, svaka platforma nudi širok izbor besplatnih ili plaćenih opcija za uređivače teksta. Izaberite onaj koji odgovara vašim potrebama.</p>
<p>Ovaj tutorijal koristi Notepad++ editor na Windows-u.</p>
<p><strong>Windows</strong></p>
<p><a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> je dobar besplatni editor za Windows. Preuzmite i instalirajte <a class="reference external" href="https://notepad-plus-plus.org/download/">Notepad++ editor</a>.</p>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Ako koristite Notepad++, obavezno idite na <span class="menuselection">Settings ‣ Preferences ‣ Tab Settings</span> i omogućite <span class="guilabel">Replace by space</span>. Python je veoma osetljiv na razmake i ovo podešavanje će osigurati da se tabulatori i razmaci pravilno tretiraju.</p>
</div>
</section>
<section id="plugin-builder-plugin">
<h3>Dodatak za kreiranje dodataka<a class="headerlink" href="#plugin-builder-plugin" title="Link to this heading">¶</a></h3>
<p>Postoji koristan QGIS dodatak pod nazivom <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Builder</span></code> koji kreira sve potrebne datoteke i šablonski kod za dodatak. Pronađite i instalirajte dodatak <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Builder</span></code>. Pogledajte <a class="reference internal" href="../using_plugins.html"><span class="doc">Korišćenje dodataka</span></a> za više detalja o tome kako instalirati dodatke.</p>
</section>
<section id="plugins-reloader-plugin">
<h3>Dodaci Dodatak za ponovno učitavanje<a class="headerlink" href="#plugins-reloader-plugin" title="Link to this heading">¶</a></h3>
<p>Ovo je još jedan pomoćni dodatak koji omogućava iterativni razvoj dodataka. Koristeći ovaj dodatak, možete promeniti kod svog dodatka i on će se odraziti u QGIS-u bez potrebe da svaki put ponovo pokrećete QGIS. Pronađite i instalirajte dodatak <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Reloader</span></code>. Pogledajte <a class="reference internal" href="../using_plugins.html"><span class="doc">Korišćenje dodataka</span></a> za više detalja o tome kako instalirati dodatke.</p>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Plugin Reloader je eksperimentalni dodatak. Uverite se da ste označili <span class="guilabel">Prikaži i eksperimentalne dodatke</span> u podešavanjima <span class="guilabel">Plugin Manager</span> ako ga ne možete pronaći.</p>
</div>
</section>
</section>
<section id="procedure">
<h2>Procedura<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Otvorite QGIS. Idite na <span class="menuselection">Dodaci ‣ Konstruktor dodataka ‣ Konstruktor dodataka</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1144.png" class="align-center" src="../../_images/1144.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Videćete dijalog <span class="guilabel">QGIS Plugin Builder</span> sa formularom. Možete popuniti formular detaljima koji se odnose na naš dodatak. <span class="guilabel">Naziv klase</span> će biti naziv Pajton klase koja sadrži logiku dodatka. Ovo će takođe biti naziv fascikle koja sadrži sve datoteke dodatka. Unesite <code class="docutils literal notranslate"><span class="pre">SaveAttributes</span></code> kao naziv klase. <span class="guilabel">Naziv dodatka</span> je naziv pod kojim će se vaš dodatak pojaviti u <span class="guilabel">Plugin Manager</span>. Unesite naziv kao <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">(Processing)</span></code>. Dodajte opis u polje <span class="guilabel">Description</span>. <span class="guilabel">Naziv modula</span> će biti naziv glavne Pajton datoteke za dodatak. Unesite ga kao <code class="docutils literal notranslate"><span class="pre">save_attributes_processing</span></code>. Ostavite brojeve verzija kakvi jesu i unesite svoje ime i adresu e-pošte u odgovarajuća polja. Kliknite na <span class="guilabel">Dalje</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2123.png" class="align-center" src="../../_images/2123.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Unesite kratak opis dodatka za dijalog <span class="guilabel">O nama</span> i kliknite na <span class="guilabel">Dalje</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/359.png" class="align-center" src="../../_images/359.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Izaberite „Processing Provider“ iz selektora <span class="guilabel">Template</span>. Vrednost <span class="guilabel">Algorithm name</span> će biti način na koji će korisnici pronaći algoritam za obradu u Processing Toolox-u. Unesite je kao <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">as</span> <span class="pre">CSV</span></code>. Ostavite <span class="guilabel">Algorithm group</span> prazno. Unesite <span class="guilabel">Provider name</span> kao <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span></code>. Unesite opis u polje <span class="guilabel">Provider description</span>. Kliknite na <span class="guilabel">Next</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/433.png" class="align-center" src="../../_images/433.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Konstruktor dodataka će vas pitati koje vrste datoteka treba generisati. Zadržite podrazumevani izbor i kliknite na <span class="guilabel">Dalje</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/529.png" class="align-center" src="../../_images/529.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Pošto ne nameravamo da objavimo dodatak, možete ostaviti vrednosti <span class="guilabel">Praćenje grešaka</span>, <span class="guilabel">Repozitorijum</span> i <span class="guilabel">Početna stranica</span> na podrazumevane vrednosti. Označite polje <span class="guilabel">Označi dodatak kao eksperimentalni</span> na dnu i kliknite na <span class="guilabel">Sledeće</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/629.png" class="align-center" src="../../_images/629.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Biće vam zatraženo da izaberete direktorijum za vaš dodatak. Za sada, sačuvajte ga u direktorijum koji možete lako pronaći na računaru i kliknite na <span class="guilabel">Generiši</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/728.png" class="align-center" src="../../_images/728.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Zatim, pritisnite dugme <span class="guilabel">generate</span>. Videćete dijalog za potvrdu kada vaš šablon dodatka bude kreiran.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/828.png" class="align-center" src="../../_images/828.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Možda ćete dobiti poruku koja kaže da pyrcc5 nije pronađen u putanji. Možete ignorisati ovu poruku.</p>
</div>
<ol class="arabic simple" start="9">
<li><p>Dodaci u QGIS-u se čuvaju u posebnoj fascikli. Moramo da kopiramo naš direktorijum dodataka u tu fasciklu pre nego što se može koristiti. U QGIS-u, pronađite trenutnu fasciklu profila tako što ćete otići na <span class="menuselection">Podešavanja ‣ Korisnički profili ‣ Otvori fasciklu aktivnog profila</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/928.png" class="align-center" src="../../_images/928.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>U folderu profila, kopirajte folder sa dodatkom u podfolder <span class="menuselection">python ‣ plugins</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1036.png" class="align-center" src="../../_images/1036.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Sada smo spremni da prvi put pogledamo potpuno novi dodatak koji smo kreirali. Zatvorite QGIS i ponovo ga pokrenite. Idite na <span class="menuselection">Dodaci ‣ Upravljanje i instaliranje dodataka</span> i omogućite dodatak <code class="docutils literal notranslate"><span class="pre">Sačuvaj</span> <span class="pre">atribute</span> <span class="pre">(Obrada)</span></code> na kartici <span class="guilabel">Instalirano</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1145.png" class="align-center" src="../../_images/1145.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Idite na <span class="menuselection">Processing ‣ Toolbox</span>. Primetićete da se na dnu nalazi novi provajder pod nazivom <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span></code>. Proširite ga da biste pronašli algoritam pod nazivom <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">as</span> <span class="pre">CSV</span></code>. Dvaput kliknite da biste ga pokrenuli.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1237.png" class="align-center" src="../../_images/1237.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>Primetićete poznati dijalog algoritma za obradu sa padajućim menijem za ulazni sloj i selektorom za izlazni sloj. Sada ćemo prilagoditi ovaj dijalog našim potrebama. Zatvorite ovaj dijalog.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1335.png" class="align-center" src="../../_images/1335.png" />
</div></blockquote>
<ol class="arabic" start="14">
<li><p>Idite u direktorijum dodatka i učitajte datoteku <code class="docutils literal notranslate"><span class="pre">save_attributes_processing_algorithm.py</span></code> u uređivaču teksta. Za naš dodatak, uzimamo vektorski sloj kao ulaz i ispisujemo CSV datoteku kao izlaz. Dakle, umesto uvoza <code class="docutils literal notranslate"><span class="pre">QgsProcessingParameterFeatureSink</span></code> kao izlaza - što je za vektorski sloj - dodajte <code class="docutils literal notranslate"><span class="pre">QgsProcessingParameterFileDestination</span></code> što je za datoteku.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="p">(</span><span class="n">QgsProcessing</span><span class="p">,</span>
                 <span class="n">QgsFeatureSink</span><span class="p">,</span>
                 <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span>
                 <span class="n">QgsProcessingParameterFeatureSource</span><span class="p">,</span>
                 <span class="n">QgsProcessingParameterFileDestination</span><span class="p">)</span>
</pre></div>
</div>
<p>Zatim, pomerite se nadole i definišite izlazni parametar pod metodom <code class="docutils literal notranslate"><span class="pre">initAlgorithm()</span></code> pomoću sledećeg koda.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span>
      <span class="n">QgsProcessingParameterFileDestination</span><span class="p">(</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">&#39;Output File&#39;</span><span class="p">),</span>
          <span class="s1">&#39;CSV files (*.csv)&#39;</span><span class="p">,</span>
      <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/14a.png" class="align-center" src="../../_images/14a.png" />
<img alt="../../_images/14b.png" class="align-center" src="../../_images/14b.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>Hajde da ponovo učitamo naš dodatak kako bismo mogli da vidimo promene u dijaloškom prozoru. Idite na <span class="menuselection">Dodatak ‣ Program za ponovno učitavanje dodataka ‣ Izaberite dodatak koji treba ponovo učitati</span>. Izaberite <code class="docutils literal notranslate"><span class="pre">save_attributes_processing</span></code> u dijaloškom prozoru <span class="guilabel">Konfiguriši program za ponovno učitavanje dodataka</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1528.png" class="align-center" src="../../_images/1528.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>Kliknite na dugme <span class="guilabel">Ponovo učitaj dodatak</span> da biste učitali najnoviju verziju dodatka. Da bismo testirali ovu novu funkcionalnost, moramo učitati neke slojeve u QGIS. Nakon što ste učitali neke slojeve, pokrenite algoritam <span class="menuselection">Sačuvaj atribute –<span class="accelerator">g</span>t; Sačuvaj atribute kao CSV</span>. Videćete da je izlaz promenjen u datoteku umesto u sloj.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1626.png" class="align-center" src="../../_images/1626.png" />
</div></blockquote>
<ol class="arabic" start="17">
<li><p>Dodajmo malo logike algoritmu koji uzima izabrani vektorski sloj i zapisuje atribute u CSV datoteku. Objašnjenje za ovaj kod može se naći u <a class="reference internal" href="getting_started_with_pyqgis.html"><span class="doc">Početak programiranja u Pajtonu (QGIS3)</span></a>. Značajna razlika ovde je brojač koji pomaže u prikazivanju napretka obrade. Dodajte sledeći kod u metod <code class="docutils literal notranslate"><span class="pre">processAlgorithm</span></code> i sačuvajte datoteku.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Here is where the processing itself takes place.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsSource</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
  <span class="n">csv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsFileOutput</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

  <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">fields</span><span class="p">()]</span>

  <span class="c1"># Compute the number of steps to display within the progress bar and</span>
  <span class="c1"># get features from source</span>
  <span class="n">total</span> <span class="o">=</span> <span class="mf">100.0</span> <span class="o">/</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
  <span class="n">features</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span>

  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
    <span class="c1"># write header</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">current</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">features</span><span class="p">):</span>
        <span class="c1"># Stop the algorithm if cancel button has been clicked</span>
        <span class="k">if</span> <span class="n">feedback</span><span class="o">.</span><span class="n">isCanceled</span><span class="p">():</span>
            <span class="k">break</span>

        <span class="c1"># Add a feature in the sink</span>
        <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">name</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="c1"># Update the progress bar</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">setProgress</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">current</span> <span class="o">*</span> <span class="n">total</span><span class="p">))</span>

  <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">csv</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1728.png" class="align-center" src="../../_images/1728.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Nazad u glavnom prozoru QGIS-a, ponovo učitajte dodatak klikom na dugme <span class="guilabel">Ponovo učitaj dodatak</span>. Pokrenite algoritam <span class="menuselection">Sačuvaj atribute ‣ Sačuvaj atribute kao CSV</span>. Izaberite sloj za <span class="guilabel">Ulazni sloj</span>. Zatim, kliknite na dugme <span class="guilabel">…</span> pored <span class="guilabel">Izlazna datoteka</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1824.png" class="align-center" src="../../_images/1824.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>Nazovite izlaznu datoteku „test.csv“ i kliknite na <span class="guilabel">Pokreni</span>. Algoritam će se pokrenuti i proizvesti CSV datoteku na izabranoj lokaciji.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1920.png" class="align-center" src="../../_images/1920.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>Kao što je ranije pomenuto, iako ovaj algoritam dolazi iz dodatka, on se veoma dobro integriše sa ugrađenim alatima za obradu. Da bismo ovo demonstrirali, pokrenimo ovaj algoritam koristeći ugrađeni interfejs za paketnu obradu. Kliknite desnim tasterom miša na algoritam i izaberite <span class="guilabel">Izvrši kao paketnu obradu..</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2019.png" class="align-center" src="../../_images/2019.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>Možete odabrati više unosa i pokrenuti ovaj algoritam u seriji da biste proizveli više CSV datoteka u jednom pokretanju. Ako niste upoznati sa interfejsom za serijske obrade, pogledajte <a class="reference internal" href="batch_processing.html"><span class="doc">Paketna obrada pomoću okvira za obradu (QGIS3)</span></a> za uputstva korak po korak.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2124.png" class="align-center" src="../../_images/2124.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>Dodatak je spreman i možete ga isporučiti u trenutnom obliku. Ali možemo poboljšati korisničko iskustvo tako što ćemo učiniti da se dodatak za obradu ponaša kao običan dodatak. Koristeći hibridni pristup opisan u nastavku, možete dodati stavku menija i dugme na traci sa alatkama. Na ovaj način, korisnicima dajete lakši način da otkriju i pokrenu alate koji su instalirani kao deo dodatka. Biće nam potrebna ikona za dodatak. Preuzmite <a class="reference external" href="https://www.qgistutorials.com/downloads/logo.png">logo.png</a> i kopirajte ga u direktorijum dodataka.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2220.png" class="align-center" src="../../_images/2220.png" />
</div></blockquote>
<ol class="arabic" start="23">
<li><p>Otvorite datoteku <code class="docutils literal notranslate"><span class="pre">save_attributes_processing.py</span></code>. Dodajte sledeće importovane datoteke na vrh datoteke.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qgis.PyQt.QtWidgets</span> <span class="kn">import</span> <span class="n">QAction</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span> <span class="n">QgsApplication</span>
<span class="kn">import</span> <span class="nn">processing</span>
</pre></div>
</div>
<p>Pomerite se nadole i izmenite metod <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> da biste inicijalizovali iface.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="p">):</span>
 <span class="bp">self</span><span class="o">.</span><span class="n">provider</span> <span class="o">=</span> <span class="kc">None</span>
 <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span>
</pre></div>
</div>
<p>Pomerite se dalje nadole i pronađite metodu „initGui“. Ona sadrži samo kod za inicijalizaciju provajdera obrade. Dodaćemo kod za dodavanje dugmeta na traci sa alatkama i stavke menija. Takođe ćemo morati da dodamo kod metodi „unload“ da bismo uklonili ove elemente kada se dodatak ukloni.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">initGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">initProcessing</span><span class="p">()</span>

  <span class="n">icon</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">))</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span>
      <span class="n">QIcon</span><span class="p">(</span><span class="n">icon</span><span class="p">),</span>
      <span class="sa">u</span><span class="s2">&quot;Save Attributes as CSV&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;&amp;SaveAttributes&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">removeProvider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removePluginMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;&amp;SaveAttributes&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removeToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
</pre></div>
</div>
<p>Povezali smo dugme i stavku menija da bismo pokrenuli metodu „run“ kada se klikne na nju. Dodajte novu metodu na dnu koja koristi pomoćnu metodu „execAlgorithmDialog“ za pokretanje algoritma za obradu.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">processing</span><span class="o">.</span><span class="n">execAlgorithmDialog</span><span class="p">(</span><span class="s2">&quot;Save Attributes:Save Attributes as CSV&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/23a1.png" class="align-center" src="../../_images/23a1.png" />
<img alt="../../_images/23b1.png" class="align-center" src="../../_images/23b1.png" />
<img alt="../../_images/23c.png" class="align-center" src="../../_images/23c.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>Zatim, potrebna nam je manja ispravka datoteke <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> u direktorijumu dodatka. Otvorite datoteku i dodajte <code class="docutils literal notranslate"><span class="pre">iface</span></code> u naredbu za vraćanje, tako da se referenca na QGIS interfejs prosledi dodatku.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2417.png" class="align-center" src="../../_images/2417.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>Nazad u glavnom prozoru QGIS-a, ponovo učitajte dodatak klikom na dugme <span class="guilabel">Ponovo učitaj dodatak</span>. Videćete novu ikonu na traci sa alatkama i stavku menija pod <span class="menuselection">Dodaci ‣ Sačuvaj atribute ‣ Sačuvaj atribute kao CSV</span>. Možete kliknuti na njih da biste pokrenuli algoritam <code class="docutils literal notranslate"><span class="pre">Sačuvaj</span> <span class="pre">atribute</span> <span class="pre">kao</span> <span class="pre">CSV</span></code>. Primetićete da provajder obrade i algoritam na traci sa alatkama i dalje imaju podrazumevane ikone. Hajde da to popravimo.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2516.png" class="align-center" src="../../_images/2516.png" />
</div></blockquote>
<ol class="arabic" start="26">
<li><p>Otvorite datoteku <code class="docutils literal notranslate"><span class="pre">save_attributes_processing_provider.py</span></code> iz direktorijuma dodatka. Dodajte uvoze na vrh na sledeći način.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>
</pre></div>
</div>
<p>Izmenite metod „icon“ na sledeći način da biste dodali prilagođenu ikonu.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">icon</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/26a.png" class="align-center" src="../../_images/26a.png" />
<img alt="../../_images/26b.png" class="align-center" src="../../_images/26b.png" />
</div></blockquote>
<ol class="arabic" start="27">
<li><p>Zatim, otvorite datoteku <code class="docutils literal notranslate"><span class="pre">save_attributes_processing_algorithm.py</span></code>. Dodajte uvoz na vrhu na sledeći način.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>
</pre></div>
</div>
<p>Dodajte novu metodu „ikona“ pomoću sledećeg koda.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">icon</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/27a.png" class="align-center" src="../../_images/27a.png" />
<img alt="../../_images/27b.png" class="align-center" src="../../_images/27b.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>Ponovo učitajte dodatak i videćete da i provajder i algoritam imaju našu prilagođenu ikonu.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2816.png" class="align-center" src="../../_images/2816.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>Možete da arhivirate direktorijum dodataka i delite ga sa svojim korisnicima. Oni mogu da raspakuju sadržaj u svoj direktorijum dodataka i isprobaju vaš dodatak. Ako je ovo pravi dodatak, otpremili biste ga u <a class="reference external" href="https://plugins.qgis.org/">QGIS repozitorijum dodataka</a> kako bi svi QGIS korisnici mogli da pronađu i preuzmu vaš dodatak.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Белешка</p>
<p>Ovaj dodatak je samo u demonstracione svrhe. Nemojte objavljivati ovaj dodatak niti ga otpremati u repozitorijum dodataka QGIS-a.</p>
</div>
<p>Ispod je kompletan izvorni fajl kao referenca.</p>
<p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd"> This script initializes the plugin, making it known to QGIS.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Ujaval Gandhi&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">&#39;2019-09-18&#39;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">&#39;(C) 2019 by Ujaval Gandhi&#39;</span>


<span class="c1"># noinspection PyPep8Naming</span>
<span class="k">def</span> <span class="nf">classFactory</span><span class="p">(</span><span class="n">iface</span><span class="p">):</span>  <span class="c1"># pylint: disable=invalid-name</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load SaveAttributes class from file SaveAttributes.</span>

<span class="sd">    :param iface: A QGIS interface instance.</span>
<span class="sd">    :type iface: QgsInterface</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#</span>
    <span class="kn">from</span> <span class="nn">.save_attributes_processing</span> <span class="kn">import</span> <span class="n">SaveAttributesPlugin</span>
    <span class="k">return</span> <span class="n">SaveAttributesPlugin</span><span class="p">(</span><span class="n">iface</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">save_attributes_processing.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Ujaval Gandhi&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">&#39;2019-09-18&#39;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">&#39;(C) 2019 by Ujaval Gandhi&#39;</span>

<span class="c1"># This will get replaced with a git SHA1 when you do a git archive</span>

<span class="n">__revision__</span> <span class="o">=</span> <span class="s1">&#39;$Format:%H$&#39;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="kn">from</span> <span class="nn">qgis.PyQt.QtWidgets</span> <span class="kn">import</span> <span class="n">QAction</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span> <span class="n">QgsApplication</span>
<span class="kn">import</span> <span class="nn">processing</span>
<span class="kn">from</span> <span class="nn">.save_attributes_processing_provider</span> <span class="kn">import</span> <span class="n">SaveAttributesProvider</span>

<span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">if</span> <span class="n">cmd_folder</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">cmd_folder</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SaveAttributesPlugin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">provider</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span>

    <span class="k">def</span> <span class="nf">initProcessing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Init Processing provider for QGIS &gt;= 3.8.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">provider</span> <span class="o">=</span> <span class="n">SaveAttributesProvider</span><span class="p">()</span>
        <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">addProvider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">initGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initProcessing</span><span class="p">()</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span>
            <span class="n">QIcon</span><span class="p">(</span><span class="n">icon</span><span class="p">),</span>
            <span class="sa">u</span><span class="s2">&quot;Save Attributes as CSV&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;&amp;SaveAttributes&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">removeProvider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removePluginMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;&amp;SaveAttributes&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removeToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">processing</span><span class="o">.</span><span class="n">execAlgorithmDialog</span><span class="p">(</span><span class="s2">&quot;Save Attributes:Save Attributes as CSV&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">save_attributes_processing_algorithm.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Ujaval Gandhi&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">&#39;2019-09-18&#39;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">&#39;(C) 2019 by Ujaval Gandhi&#39;</span>

<span class="c1"># This will get replaced with a git SHA1 when you do a git archive</span>

<span class="n">__revision__</span> <span class="o">=</span> <span class="s1">&#39;$Format:%H$&#39;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.PyQt.QtCore</span> <span class="kn">import</span> <span class="n">QCoreApplication</span>
<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="p">(</span><span class="n">QgsProcessing</span><span class="p">,</span>
                       <span class="n">QgsFeatureSink</span><span class="p">,</span>
                       <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span>
                       <span class="n">QgsProcessingParameterFeatureSource</span><span class="p">,</span>
                       <span class="n">QgsProcessingParameterFileDestination</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SaveAttributesAlgorithm</span><span class="p">(</span><span class="n">QgsProcessingAlgorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is an example algorithm that takes a vector layer and</span>
<span class="sd">    creates a new identical one.</span>

<span class="sd">    It is meant to be used as an example of how to create your own</span>
<span class="sd">    algorithms and explain methods and variables used to do it. An</span>
<span class="sd">    algorithm like this will be available in all elements, and there</span>
<span class="sd">    is not need for additional work.</span>

<span class="sd">    All Processing algorithms should extend the QgsProcessingAlgorithm</span>
<span class="sd">    class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Constants used to refer to parameters and outputs. They will be</span>
    <span class="c1"># used when calling the algorithm from another algorithm, or when</span>
    <span class="c1"># calling from the QGIS console.</span>

    <span class="n">OUTPUT</span> <span class="o">=</span> <span class="s1">&#39;OUTPUT&#39;</span>
    <span class="n">INPUT</span> <span class="o">=</span> <span class="s1">&#39;INPUT&#39;</span>

    <span class="k">def</span> <span class="nf">initAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Here we define the inputs and output of the algorithm, along</span>
<span class="sd">        with some other properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># We add the input vector features source. It can have any kind of</span>
        <span class="c1"># geometry.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span>
            <span class="n">QgsProcessingParameterFeatureSource</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">&#39;Input layer&#39;</span><span class="p">),</span>
                <span class="p">[</span><span class="n">QgsProcessing</span><span class="o">.</span><span class="n">TypeVectorAnyGeometry</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># We add a file output of type CSV.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span>
            <span class="n">QgsProcessingParameterFileDestination</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">&#39;Output File&#39;</span><span class="p">),</span>
                <span class="s1">&#39;CSV files (*.csv)&#39;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">processAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Here is where the processing itself takes place.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsSource</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">csv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsFileOutput</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">fields</span><span class="p">()]</span>

        <span class="c1"># Compute the number of steps to display within the progress bar and</span>
        <span class="c1"># get features from source</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mf">100.0</span> <span class="o">/</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
          <span class="c1"># write header</span>
          <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
          <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
          <span class="k">for</span> <span class="n">current</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">features</span><span class="p">):</span>
              <span class="c1"># Stop the algorithm if cancel button has been clicked</span>
              <span class="k">if</span> <span class="n">feedback</span><span class="o">.</span><span class="n">isCanceled</span><span class="p">():</span>
                  <span class="k">break</span>

              <span class="c1"># Add a feature in the sink</span>
              <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">name</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
              <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

              <span class="c1"># Update the progress bar</span>
              <span class="n">feedback</span><span class="o">.</span><span class="n">setProgress</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">current</span> <span class="o">*</span> <span class="n">total</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">csv</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the algorithm name, used for identifying the algorithm. This</span>
<span class="sd">        string should be fixed for the algorithm, and must not be localised.</span>
<span class="sd">        The name should be unique within each provider. Names should contain</span>
<span class="sd">        lowercase alphanumeric characters only and no spaces or other</span>
<span class="sd">        formatting characters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;Save Attributes as CSV&#39;</span>

    <span class="k">def</span> <span class="nf">displayName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the translated algorithm name, which should be used for any</span>
<span class="sd">        user-visible display of the algorithm name.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the name of the group this algorithm belongs to. This string</span>
<span class="sd">        should be localised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupId</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">groupId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unique ID of the group this algorithm belongs to. This</span>
<span class="sd">        string should be fixed for the algorithm, and must not be localised.</span>
<span class="sd">        The group id should be unique within each provider. Group id should</span>
<span class="sd">        contain lowercase alphanumeric characters only and no spaces or other</span>
<span class="sd">        formatting characters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">tr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s1">&#39;Processing&#39;</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Should return a QIcon which is used for your provider inside</span>
<span class="sd">        the Processing toolbox.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">icon</span>
        
    <span class="k">def</span> <span class="nf">createInstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SaveAttributesAlgorithm</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">save_attributes_processing_provider.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Ujaval Gandhi&#39;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">&#39;2019-09-18&#39;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">&#39;(C) 2019 by Ujaval Gandhi&#39;</span>

<span class="c1"># This will get replaced with a git SHA1 when you do a git archive</span>

<span class="n">__revision__</span> <span class="o">=</span> <span class="s1">&#39;$Format:%H$&#39;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProcessingProvider</span>
<span class="kn">from</span> <span class="nn">.save_attributes_processing_algorithm</span> <span class="kn">import</span> <span class="n">SaveAttributesAlgorithm</span>


<span class="k">class</span> <span class="nc">SaveAttributesProvider</span><span class="p">(</span><span class="n">QgsProcessingProvider</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Default constructor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QgsProcessingProvider</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unloads the provider. Any tear-down steps required by the provider</span>
<span class="sd">        should be implemented here.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">loadAlgorithms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads all algorithms belonging to this provider.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addAlgorithm</span><span class="p">(</span><span class="n">SaveAttributesAlgorithm</span><span class="p">())</span>
        <span class="c1"># add additional algorithms here</span>
        <span class="c1"># self.addAlgorithm(MyOtherAlgorithm())</span>

    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the unique provider id, used for identifying the provider. This</span>
<span class="sd">        string should be a unique, short, character only string, eg &quot;qgis&quot; or</span>
<span class="sd">        &quot;gdal&quot;. This string should not be localised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;Save Attributes&#39;</span>

    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the provider name, which is used to describe the provider</span>
<span class="sd">        within the GUI.</span>

<span class="sd">        This string should be short (e.g. &quot;Lastools&quot;) and localised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">&#39;Save Attributes&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Should return a QIcon which is used for your provider inside</span>
<span class="sd">        the Processing toolbox.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">&#39;logo.png&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">icon</span>

    <span class="k">def</span> <span class="nf">longName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the a longer version of the provider name, which can include</span>
<span class="sd">        extra details such as version numbers. E.g. &quot;Lastools LIDAR tools</span>
<span class="sd">        (version 2.2.1)&quot;. This string should be localised. The default</span>
<span class="sd">        implementation returns the same string as name().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>



<!-- Turn on comments on only newer tutorials having 3/ in URL -->

  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2025, Ujaval Gandhi.<br/>
      Last updated on сеп 04, 2025.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a>.<br>
  You are free to use the material for any purpose as long as you give appropriate credit to the original author.</p>
</div>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/processing_python_plugin.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>