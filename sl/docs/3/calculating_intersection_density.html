<!DOCTYPE html>

<html lang="sl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Calculating Street Intersection Density (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="search" title="Išči" href="../../search.html" />
    <link rel="next" title="Batch Processing using Processing Framework (QGIS3)" href="batch_processing.html" />
    <link rel="prev" title="Interpolating Point Data (QGIS3)" href="interpolating_point_data.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/logo.png"></span>
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Uvod</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Ustvarjanje karte (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Delo z atributi (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Uvoz podatkov preglednic ali datotek CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Osnovno oblikovanje vektorskih slojev (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Izračunavanje dolžin in statistike linij (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Osnovne analize in prikazi rastrov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mozaičenje in obrezovanje rastrov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Delo s podatki o reliefu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Delo s podatki prek vmesnika WMS (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Delo s projekcijami (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciranje skeniranih topografskih kart (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferencing Aerial Imagery (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitalizacija podatkov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Združevanje tabel (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Prostorsko združevanje podatkov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Izvajanje prostorskih poizvedb (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analiza najbližjih sosedov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Vzorčenje rastrskih podatkov z uporabo točk ali poligonov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Izračun površine rastra (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Ustvarjanje kart zgostitev (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Prikazovanje podatkov časovnih vrst (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Ravnanje z neveljavnimi geometrijami (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Advanced Raster Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Uporaba vtičnikov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Iskanje in prenos podatkov OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Učni viri QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Data Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="interpolating_point_data.html" title="Previous Chapter: Interpolating Point Data (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Interpolating...</span>
    </a>
  </li>
  <li>
    <a href="batch_processing.html" title="Next Chapter: Batch Processing using Processing Framework (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Batch Process... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>


<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="fa">Persian</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="calculating-street-intersection-density-qgis3">
<h1>Calculating Street Intersection Density (QGIS3)<a class="headerlink" href="#calculating-street-intersection-density-qgis3" title="Povezava na naslov">¶</a></h1>
<p>Street intersection density is a useful measure of network connectivity. One can extract and aggregate street intersections over a regular grid to calculate the density. This analysis is commonly used in transportation design as well as urban planning to determine walkability of neighborhoods. With the availability of global street network dataset from OpenStreetMap and QGIS, we can easily calculate and visualize intersection density for any region of the world.</p>
<section id="overview-of-the-task">
<h2>Overview of the task<a class="headerlink" href="#overview-of-the-task" title="Povezava na naslov">¶</a></h2>
<p>In this tutorial, we will take OpenStreetMap road network data and calculate the street intersection density for the city of Chennai in India.</p>
<section id="other-skills-you-will-learn">
<h3>Other skills you will learn<a class="headerlink" href="#other-skills-you-will-learn" title="Povezava na naslov">¶</a></h3>
<ul class="simple">
<li><p>How to download OpenStreetMap data as shapefiles and clip it to your area of interest.</p></li>
<li><p>How to create grids in QGIS.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Get the data<a class="headerlink" href="#get-the-data" title="Povezava na naslov">¶</a></h2>
<p>We will use the data from <a class="reference external" href="https://opencity.in/">opencities</a> to get the city boundary for Chennai and, then the road network data from <a class="reference external" href="https://download.geofabrik.de/">OpenStreetMap Data Extracts</a> for India.</p>
<section id="download-the-city-boundary">
<h3>Download the City Boundary<a class="headerlink" href="#download-the-city-boundary" title="Povezava na naslov">¶</a></h3>
<ol class="arabic simple">
<li><p>Visit the <a class="reference external" href="https://opencity.in/">opencity</a> website, then search for “Chennai wards map”.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data12.png" class="align-center" src="../../_images/data12.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Click on the first link and download the data in KML format. A layer <code class="docutils literal notranslate"><span class="pre">Chennai-wards-2011.kml</span></code> will be downloaded.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data21.png" class="align-center" src="../../_images/data21.png" />
</div></blockquote>
</section>
<section id="download-the-road-network">
<h3>Download the Road Network<a class="headerlink" href="#download-the-road-network" title="Povezava na naslov">¶</a></h3>
<ol class="arabic simple">
<li><p>Visit the <a class="reference external" href="https://download.geofabrik.de/">OpenStreetMap Data Extracts download</a> server by GEOFABRIK. For this tutorial, we need the data for the city of Chennai in India. Click <span class="guilabel">Asia</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data31.png" class="align-center" src="../../_images/data31.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Now in <span class="guilabel">sub-regions</span>, select <span class="guilabel">India</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data41.png" class="align-center" src="../../_images/data41.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>The <code class="docutils literal notranslate"><span class="pre">india-latest-free.shp.zip</span></code> is the file we are looking for click it to download, this data can be downloaded in other formats also as per requirement.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data51.png" class="align-center" src="../../_images/data51.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>This is a large download containing an extract of data for the entire country. Unzip the <code class="docutils literal notranslate"><span class="pre">india-latest-free.shp.zip</span></code>. You will get many shapefile layers.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data61.png" class="align-center" src="../../_images/data61.png" />
</div></blockquote>
</section>
<section id="clip-the-road-network-to-the-city-boundary">
<h3>Clip the Road Network to the City Boundary<a class="headerlink" href="#clip-the-road-network-to-the-city-boundary" title="Povezava na naslov">¶</a></h3>
<ol class="arabic simple">
<li><p>We will now clip the country-level roads layer to our area of interest. Open QGIS, and drag and drop the <code class="docutils literal notranslate"><span class="pre">Chennai-wards-2011.kml</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data71.png" class="align-center" src="../../_images/data71.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Instead of opening a large layer in QGIS, we can directly read it from the disk and clip it. Open the Processing Toolbox and locate the <span class="menuselection">Vector overlay ‣ Clip</span> algorithm. Double-click to open it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data8.png" class="align-center" src="../../_images/data8.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>In the <span class="guilabel">Input layer</span> select the <code class="docutils literal notranslate"><span class="pre">…</span></code> and click on <span class="guilabel">Browse for Layer…</span></p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data9.png" class="align-center" src="../../_images/data9.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Navigate to the directory where you downloaded the OpenStreetMap data and select <code class="docutils literal notranslate"><span class="pre">gis_osm_roads_free_1.shp</span></code>. In the <span class="guilabel">Overlay layer</span> choose  <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">Wards</span> <span class="pre">from</span> <span class="pre">Oct</span> <span class="pre">2011</span></code>. Then click  <code class="docutils literal notranslate"><span class="pre">…</span></code> in <span class="guilabel">Clipped</span> and select <span class="guilabel">Save to File…</span>, browse to a folder where you want to save the results, enter the name as <code class="docutils literal notranslate"><span class="pre">chennai_roads.gpkg</span></code>, and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data10.png" class="align-center" src="../../_images/data10.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Once the processing finishes, a new layer <code class="docutils literal notranslate"><span class="pre">chennai_roads</span></code> will be loaded in the canvas.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data111.png" class="align-center" src="../../_images/data111.png" />
</div></blockquote>
<p>For convenience, you may directly download a copy of the clipped dataset from the link below:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.qgistutorials.com/downloads/Chennai_Wards_2011.kml">chennai_wards_2011.kml</a></p></li>
<li><p><a class="reference external" href="https://www.qgistutorials.com/downloads/chennai_roads.gpkg">chennai_roads.gpkg</a></p></li>
</ul>
<p>Data source: <a class="reference internal" href="../credits.html#opencities" id="id1"><span>[OPENCITIES]</span></a> <a class="reference internal" href="../credits.html#geofabrik" id="id2"><span>[GEOFABRIK]</span></a></p>
</section>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Povezava na naslov">¶</a></h2>
<ol class="arabic simple">
<li><p>Now both layers used for the calculation will be available, if you have downloaded the data, then locate the <code class="docutils literal notranslate"><span class="pre">Chennai-Wards-2011.kml</span></code> and <code class="docutils literal notranslate"><span class="pre">chennai_roads.gpkg</span></code> in <span class="guilabel">Browser</span>, then drag and drop them on the canvas.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image1.png" class="align-center" src="../../_images/image1.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>The first task is to extract the road intersections. This can be done using the built-in Line intersections tool. Let’s test this on a small subset first to see if the results are satisfactory. Select the roads layer, and use the <span class="guilabel">Select features by Area</span> tool to draw a rectangle and select a few roads.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image2.png" class="align-center" src="../../_images/image2.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Open the Processing Toolbox and locate the <span class="menuselection">Vector overlay ‣ Line intersections</span> algorithm. Double-click to open it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image3.png" class="align-center" src="../../_images/image3.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">chennai_roads</span></code> as both <span class="guilabel">Input layer</span> and <span class="guilabel">Intersect layer</span>. Make sure to check the <span class="guilabel">Selected features only</span>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image4.png" class="align-center" src="../../_images/image4.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>A new layer <code class="docutils literal notranslate"><span class="pre">Intersections</span></code> will be added. You will notice that while most intersection points are correct, there are some false positives. This is because the algorithm considers intersections of each line segment as a valid intersection. But for our analysis, we need to extract only the intersections when 2 or more streets intersect.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image5.png" class="align-center" src="../../_images/image5.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>Remove the Intersections layer and click <span class="guilabel">Deselect features from all layers</span> button to remove the selection. We will now merge all adjacent road segments, so the segments between intersections are merged into a single feature. Open the Processing Toolbox and locate the <span class="menuselection">Vector geometry ‣ Dissolve</span> algorithm. Double-click to open it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image6.png" class="align-center" src="../../_images/image6.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">chennai_roads</span></code> as the <span class="guilabel">Input layer</span>. Enter the Dissolved output layer name as <code class="docutils literal notranslate"><span class="pre">roads_dissolved.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image7.png" class="align-center" src="../../_images/image7.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>The resulting layer <code class="docutils literal notranslate"><span class="pre">roads_dissolved</span></code> has all the road segments merged into a single feature.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image8.png" class="align-center" src="../../_images/image8.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>Next, open the Processing Toolbox and locate <span class="menuselection">Vector geometry ‣ Multipart to single parts</span> algorithm. Double-click to open it. Select <code class="docutils literal notranslate"><span class="pre">roads_dissolved</span></code> layer as the <span class="guilabel">Input layer</span>. Enter <code class="docutils literal notranslate"><span class="pre">roads_singleparts.gpkg</span></code> as the Single parts output. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image9.png" class="align-center" src="../../_images/image9.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>The resulting layer <code class="docutils literal notranslate"><span class="pre">roads_singleparts</span></code> will have all adjacent segments merged, remove the <code class="docutils literal notranslate"><span class="pre">roads_dissolved</span></code> and <code class="docutils literal notranslate"><span class="pre">chennai_roads</span></code> layers. Now, open the Processing Toolbox and locate the <span class="menuselection">Vector overlay ‣ Line intersections</span> algorithm. Double-click to launch it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image10.png" class="align-center" src="../../_images/image10.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">roads_singleparts</span></code> as both the <span class="guilabel">Input layer</span> and the <span class="guilabel">Intersect layer</span>. Name the <span class="guilabel">Intersections</span> output layer as <code class="docutils literal notranslate"><span class="pre">roads_line_intersections.gpkg</span></code>. Click Run.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image11.png" class="align-center" src="../../_images/image11.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Opomba</p>
<p>This is a computationally intensive operation and may take a long time depending on your computer processing capacity.</p>
</div>
<ol class="arabic simple" start="12">
<li><p>The resulting layer <code class="docutils literal notranslate"><span class="pre">roads_line_intersections</span></code> now has all intersections correctly identified. But it is still not perfect. Use the <span class="guilabel">Select features by Area tool</span> and select any intersection. You will see that at each intersection there are few duplicate points from adjacent segments. If we use this layer for further analysis, it will result in an inflated number of intersections. Let’s remove duplicates, open the Processing Toolbox and locate the <span class="menuselection">Vector general ‣ Delete duplicate geometries</span> algorithm. Select <code class="docutils literal notranslate"><span class="pre">roads_line_intersections</span></code> as the <span class="guilabel">Input layer</span> and enter <code class="docutils literal notranslate"><span class="pre">road_intersections.gpkg</span></code> as the <span class="guilabel">Cleaned</span> output layer. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image12.png" class="align-center" src="../../_images/image12.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>The new <code class="docutils literal notranslate"><span class="pre">road_intersections</span></code> layer has the correct number of road intersections extracted from the source layer. Right-click the old <code class="docutils literal notranslate"><span class="pre">road_line_intersections</span></code> layer and select <span class="guilabel">Remove layer</span> to remove it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image13.png" class="align-center" src="../../_images/image13.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>We will now compute the density of points by overlaying a regular grid and counting points in each grid polygon. We must reproject the data to a projected CRS so we can use linear units of measurements. We can use an appropriate CRS based on the UTM zone where the city is located. You can see <a class="reference external" href="http://www.dmap.co.uk/utmworld.htm">UTM Grid Zones of the World</a> map to locate the UTM zone for your city. Chennai falls in the UTM Zone <strong>44N</strong>. Open the Processing Toolbox and locate the <span class="menuselection">Vector general ‣ Reproject</span> algorithm. Double click to open it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image14.png" class="align-center" src="../../_images/image14.png" />
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">road_intersections</span></code> as the <span class="guilabel">Input layer</span>. Search by clicking the <span class="guilabel">globe</span> icon next to <span class="guilabel">Target CRS</span> and select <code class="docutils literal notranslate"><span class="pre">EPSG:32664</span> <span class="pre">-</span> <span class="pre">WGS</span> <span class="pre">84</span> <span class="pre">/</span> <span class="pre">UTM</span> <span class="pre">zone</span> <span class="pre">44N</span></code>. This is a CRS based on the WGS84 datum for the <em>UTM Zone 44N</em>. Enter the <span class="guilabel">Reprojected</span> output layer as <code class="docutils literal notranslate"><span class="pre">road_intersections_reprojected.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image15.png" class="align-center" src="../../_images/image15.png" />
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>Once the processing finishes and the <code class="docutils literal notranslate"><span class="pre">road_intersections_reprojected</span></code> layer is added, right-click and select Layer <span class="menuselection">CRS ‣ Set Project CRS from Layer</span>. And remove the <code class="docutils literal notranslate"><span class="pre">road_intersections</span></code> layer.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image16.png" class="align-center" src="../../_images/image16.png" />
</div></blockquote>
<ol class="arabic simple" start="17">
<li><p>Project CRS will be updated in the bottom right of the window. The purpose of this step to ensure that all layers are displayed in the CRS of new layer. We are now ready to create the grid using the <code class="docutils literal notranslate"><span class="pre">road_intersections_reprojected</span></code> as reference. Open the Processing Toolbox and locate the <span class="menuselection">Vector creation ‣ Create grid</span> algorithm. Double click to open.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image17.png" class="align-center" src="../../_images/image17.png" />
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Select <span class="guilabel">Grid</span> type as <span class="guilabel">Rectangle (Polygon)</span>. Click the  <code class="docutils literal notranslate"><span class="pre">...</span></code>  button in <span class="guilabel">Grid extent</span> and select <span class="menuselection">Calculate from Layer ‣ road_intersections_reprojected</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image18.png" class="align-center" src="../../_images/image18.png" />
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>Select the Project CRS as the Grid CRS. We want to create a grid of 1km x 1km, so set both <span class="guilabel">Horizontal spacing</span> and <span class="guilabel">Vertical spacing</span> as <code class="docutils literal notranslate"><span class="pre">1000</span></code> meters. Save the <span class="guilabel">Grid</span> output layer as <code class="docutils literal notranslate"><span class="pre">grid.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image19.png" class="align-center" src="../../_images/image19.png" />
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>The <code class="docutils literal notranslate"><span class="pre">grid</span></code> layer containing rectangular grid polygons will be created. We can now count the number of points in each polygon, but since our layers are large, this process can take a long time. One way to speed up spatial operations is to use a <em>Spatial Index</em>. Open the Processing Toolbox and locate the <span class="menuselection">Vector general ‣ Create spatial index</span> algorithm. Double click to open it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image20.png" class="align-center" src="../../_images/image20.png" />
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">grid</span></code> layer and click <span class="guilabel">Run</span>, now the layer will have a spatial index which can boost the performance of computation with this layer.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image21.png" class="align-center" src="../../_images/image21.png" />
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>Open the Processing Toolbox and locate the <span class="menuselection">Vector analysis ‣ Count points in polygon</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image22.png" class="align-center" src="../../_images/image22.png" />
</div></blockquote>
<ol class="arabic simple" start="23">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">grid</span></code> as the <span class="guilabel">Polygon layer</span> and <code class="docutils literal notranslate"><span class="pre">road_intersections_reprojected</span></code> as the <span class="guilabel">Points layer</span>. Save the <span class="guilabel">Count</span> output layer as <code class="docutils literal notranslate"><span class="pre">grid_count.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image23.png" class="align-center" src="../../_images/image23.png" />
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>The resulting layer <code class="docutils literal notranslate"><span class="pre">grid_count</span></code> will have an attribute <span class="guilabel">NUMPOINTS</span> which contains the number of intersection points within each grid. There are many grids with 0 points. It will help our analysis and visualization to remove grid polygons that contain no intersections. Open the Processing Toolbox and locate the <span class="menuselection">Vector selection ‣ Extract by attribute</span> algorithm.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image24.png" class="align-center" src="../../_images/image24.png" />
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">grid_count</span></code> as the <span class="guilabel">Input layer</span>, then select <code class="docutils literal notranslate"><span class="pre">NUMPOINTS</span></code> in <span class="guilabel">Selection attribute</span>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> in <span class="guilabel">Operator</span> and enter <code class="docutils literal notranslate"><span class="pre">0</span></code> as the <span class="guilabel">Value</span>. Save the <span class="guilabel">Extracted (attribute)</span> output layer as <code class="docutils literal notranslate"><span class="pre">grid_counts_chennai.gpkg</span></code>. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image25.png" class="align-center" src="../../_images/image25.png" />
</div></blockquote>
<ol class="arabic simple" start="26">
<li><p>The resulting layer <code class="docutils literal notranslate"><span class="pre">grid_counts_chennai</span></code> will have grid polygons over the Chennai city and contains the number of road intersections as an attribute for each polygon. Remove all layers except <code class="docutils literal notranslate"><span class="pre">grid_counts_chennai</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image26.png" class="align-center" src="../../_images/image26.png" />
</div></blockquote>
<ol class="arabic simple" start="27">
<li><p>Let’s clean up the attribute table of our data layer. The preferred method to make any changes to the attribute table is to use a processing algorithm called Refactor Fields, open the Processing Toolbox and locate the <span class="menuselection">Vector table ‣ Refactor Fields</span> algorithm. Double-click to open it. Click on any row in the <span class="guilabel">Field Mapping</span> section to select it. You can hold the <kbd class="kbd docutils literal notranslate">Shift</kbd> key to select multiple rows, select all fields except <span class="guilabel">fid</span> and <span class="guilabel">NUMPOINTS</span>. Click the <span class="guilabel">Delete selected fields</span> button.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image27.png" class="align-center" src="../../_images/image27.png" />
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>Rename the <span class="guilabel">NUMPOINTS</span> field as <code class="docutils literal notranslate"><span class="pre">intersection_density</span></code> and save the layer as <code class="docutils literal notranslate"><span class="pre">road_intersection_density.gpkg</span></code>, click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image28.png" class="align-center" src="../../_images/image28.png" />
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>Let’s style this layer to view the density of each grid, select the <code class="docutils literal notranslate"><span class="pre">road_intersection_density</span></code> layer and click <span class="guilabel">Open the Layer Styling Panel</span>. Select <span class="guilabel">Graduated</span> renderer, and in <span class="guilabel">Values</span> select <span class="guilabel">Intersection Density</span>, a <span class="guilabel">Color ramp</span> of your choice, set the <span class="guilabel">classes</span> to <code class="docutils literal notranslate"><span class="pre">7</span></code> and click <span class="guilabel">Classify</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image29.png" class="align-center" src="../../_images/image29.png" />
</div></blockquote>
<ol class="arabic simple" start="30">
<li><p>In the values enter <code class="docutils literal notranslate"><span class="pre">0-50</span></code>, <code class="docutils literal notranslate"><span class="pre">50-100</span></code>, <code class="docutils literal notranslate"><span class="pre">100-150</span></code> and so on up to <code class="docutils literal notranslate"><span class="pre">300</span> <span class="pre">-</span> <span class="pre">350</span></code>. You have now created a map showing intersection density across the city.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/image30.png" class="align-center" src="../../_images/image30.png" />
</div></blockquote>
</section>
</section>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021, Ujaval Gandhi.<br/>
      Zadnjič posodobljeno nov. 14, 2022.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.1.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/calculating_intersection_density.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>