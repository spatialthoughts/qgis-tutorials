<!DOCTYPE html>

<html lang="sl" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Basic Filtering and Styling with Expressions (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=d40e29de"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=ad0ddf96"></script>
    <link rel="search" title="Išči" href="../../search.html" />
    <link rel="next" title="Creating a Block World Map (QGIS3)" href="block_world_styling.html" />
    <link rel="prev" title="Analiza prekrivanja po več kriterijih (QGIS3)" href="multi_criteria_overlay.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Uvod</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Ustvarjanje karte (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Delo z atributi (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Uvoz podatkov preglednic ali datotek CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Osnovno oblikovanje vektorskih slojev (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Izračunavanje dolžin in statistike linij (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Osnovne analize in prikazi rastrov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Mozaičenje in obrezovanje rastrov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Delo s podatki o reliefu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Delo s podatki prek vmesnika WMS (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Delo s projekcijami (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenciranje skeniranih topografskih kart (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferencing Aerial Imagery (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitalizacija podatkov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Združevanje tabel (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Prostorsko združevanje podatkov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Izvajanje prostorskih poizvedb (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analiza najbližjih sosedov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Vzorčenje rastrskih podatkov z uporabo točk ali poligonov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Izračun površine rastra (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Ustvarjanje kart zgostitev (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Prikazovanje podatkov časovnih vrst (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Ravnanje z neveljavnimi geometrijami (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Advanced Raster Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Avtomatizacija zapletenih delovnih postopkov z orodjem Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Avtomatizacija ustvarjanja zemljevidov s programom Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Analiza prekrivanja po več kriterijih (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometric_buildings.html">Creating Isometric Buildings (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_canvas_maps.html">Making Interactive Canvas Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_reveal_maps.html">Making Interactive Reveal Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="cartogram_animation.html">Creating an Animated Cartogram (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Osnove vizualizacije in usmerjanja omrežja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Iskanje najbližjega objekta z matriko izvor-destinacija (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Analiza storitvenih območij z uporabo storitve Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Analiza potovalnega časa z gibanjem Uberja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">Creating a Colorized River Basin Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">Creating a Landuse Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">Determining Landuse Buffer Zones (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">Mapping Waste Disposal Volumes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Uporaba vtičnikov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Iskanje in prenos podatkov OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Učni viri QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Data Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="multi_criteria_overlay.html" title="Previous Chapter: Analiza prekrivanja po več kriterijih (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Analiza prekr...</span>
    </a>
  </li>
  <li>
    <a href="block_world_styling.html" title="Next Chapter: Creating a Block World Map (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Creating a Bl... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p><a href="https://www.linkedin.com/in/spatialthoughts/"><img src="../../_static/ujaval.png">Ujaval Gandhi</a></p>

<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="basic-filtering-and-styling-with-expressions-qgis3">
<h1>Basic Filtering and Styling with Expressions (QGIS3)<a class="headerlink" href="#basic-filtering-and-styling-with-expressions-qgis3" title="Link to this heading">¶</a></h1>
<p><em>Contributed by:</em> <a class="reference external" href="https://geographyclub.github.io/">Steven Kim</a></p>
<p>Expressions offer a powerful way to manipulate attribute values, geometries and variables to dynamically modify map features on the fly. This tutorial is an introduction to some common expressions and how they are used in map making.</p>
<section id="overview-of-the-task">
<h2>Overview of the task<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>We will use expressions to filter features by attribute from a Natural Earth country layer, and then style them to create a map of South East Asia with each country styled in a shade of green.</p>
<blockquote>
<div><img alt="../../_images/output8.png" class="align-center" src="../../_images/output8.png" />
</div></blockquote>
</section>
<section id="get-the-data">
<h2>Get the data<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://www.naturalearthdata.com/downloads/">Natural Earth</a> has the admin shapefiles for countries. On the downloads page look for <span class="guilabel">Cultural</span> option under the <code class="docutils literal notranslate"><span class="pre">Medium</span> <span class="pre">scale</span> <span class="pre">data</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data127.png" class="align-center" src="../../_images/data127.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Download the <code class="docutils literal notranslate"><span class="pre">Admin</span> <span class="pre">0</span> <span class="pre">-</span> <span class="pre">Countries</span></code> shapefile. You will see the <code class="docutils literal notranslate"><span class="pre">ne_50m_admin_0_countries.zip</span></code> file downloaded which is used for this tutorial.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/data29.png" class="align-center" src="../../_images/data29.png" />
</div></blockquote>
<p>For convenience, you may directly download a copy of the above layer from below:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/ne_50m_admin_0_countries.zip">ne_50m_admin_0_countries.zip</a></p>
<p>Data Source <a class="reference internal" href="../credits.html#naturalearth" id="id1"><span>[NATURALEARTH]</span></a></p>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Locate the <code class="docutils literal notranslate"><span class="pre">Natural_Earth_quick_start.zip</span></code> file in the QGIS Browser and expand it. Select the <code class="docutils literal notranslate"><span class="pre">ne_50m_admin_0_countries.shp</span></code> file and drag it to the canvas.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1161.png" class="align-center" src="../../_images/1161.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>A new layer <code class="docutils literal notranslate"><span class="pre">ne_50m_admin_0_countries</span></code> will now be loaded in QGIS and you should see a map of the world. Click on <span class="guilabel">Open Layer Styling Panel</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2133.png" class="align-center" src="../../_images/2133.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Switch from <span class="guilabel">Single Symbol</span> to <span class="guilabel">Rule-based</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/370.png" class="align-center" src="../../_images/370.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Double-click on the default rule to enter the <span class="guilabel">Edit Rule</span> dialog.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/443.png" class="align-center" src="../../_images/443.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>To filter using an expression, click the Filter <span class="guilabel">ε</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/537.png" class="align-center" src="../../_images/537.png" />
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>You have entered the <span class="guilabel">Expression Builder</span>. This dialog provides the main interface to write expressions and can be accessed in many ways. It contains an input box on the left, a list of functions in the middle and a help box on the right.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/636.png" class="align-center" src="../../_images/636.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>From the list in the middle, expand <span class="menuselection">Fields and Values</span> to explore the fields found in the <code class="docutils literal notranslate"><span class="pre">ne_50m_admin_0_countries</span></code> layer.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/736.png" class="align-center" src="../../_images/736.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Click to select <code class="docutils literal notranslate"><span class="pre">SUBREGION</span></code> field and click <span class="guilabel">All Unique</span> on the right panel to view all unique subregion values.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/835.png" class="align-center" src="../../_images/835.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>After exploring, select the <span class="guilabel">Expression</span> box on the left to input the expression as follows and click <span class="guilabel">OK</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;SUBREGION&quot; = &#39;South-Eastern Asia&#39;
</pre></div>
</div>
<img alt="../../_images/936.png" class="align-center" src="../../_images/936.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>You should see SE Asia. Pan and zoom to the center to the region in your map window.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1043.png" class="align-center" src="../../_images/1043.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Now that we have used an expression to filter features, let us use an expression to color each country based on a field <code class="docutils literal notranslate"><span class="pre">MAPCOLOR7</span></code>. Scroll-down to the <span class="guilabel">Symbol</span> options in the  styling panel and select <span class="guilabel">Simple Fill</span> to bring up styling options such as fill color, line color and more. Click on <span class="guilabel">Data define override</span> button for the <span class="guilabel">Fill color</span> and select <span class="guilabel">Edit…</span> on the menu.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1162.png" class="align-center" src="../../_images/1162.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>This brings up the <span class="guilabel">Expression Builder</span> dialog for Fill color. Enter the following expression:</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set_color_part(ramp_color(&#39;Greens&#39;,scale_linear(&quot;MAPCOLOR7&quot;,1,7,0.2,1)),&#39;alpha&#39;,100)
</pre></div>
</div>
</div></blockquote>
<p>This expression contains multiple functions: <code class="docutils literal notranslate"><span class="pre">set_color_part()</span></code> to set alpha or transparency, <code class="docutils literal notranslate"><span class="pre">ramp_color()</span></code> to apply a color ramp and <code class="docutils literal notranslate"><span class="pre">scale_linear()</span></code> to use the field MAPCOLOR7 in setting the color for each country. In this example, we are using greens, setting the alpha at 100 out of 255 and scaling MAPCOLOR7 from it’s original range of 1-7 to 0.2-1, which will look nice with ramp_color.</p>
<blockquote>
<div><img alt="../../_images/1246.png" class="align-center" src="../../_images/1246.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Opomba</p>
<p>The Natural Earth data layer has several fields named MAPCOLOR7, MAPCOLOR8 etc. These fields contain numeric values that are used to color the map so that adjacent polygons aren’t the same color. There are versions with 7,8,9 or 13 colors.</p>
</div>
<ol class="arabic simple" start="13">
<li><p>Click <span class="guilabel">OK</span> to exit the dialog. At the <span class="guilabel">Edit Rule</span> dialog, change <span class="guilabel">Stroke Style</span> to <span class="menuselection">No Line</span>. You should see the countries in green now. Click <span class="guilabel">Apply</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1344.png" class="align-center" src="../../_images/1344.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>We have created a beautifully styled map by filtering and applying a color ramp to the data layer by just using expressions.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1440.png" class="align-center" src="../../_images/1440.png" />
</div></blockquote>
</section>
</section>



<!-- Turn on comments on only newer tutorials having 3/ in URL -->

  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2025, Ujaval Gandhi.<br/>
      Zadnjič posodobljeno jun. 17, 2025.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 8.2.3.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a>.<br>
  You are free to use the material for any purpose as long as you give appropriate credit to the original author.</p>
</div>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/vector_styling_expressions.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>