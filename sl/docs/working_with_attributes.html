<!DOCTYPE html>

<html lang="sl" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Delo z atributi &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../_static/documentation_options.js?v=d40e29de"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=82705e9b"></script>
    <link rel="search" title="Išči" href="../search.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Uvod</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/making_a_map.html">Ustvarjanje karte (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_attributes.html">Delo z atributi (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/importing_spreadsheets_csv.html">Uvoz podatkov preglednic ali datotek CSV (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_vector_styling.html">Osnovno oblikovanje vektorskih slojev (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_line_lengths.html">Izračunavanje dolžin in statistike linij (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_styling_and_analysis.html">Osnovne analize in prikazi rastrov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_mosaicing_and_clipping.html">Mozaičenje in obrezovanje rastrov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_terrain.html">Delo s podatki o reliefu (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_wms.html">Delo s podatki prek vmesnika WMS (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_projections.html">Delo s projekcijami (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/georeferencing_basics.html">Georeferenciranje skeniranih topografskih kart (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/advanced_georeferencing.html">Georeferencing Aerial Imagery (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/digitizing_basics.html">Digitalizacija podatkov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_table_joins.html">Združevanje tabel (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_joins.html">Prostorsko združevanje podatkov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_queries.html">Izvajanje prostorskih poizvedb (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/nearest_neighbor_analysis.html">Analiza najbližjih sosedov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/sampling_raster_data.html">Vzorčenje rastrskih podatkov z uporabo točk ali poligonov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_raster_area.html">Izračun površine rastra (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/creating_heatmaps.html">Ustvarjanje kart zgostitev (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/animating_time_series.html">Prikazovanje podatkov časovnih vrst (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/handling_invalid_geometries.html">Ravnanje z neveljavnimi geometrijami (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/advanced_raster_analysis.html">Advanced Raster Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Avtomatizacija zapletenih delovnih postopkov z orodjem Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Avtomatizacija ustvarjanja zemljevidov s programom Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/multi_criteria_overlay.html">Analiza prekrivanja po več kriterijih (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/vector_styling_expressions.html">Basic Filtering and Styling with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/block_world_styling.html">Creating a Block World Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/isometric_buildings.html">Creating Isometric Buildings (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/interactive_canvas_maps.html">Making Interactive Canvas Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/interactive_reveal_maps.html">Making Interactive Reveal Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/cartogram_animation.html">Creating an Animated Cartogram (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_network_analysis.html">Osnove vizualizacije in usmerjanja omrežja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/origin_destination_matrix.html">Iskanje najbližjega objekta z matriko izvor-destinacija (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/service_area_analysis.html">Analiza storitvenih območij z uporabo storitve Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/travel_time_analysis.html">Analiza potovalnega časa z gibanjem Uberja (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/colorized_river_basin_map.html">Creating a Colorized River Basin Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/creating_landuse_map.html">Creating a Landuse Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/landuse_buffer.html">Determining Landuse Buffer Zones (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/solidwaste_mapping.html">Mapping Waste Disposal Volumes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/using_plugins.html">Uporaba vtičnikov (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Iskanje in prenos podatkov OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">Učni viri QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Data Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p><a href="https://www.linkedin.com/in/spatialthoughts/"><img src="../_static/ujaval.png">Ujaval Gandhi</a></p>

<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="working-with-attributes">
<h1>Delo z atributi<a class="headerlink" href="#working-with-attributes" title="Link to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Opozorilo</p>
<p>Vadnica je zastarela. Nova in posodobljena verzija je na voljo v <a class="reference internal" href="3/working_with_attributes.html"><span class="doc">Delo z atributi (QGIS3)</span></a></p>
</div>
<p>Podatki v GIS-u imajo dva dela: grafičnega in atributnega. Atributi so nabor strukturiranih podatkov o posameznem grafičnem objektu. V tej vadnici bomo spoznali kako v QGIS-u pregledujemo atribute in naredimo enostavne poizvedbe.</p>
<section id="overview-of-the-task">
<h2>Pregled naloge<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>Nabor podatkov za to vadnico vsebuje informacije o velikih mestih po svetu. Naredili bomo poizvedbo, s katero bomo poiskali vsa glavna mesta, ki imajo več kot 1.000.000 prebivalcev.</p>
<section id="other-skills-you-will-learn">
<h3>Česa se bomo še naučili<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Izbira značilk sloja z uporabo izrazov.</p></li>
<li><p>Preklic izbire značilk sloja z orodjarno <span class="guilabel">Attributes</span>.</p></li>
<li><p>Uporaba orodja <span class="guilabel">Query Builder</span> za prikaz podmnožice značilk sloja.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Pridobivanje podatkov<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p>Podatkovna zbirka Natural Earth ima zanimiv nabor podatkov <a class="reference external" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-populated-places/">Populated Places</a>. Poberite <a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip">simple (less columns) dataset</a></p>
<p>Kopijo podatkov lahko poberete tudi neposredno s spodnjega naslova:</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ne_10m_populated_places_simple.zip">ne_10m_populated_places_simple.zip</a></p>
<p>Vir podatkov <a class="reference internal" href="credits.html#naturalearth" id="id1"><span>[NATURALEARTH]</span></a></p>
</section>
<section id="procedure">
<h2>Postopek<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Ko ste prenesli podatke, odprite QGIS. Izberite <span class="menuselection">Layer ‣ Add Layer ‣ Add Vector Layer</span>.</p></li>
</ol>
<img alt="../_images/1291.png" class="align-center" src="../_images/1291.png" />
<ol class="arabic simple" start="2">
<li><p>Kliknite <span class="guilabel">Browse</span> in poiščite mapo, v katero ste shranili preneseno datoteko.</p></li>
</ol>
<img alt="../_images/2192.png" class="align-center" src="../_images/2192.png" />
<ol class="arabic simple" start="3">
<li><p>Poiščite datoteko <cite>ne_10m_populated_places_simple.zip</cite>. Datoteke ni potrebno razpakirati, ker zna QGIS delati direktno z datotekami ZIP. Izberite datoteko in kliknite <span class="guilabel">Open</span>.</p></li>
</ol>
<img alt="../_images/3131.png" class="align-center" src="../_images/3131.png" />
<ol class="arabic simple" start="4">
<li><p>QGIS bo prebral izbrani podatkovni sloj in na karti se bodo prikazale točke z naseljenimi mesti po svetu.</p></li>
</ol>
<img alt="../_images/485.png" class="align-center" src="../_images/485.png" />
<ol class="arabic simple" start="5">
<li><p>Z desnim klikom izberite <span class="guilabel">Open Attribute Table</span>.</p></li>
</ol>
<img alt="../_images/579.png" class="align-center" src="../_images/579.png" />
<ol class="arabic simple" start="6">
<li><p>Preglejte različne atribute in njihove vrednosti.</p></li>
</ol>
<img alt="../_images/676.png" class="align-center" src="../_images/676.png" />
<ol class="arabic simple" start="7">
<li><p>Zanima nas število prebivalcev vsakega mesta (objekta). Podatek je shranjen v polju <cite>pop_max</cite>. Če dvakrat kliknemo na glavo stolpca, se bodo vrednosti uredile po padajočem vrstnem redu.</p></li>
</ol>
<img alt="../_images/775.png" class="align-center" src="../_images/775.png" />
<ol class="arabic simple" start="8">
<li><p>Po atributih lahko izvajamo poizvedbe (query). QGIS za to uporablja ukaze, ki so podobni kot pri jeziku SQL. Kliknite <span class="guilabel">Select features using an expression</span>.</p></li>
</ol>
<img alt="../_images/873.png" class="align-center" src="../_images/873.png" />
<ol class="arabic simple" start="9">
<li><p>V oknu <span class="guilabel">Select By Expression</span> rayširite del <span class="guilabel">Fields and Values</span> in dvakrat kliknite na oznako <code class="docutils literal notranslate"><span class="pre">pop_max</span></code>. Opazili boste, da je dodana na del z izrazi v spodnjem delu. Če o vrednostih polja niste prepričani, lahko kliknete <span class="guilabel">Load all unique values</span> in izpisal se bo seznam vrednosti atributov, ki so v podatkovni zbirki. Za to vajo nas zanimajo vse enote s številom prebivalcev večjim od <code class="docutils literal notranslate"><span class="pre">1,000,000</span></code>. Dokončajte enačbo in kliknite gumb <span class="guilabel">Select</span>.</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;pop_max&quot; &gt; 1000000
</pre></div>
</div>
<img alt="../_images/972.png" class="align-center" src="../_images/972.png" />
<ol class="arabic simple" start="10">
<li><p>Kliknite <span class="guilabel">Close</span> in se vrnite v glavno okno programa QGIS. Opazili boste, da je podmnožica točk zdaj označena rumeno. To je rezultat naše poizvedbe in vidimo vsa mesta v podatkovni zbirki, za katera velja, da je atribut <code class="docutils literal notranslate"><span class="pre">pop_max</span></code> večji od <code class="docutils literal notranslate"><span class="pre">1,000,000</span></code>.</p></li>
</ol>
<img alt="../_images/1080.png" class="align-center" src="../_images/1080.png" />
<ol class="arabic simple" start="11">
<li><p>Cilj naloge je med njimi poiskati tista, ki so glavna mesta. Polje, ki vsebuje podatek o tem, se imenuje <cite>adm0cap</cite>, pri čemer njegova vrednost <code class="docutils literal notranslate"><span class="pre">1</span></code> pomeni, da gre za glavno mesto. Ta dodatni pogoj lahko dodamo k naši poizvedbi z uporabo operatorja <code class="docutils literal notranslate"><span class="pre">and</span></code>. Popravimo torej poizvedbo in izberimo samo glavna mesta. V atributni tabeli kliknite gumb <span class="guilabel">Select feature using an expression</span> in vpišite spodnjo enačbo. Kliknite <span class="guilabel">Select</span> in <span class="guilabel">Close</span>.</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;pop_max&quot; &gt; 1000000 and &quot;adm0cap&quot; = 1
</pre></div>
</div>
<img alt="../_images/11117.png" class="align-center" src="../_images/11117.png" />
<ol class="arabic simple" start="12">
<li><p>Vrnite se v glavno okno programa QGIS. Izbrana množica točk je zdaj manjša in prikazuje samo glavna mesta, ki imajo več kot 1,000,000 prebivalcev. Če želimo s podmnožico podatkov izvajati dodatne analize, jo lahko shranimo. Desno kliknite sloj <code class="docutils literal notranslate"><span class="pre">ne_10m_populated_places_simple</span></code> in izberite <span class="guilabel">Properties</span>.</p></li>
</ol>
<img alt="../_images/1292.png" class="align-center" src="../_images/1292.png" />
<ol class="arabic simple" start="13">
<li><p>Na zavihku <span class="guilabel">General</span> se premaknite do dela <span class="guilabel">Feature subset</span>. Kliknite <span class="guilabel">Query Builder</span>.</p></li>
</ol>
<img alt="../_images/1377.png" class="align-center" src="../_images/1377.png" />
<ol class="arabic simple" start="14">
<li><p>Še enkrat vpišite isto enačbo kot prej in kliknite <span class="guilabel">OK</span>.</p></li>
</ol>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;pop_max&quot; &gt; 1000000 and &quot;adm0cap&quot; = 1
</pre></div>
</div>
<img alt="../_images/1473.png" class="align-center" src="../_images/1473.png" />
<ol class="arabic simple" start="15">
<li><p>V glavnem oknu programa QGIS bodo neizbrane točke izginile. Vse nadaljnje analize, ki jih bomo delali se tem slojem, bodo vsebovale samo izbrane točke. Opazili boste, da so točke še vedno prikazane rumeno, saj so še vedno izbrane. V orodjarni <span class="guilabel">Attributes</span> klinite <span class="guilabel">Deselect Features from All Layers</span>.</p></li>
</ol>
<img alt="../_images/1565.png" class="align-center" src="../_images/1565.png" />
<ol class="arabic simple" start="16">
<li><p>Točke bodo odznačene in prikazane v prvotni barvi.</p></li>
</ol>
<img alt="../_images/1661.png" class="align-center" src="../_images/1661.png" />
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      Zadnjič posodobljeno mar. 07, 2025.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/working_with_attributes.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>