<!DOCTYPE html>

<html lang="de" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lokalisierung der nächstgelegenen Einrichtung mit einer Quelle-Ziel-Matrix (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=54d918e9"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=70a09b52"></script>
    <link rel="search" title="Suche" href="../../search.html" />
    <link rel="next" title="Einzugsgebietsanalyse mit dem Openrouteservice (QGIS3)" href="service_area_analysis.html" />
    <link rel="prev" title="Einfache Netzwerkvisualisierung und Routing (QGIS3)" href="basic_network_analysis.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Einleitung</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Erstellung einer Karte (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Arbeit mit Attributen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Import von Tabellenblättern oder CSV-Dateien (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Einfache Vektor Gestaltung (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Berechnung der Länge von Linien und Statistiken (QGSI3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Einfache Visualisierung und Analyse von Rasterdaten (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Erstellen und Zuschneiden eines Raster-Mosaiks (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferenzierung von Kartenblättern und eingescannten Karten (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Georeferenzierung von Luftbildern (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizing Map Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Tabellen verbinden (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Räumliche Verknüpfungen erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Räumliche Abfragen ausführen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nächster-Nachbar-Analyse (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Stichproben aus Rasterdaten mit Hilfe von Punkten und Polygonen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Heatmaps erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animierte Zeitreihen-Daten (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Fortgeschrittene Raster-Analyse (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolation von Punktdaten (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Stapelverarbeitung mit dem Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Komplexe Arbeitsabläufe mit Hilfe der Verarbeitungsmodellierung (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Automatisierung der Kartenerstellung mit dem Drucklayout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multikriterielle Überlagerungs-Analyse (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Grundlagen für Filterung und Gestaltung mit Ausdrücken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Erstellung einer Weltkarte im Gitter-Stil (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="contour_3d_styling.html">Styling Contours in 3D (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Einfache Netzwerkvisualisierung und Routing (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lokalisierung der nächstgelegenen Einrichtung mit einer Quelle-Ziel-Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Einzugsgebietsanalyse mit dem Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">Erzeugen einer farbigen Karte für ein Einzugsgebiet (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">Erstellung einer Karte zur Landnutzung (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">Determining Landuse Buffer Zones (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">Mapping Waste Disposal Volumes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Mit der Pythonprogrammierung loslegen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Verarbeitungsroutinen mit Python ausführen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Angepasste Python Funktionsausdrücke verwenden (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Pythonscripts für die Verarbeitungswerkzeuge schreiben (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Ein Python-Plugin erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Ein Verarbeitungsplugin erstellen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Suchen und Laden von OpenStreetMap Daten</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">QGIS Learning Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Data Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="basic_network_analysis.html" title="Previous Chapter: Einfache Netzwerkvisualisierung und Routing (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Einfache Netz...</span>
    </a>
  </li>
  <li>
    <a href="service_area_analysis.html" title="Next Chapter: Einzugsgebietsanalyse mit dem Openrouteservice (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Einzugsgebiet... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="locating-nearest-facility-with-origin-destination-matrix-qgis3">
<h1>Lokalisierung der nächstgelegenen Einrichtung mit einer Quelle-Ziel-Matrix (QGIS3)<a class="headerlink" href="#locating-nearest-facility-with-origin-destination-matrix-qgis3" title="Link to this heading">¶</a></h1>
<p>Im vorhergehenden Tutorial <a class="reference internal" href="basic_network_analysis.html"><span class="doc">Einfache Netzwerkvisualisierung und Routing (QGIS3)</span></a> lernten wir, wie man ein Netzwerk erstellt und die kürzeste Verbindung zwischen 2 Punkten bestimmt. Wir können diese Technik auf viele verschiedene Arten netzwerkbasierter Analysen anwenden. Eine dieser Anwendungen ist die Berechnung einer <strong>Quelle-Ziel-Matrix</strong> oder <strong>QZ-Matrix</strong>. Angenommen, wir haben eine Menge an Quell-Punkten und eine Menge an Ziel-Punkten, dann können wir für jedes Quelle-Ziel-Paar die kürzeste oder schnellste Verbindung ermitteln. So eine Analyse ist sinnvoll, um die nächstgelegene Einrichtung zu jedem gegeben Punkt zu finden. Eine Logistikfirma kann diese Analyse z. B. nutzen, um das nächstgelegende Lager zu ihren Kunden zu bestimmen und so die Lieferrouten optimieren. Wir verwenden hier den Distanzmatrix-Algorithmus aus dem Plugin <strong>QGIS Network Analysis Toolbox (QNEAT3)</strong>, um die nächstgelegene Gesundheitseinrichtung zu jeder Adresse in der Stadt zu bestimmen.</p>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Dieses Tutorial zeigt, wie man eigene Netzwerkdaten zur Erstellung einer Quelle-Ziel-Matrix verwenden kann. Wenn man keine eigene Netzwerkdaten hat, kann man das <strong>ORS Tools Plugin</strong> verwenden. Die Analyse erfolgt dann mit Daten von OpenStreetMap mit dem Werkzeug <span class="menuselection">ORS Tools ‣ Matrix ‣  Matrix from Layers</span>. Unter <a class="reference internal" href="service_area_analysis.html"><span class="doc">Einzugsgebietsanalyse mit dem Openrouteservice (QGIS3)</span></a> findet man weitere Informationen zur Verwendung des Plugins.</p>
</div>
<section id="overview-of-the-task">
<h2>Überblick über die Aufgabe<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>Wir werden 2 Layer für Washington DC verwenden - einen Layer mit Punkten für Adressen und einen anderen Layer mit Punkten für psychosoziale Einrichtungen. Wir werden dann die Einrichtung mit dem kürzesten Weg zu jeder Adresse ermitteln.</p>
<section id="other-skills-you-will-learn">
<h3>Weitere Fähigkeiten, die wir erlernen<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Gewinnung einer Zufallsstichprobe aus einem Punktlayer</p></li>
<li><p>Nutzung von virtuellen Layern, um eine SQL-Abfrage auf einem QGIS-Layer auszuführen</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Beschaffung der Daten<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p>Die Regierung des Distrikts Columbia stellt hunderte Datensätze frei zur Verfügung: <a class="reference external" href="https://opendata.dc.gov/">Open Data Catalog</a>.</p>
<p>Wir laden die folgenden Datenlayer als Shape-Dateien herunter.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://opendata.dc.gov/datasets/roadway-block">Roadway Block</a></p></li>
<li><p><a class="reference external" href="https://opendata.dc.gov/datasets/address-points">Address Points</a></p></li>
<li><p><a class="reference external" href="https://opendata.dc.gov/datasets/DCGIS::community-based-service-providers">Community Based Service Provider</a></p></li>
</ul>
<p>Der Einfachheit halber können wir eine Kopie der Datensätze unter folgenden Links herunterladen:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/Roadway_Block-shp.zip">Roadway_Block-shp.zip</a></p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/Address_Points.zip">Address_Points.zip</a></p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/Community_Based_Service_Providers.zip">Community Based Service Provider.zip</a></p>
<p>Datenquelle: <a class="reference internal" href="../credits.html#dcopendata" id="id1"><span>[DCOPENDATA]</span></a></p>
</section>
<section id="setup">
<h2>Konfiguration<a class="headerlink" href="#setup" title="Link to this heading">¶</a></h2>
<p>Wir wählen <span class="menuselection">Erweiterungen ‣ Erweiterungen verwalten und installieren…</span>. Dort suchen wir in Bereich :guilabel:` Alle` nach dem Plugin <strong>QNEAT3</strong> und installieren es. Anschließend betätigen wir die Schaltfläche <span class="guilabel">Schließen</span>.</p>
<img alt="../../_images/setup11.png" class="align-center" src="../../_images/setup11.png" />
</section>
<section id="procedure">
<h2>Arbeitsablauf<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Wir suchen die heruntergeladene Datei <code class="docutils literal notranslate"><span class="pre">Community_Based_Service_Providers.zip</span></code> im <span class="guilabel">Browser</span>, erweitern sie und fügen <code class="docutils literal notranslate"><span class="pre">Community_Based_Service_Providers.shp</span></code> zum Arbeitsbereich hinzu. Wir werden nur die Gesundheitszentren für Erwachsene verwenden. Also öffnen wir per Rechtsklick das Kontextmenü des Layers und wählen <span class="guilabel">Filter…</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1106.png" class="align-center" src="../../_images/1106.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Das Dialogfenster <span class="guilabel">Abfrageerstellung</span> wird geöffnet. Wir geben den folgenden Ausdruck in :guilabel:` Datenanbieterspezifischer Filterausdruck` ein und bestätigen mit <span class="guilabel">OK</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;PROVIDER_T&quot;  IN (&#39;Adult&#39;,&#39;Adult &amp; Child&#39;)
</pre></div>
</div>
<img alt="../../_images/2101.png" class="align-center" src="../../_images/2101.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Als nächstes suchen wir die Datei <code class="docutils literal notranslate"><span class="pre">Roadway_Block.zip</span></code>, erweitern sie und fügen <code class="docutils literal notranslate"><span class="pre">Roadway_Block.shp</span></code> zum Arbeitsbereich hinzu. Auch mit der Datei <code class="docutils literal notranslate"><span class="pre">Address_Points.zip</span></code> verfahren wir so und fügen <code class="docutils literal notranslate"><span class="pre">Address_Points.shp</span></code> hinzu. In der Stadt werden sehr viele Punkte angezeigt. Jeder davon repräsentiert eine gültige Adresse. Wir werden 1000 Punkte zufällig auswählen. Dieses Vorgehen wird <em>Zufallsstichprobe</em> genannt. Wir wählen <span class="menuselection">Verarbeitung ‣ Werkzeugkiste</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/346.png" class="align-center" src="../../_images/346.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Wir suchen nach dem Algorithmus <span class="menuselection">Vektorauswahl ‣ Zufällige Auswahl in Untermengen</span> und öffnen ihn per Doppelklick.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/346.png" class="align-center" src="../../_images/346.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Wir wählen <code class="docutils literal notranslate"><span class="pre">Address_Points</span></code> als <span class="guilabel">Eingabelayer</span>, <code class="docutils literal notranslate"><span class="pre">Anzahl</span> <span class="pre">gewählter</span> <span class="pre">Objekte</span></code> als <span class="guilabel">Methode</span> und geben <code class="docutils literal notranslate"><span class="pre">1000</span></code> in <span class="guilabel">Anzahl/Prozentsatz gewählter Objekte</span> ein. Neben <span class="guilabel">Extrahiert (zufällig geschichtet)</span> betätigen wir die Schaltfläche  <code class="docutils literal notranslate"><span class="pre">...</span></code> und wählen <span class="guilabel">In Datei speichern…</span>. Hier wählen wir das Verzeichnis und <code class="docutils literal notranslate"><span class="pre">address_point_subset.shp</span></code>  als Dateiamen. Wir betätigen die Schaltfläche <span class="guilabel">Starte</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/520.png" class="align-center" src="../../_images/520.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Bemerkung</p>
<p>Der Algorithmus wählt zufällig 1000 Punkte aus dem Datensatz aus. Um genau dieselben Punkte wie beim Erstellen dieses Tutorials zu verwenden, kann das Ergebnis auch hier heruntergeladen werden: <a class="reference external" href="https://www.qgistutorials.com/downloads/address_point_subset.zip">address_point_subset.zip</a> . Nach dem Download muss noch der Layer <code class="docutils literal notranslate"><span class="pre">address_point_subset.shp</span></code> in QGIS geladen werden.</p>
</div>
<ol class="arabic simple" start="6">
<li><p>Ein neuer Layer <code class="docutils literal notranslate"><span class="pre">address_point_subset</span></code> wird zum <span class="guilabel">Layer</span>-Panel hinzugefügt. Die Sichtbarkeit des Layers <code class="docutils literal notranslate"><span class="pre">Address_Points</span></code> kann abgeschaltet werden. Wir wollen den neuen Layer in <code class="docutils literal notranslate"><span class="pre">origin_points</span></code> umbenennen. Per Rechtsklick öffnen wir das Kontextmenü und wählen <span class="guilabel">Layer umbenennen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/620.png" class="align-center" src="../../_images/620.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Ebenso bennen wir den Layer <code class="docutils literal notranslate"><span class="pre">Community_Based_Service_Provider</span></code>, der die Gesundheitszentren repräsentiert, in <code class="docutils literal notranslate"><span class="pre">destination_points</span></code> um. Die Benennung der Layer auf diese Weise erleichtert ihre Identifikation in den weiteren Verarbeitungsschritten. Anschließend öffnen wir die <span class="guilabel">Verarbeitungswerkzeuge</span>, um aus dem Quell- und dem Ziel-Layer eine Distanzmatrix zu generieren.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/719.png" class="align-center" src="../../_images/719.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Wir suchen nach dem Algorithmus <span class="menuselection">QNEAT3 ‣ Distance Matrices ‣ OD Matrix from Layers as Lines (m:n)</span>. Wenn der Algorithmus nicht zu finden ist, sollte sichergestellt sein, dass das Plugin <strong>QNEAT3</strong> installiert wurde.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/819.png" class="align-center" src="../../_images/819.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>Der Algorithmus ermittelt die Distanzen zwischen dem Quell- und dem Ziellayer entlang eines Netzwerkes. Wir wählen <code class="docutils literal notranslate"><span class="pre">Roadway_Block</span></code> als <span class="guilabel">Network Layer</span>, <code class="docutils literal notranslate"><span class="pre">origin_points</span></code> als <span class="guilabel">From-Point Layer</span> und <code class="docutils literal notranslate"><span class="pre">OBJECTID</span></code> als <span class="guilabel">Unique Point ID Field</span>. Analog setzen wir <code class="docutils literal notranslate"><span class="pre">destination_points</span></code> als <span class="guilabel">To-Point Layer</span> und <code class="docutils literal notranslate"><span class="pre">OBJECTID</span></code> als <span class="guilabel">Unique Point ID Field</span>. Wir stellen <span class="guilabel">Optimization Criterion</span> auf <code class="docutils literal notranslate"><span class="pre">Shortest</span> <span class="pre">Path</span> <span class="pre">(distance</span> <span class="pre">optimization)</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/919.png" class="align-center" src="../../_images/919.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Da es in dem Netzwerk viele Einbahnstraßen gibt, müssen wir den Abschnitt <span class="guilabel">Fortgeschrittene Parameter</span> erweitern, um die Richtung zu spezifizieren. Die Dokumentation <a class="reference internal" href="basic_network_analysis.html"><span class="doc">Einfache Netzwerkvisualisierung und Routing (QGIS3)</span></a> enthält weitere Details über die Gliederung dieser Attribute. Es gibt auch eine Option, den Geometriestil der erzeugten Matrix zu wählen. Da wir ein Straßennetz mit einer Richtungsinformation haben, können wir die Matrix durch Routenverfolgung generieren. Wir wählen <code class="docutils literal notranslate"><span class="pre">Matrix</span> <span class="pre">geometry</span> <span class="pre">follows</span> <span class="pre">routes</span></code>. Wir wählen <code class="docutils literal notranslate"><span class="pre">SUMMARYDIR</span></code> als <span class="guilabel">Direction field</span>. Wir geben <code class="docutils literal notranslate"><span class="pre">OB</span></code> als <span class="guilabel">Value for the forward direction</span>, <code class="docutils literal notranslate"><span class="pre">IB</span></code> als <span class="guilabel">Value for backward direction</span> und <code class="docutils literal notranslate"><span class="pre">BD</span></code> als <span class="guilabel">Value for both directions</span> ein. Die <span class="guilabel">Topology tolerance</span> setzen wir auf <code class="docutils literal notranslate"><span class="pre">0.0000150</span></code>. Die anderen Optionen belassen wir bei den Voreinstellungen und betätigen die Schaltfläche <span class="guilabel">Starte</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1026.png" class="align-center" src="../../_images/1026.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Ein neue Tabelle <code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">OD</span> <span class="pre">Matrix</span></code> wird nun im <span class="guilabel">Layer</span> Bereich angezeigt. Wir öffnen mit einem Rechtsklick das Kontextmenü und wählen <span class="guilabel">Attributtabelle öffnen</span>. Die Tabelle enthält <em>67000</em> Zeilen. Wir hatten 67 Startpunkte und 1000 Zielpunkte ‒ die Ausgabe enthält daher <em>67 x 1000 = 67000</em> Quelle-Ziel-Paare. Das Attribut <code class="docutils literal notranslate"><span class="pre">total_cost</span></code> enthält die Distanz in Metern von jedem Start- zu jedem Zielpunkt.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1129.png" class="align-center" src="../../_images/1129.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Im Rahmen dieses Tutorials interessiert uns nur der Zielpunkt mit der kürzesten Entfernung. Wir erstellen eine SQL-Abfrage zur Selektion des geringsten <code class="docutils literal notranslate"><span class="pre">total_cost</span></code> aller Ziele. Wir wählen <span class="menuselection">Datenbank ‣ DB-Verwaltung…</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1227.png" class="align-center" src="../../_images/1227.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>Im Bereich <span class="guilabel">Datenanbieter</span> wählen wir <span class="guilabel">Virtuelle Layer -&gt; Projektlayer -&gt; Output OD Matrix</span>. Nun betätigen wir die Schaltfläche <span class="guilabel">SQL-Fenster</span> in der Menüzeile des Dialogfensters <span class="guilabel">DB-Verwaltung</span>. Es wird ein Tab <span class="guilabel">Abfrage (Projektlayer)</span> geöffnet. In das Bearbeitungsfeld geben wir den folgenden Ausdruck ein; ggf. muss <code class="docutils literal notranslate"><span class="pre">input1</span></code> durch <code class="docutils literal notranslate"><span class="pre">&quot;Output</span> <span class="pre">OD</span> <span class="pre">Matrix&quot;</span></code> ersetzt werden. Wir setzen die Option <span class="guilabel">Als neuen Layer laden</span> und geben im sich öffnenden Bereich <code class="docutils literal notranslate"><span class="pre">geometry</span></code> als the <span class="guilabel">Geometriespalte</span> sowie <code class="docutils literal notranslate"><span class="pre">sql_output</span></code> als <span class="guilabel">Layername</span> an. Wir betätigen die Schaltfläche <span class="guilabel">Laden</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>select origin_id, destination_id, min(total_cost) as shortest_distance, geometry
from input1 group by origin_id
</pre></div>
</div>
<img alt="../../_images/1325.png" class="align-center" src="../../_images/1325.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Dem <span class="guilabel">Layer</span>-Panel wird ein neuer Layer <code class="docutils literal notranslate"><span class="pre">sql_output</span></code> hinzugefügt. Dieser Layer enthält das Ergebnis unserer Analyse: das nächstgelegene Gesundheitszentrum für jeden der 1000 zufällig ausgewählten Punkte.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1423.png" class="align-center" src="../../_images/1423.png" />
</div></blockquote>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      Zuletzt aktualisiert am Juli 08, 2024.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/origin_destination_matrix.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>