<!DOCTYPE html>

<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Samenvoegen van tabellen uitvoeren (PyQGIS) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="search" title="Zoeken" href="../search.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introductie</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/making_a_map.html">Een kaart maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_attributes.html">Werken met attributen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/importing_spreadsheets_csv.html">Werkbladen of CSV-bestanden importeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_vector_styling.html">Basis opmaken van vectoren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_line_lengths.html">Lengten van lijnen en statistieken berekenen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_styling_and_analysis.html">Basis opmaken en analyses van rasters (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_mosaicing_and_clipping.html">Rasters mozaïeken en clippen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_terrain.html">Werken met gegevens over het terrein (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_wms.html">Werken met gegevens van WMS (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_projections.html">Werken met projecties (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/georeferencing_basics.html">Topobladen en gescande kaarten voorzien van geoverwijzingen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/advanced_georeferencing.html">Geo-verwijzingen voor satellietbeelden (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/digitizing_basics.html">Kaartgegevens digitaliseren</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_table_joins.html">Samenvoegen van tabellen uitvoeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_joins.html">Ruimtelijke samenvoegingen uitvoeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_queries.html">Ruimtelijke query’s uitvoeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/nearest_neighbor_analysis.html">Analyse Nearest Neighbor (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/sampling_raster_data.html">Monsters nemen van rastergegevens met behulp van punten of polygonen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_raster_area.html">Rastergebied berekenen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/creating_heatmaps.html">Heatmaps maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/animating_time_series.html">Geanimeerde gegevens tijdreeks (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/handling_invalid_geometries.html">Ongeldige geometrieën afhandelen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/advanced_raster_analysis.html">Gevorderde rasteranalyses (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/interpolating_point_data.html">Interpoleren van puntgegevens</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Massa verwerken met behulp van Framework Processing (QGIS 3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Complexe werkstromen automatiseren met behulp van Grafische modellen bouwen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Maken van kaarten automatiseren met Atlas van afdruklay-out (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/multi_criteria_overlay.html">Multi Criteria Overlay Analyse (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_network_analysis.html">Basis netwerk visualisatie en routeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/origin_destination_matrix.html">Dichtstbijzijnde faciliteit zoeken met Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/service_area_analysis.html">Analyse Servicegebied met Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/travel_time_analysis.html">Reistijd-analyse met Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/areal_mean_rainfall.html">Berekenen gemiddelde regenval voor gebied (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/colorized_river_basin_map.html">Een gekleurde rivierbekken-kaart maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/creating_landuse_map.html">Een kaart voor gebruik van land maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_intersection_density.html">Dichtheid van straatkruisingen berekenen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/landuse_buffer.html">Bufferzones voor landgebruik bepalen  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/solidwaste_mapping.html">In kaart brengen volumes afvalverwerking (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/getting_started_with_pyqgis.html">Beginnen met programmeren in Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_algorithms_pyqgis.html">Algoritmes van Processing uitvoeren via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/custom_python_functions.html">Aangepaste Python expressie-functies gebruiken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Python-scripts schrijven voor framework Processing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/building_a_python_plugin.html">Een plug-in in Python bouwen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_plugin.html">Een plug-in voor Processing bouwen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Taken voor QGIS uitvoeren en in schema zetten</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/web_mapping_with_qgis2web.html">In kaart brengen op het web met QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Basiskaarten maken met QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/using_plugins.html">Plug-ins gebruiken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Zoeken en downloaden van gegevens van OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">QGIS bronnen om te leren</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Gebruik van gegevens</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Massa verwerken met behulp van Framework Processing (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="performing-table-joins-pyqgis">
<h1>Samenvoegen van tabellen uitvoeren (PyQGIS)<a class="headerlink" href="#performing-table-joins-pyqgis" title="Permalink to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Waarschuwing</p>
<p>This tutorial is now obsolete. The preferred way to do table joins via pyqgis is to run the <code class="docutils literal notranslate"><span class="pre">native:joinattributestable</span></code> algorithm via Python. See details at <a class="reference internal" href="3/processing_algorithms_pyqgis.html"><span class="doc">Algoritmes van Processing uitvoeren via Python (QGIS3)</span></a>.</p>
</div>
<p>Deze handleiding laat zien hoe scripten in  Python te gebruiken in QGIS (PyQGIS) om tabellen samen te voegen en een graduele stijl toe te passen op de resulterende laag. Deze handleiding repliceert de stappen van de handleiding <a class="reference internal" href="performing_table_joins.html"><span class="doc">Samenvoegen van tabellen uitvoeren</span></a> waarbij alleen scripten in Python wordt gebruikt.</p>
<section id="overview-of-the-task">
<h2>Overzicht van de taak<a class="headerlink" href="#overview-of-the-task" title="Permalink to this heading">¶</a></h2>
<p>Bekijk de handleiding <a class="reference internal" href="performing_table_joins.html"><span class="doc">Samenvoegen van tabellen uitvoeren</span></a> voor het overzicht.</p>
<section id="other-skills-you-will-learn">
<h3>Andere vaardigheden die u zult leren<a class="headerlink" href="#other-skills-you-will-learn" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Gezipte lagen laden in QGIS via Python.</p></li>
<li><p>QgsGraduatedSymbolRendererV2 gebruiken om een graduele stijl toe te passen op een vectorlaag.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>De gegevens ophalen<a class="headerlink" href="#get-the-data" title="Permalink to this heading">¶</a></h2>
<p>Download de volgende bestanden naar uw computer.</p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/tl_2013_06_tract.zip">tl_2013_06_tract.zip</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ca_tracts_pop.csv">ca_tracts_pop.csv</a></p>
<p><a class="reference external" href="http://www.qgistutorials.com/downloads/ca_tracts_pop.csvt">ca_tracts_pop.csvt</a></p>
<p>Gegevensbron <a class="reference internal" href="credits.html#tiger" id="id1"><span>[TIGER]</span></a> <a class="reference internal" href="credits.html#uscensus" id="id2"><span>[USCENSUS]</span></a></p>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Permalink to this heading">¶</a></h2>
<p>U kunt de volgende opdrachten typen in de <span class="guilabel">Python Console</span> of de ingebouwde <span class="guilabel">Editor</span> in QGIS.</p>
<ol class="arabic simple">
<li><p>Laad het shapefile. Het Census Tracts-bestand is een zip-bestand dat het shapefile bevat. Waar we het kunnen uitpakken en het shapefile laden, heeft de OGR- provider de mogelijkheid om het zip-bestand direct te laden via een Virtual Filesystem. Door <code class="docutils literal notranslate"><span class="pre">/vsizip/</span></code> toe te voegen aan het pad, kunnen we toegang verkrijgen tot het shapefile dat is opgenomen in het zip-archief.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Notitie</p>
<p>De zip_uri zou moeten beginnen met <code class="docutils literal notranslate"><span class="pre">/vsizip//</span></code> op systemen van Linux en Mac. (Let op de extra /)</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">zip_uri</span> <span class="o">=</span> <span class="s1">&#39;/vsizip/C:/Users/Ujaval/Downloads/tl_2013_06_tract.zip&#39;</span>
<span class="n">shp</span> <span class="o">=</span>  <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">zip_uri</span><span class="p">,</span> <span class="s1">&#39;tl_2013_06_tract&#39;</span><span class="p">,</span> <span class="s1">&#39;ogr&#39;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/1199.png" class="align-center" src="../_images/1199.png" />
<ol class="arabic simple" start="2">
<li><p>Laad het CSV-bestand. Omdat het CSV-bestand geen ruimtelijke gegevens bevat, laden we het als een tabel met behulp van de provider <code class="docutils literal notranslate"><span class="pre">tekstgescheiden</span></code>.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">csv_uri</span> <span class="o">=</span> <span class="s1">&#39;file:///C:/Users/Ujaval/Downloads/ca_tracts_pop.csv?delimiter=,&#39;</span>
<span class="n">csv</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">csv_uri</span><span class="p">,</span> <span class="s1">&#39;ca_tracts_pop&#39;</span><span class="p">,</span> <span class="s1">&#39;delimitedtext&#39;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">csv</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/2163.png" class="align-center" src="../_images/2163.png" />
<ol class="arabic simple" start="3">
<li><p>De samenvoeging van de tabellen maken. Samenvoegingen van tabellen in QGIS worden uitgevoerd met behulp van het object <code class="docutils literal notranslate"><span class="pre">QgsVectorJoinInfo</span></code>. We dienen het veld <code class="docutils literal notranslate"><span class="pre">GEO.id2</span></code> van de CSV-laag te specificeren als het <span class="guilabel">Join Field</span> en het veld <code class="docutils literal notranslate"><span class="pre">GEOID</span></code> uit de laag van het shapefile als het <span class="guilabel">Target Field</span>. Als u eenmaal de volgende heeft uitgevoerd, zal de laag van het shapefile aanvullende attributen hebben die zijn samengevoegd vanuit de CSV-laag.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Notitie</p>
<p>Een veel voorkomende valkuil bij het gebruiken van QgsVectorJoinInfo is dat beide lagen moeten zijn geladen in de QgsMapLayerRegistry - anders zal de samenvoeging niet werken.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">shpField</span><span class="o">=</span><span class="s1">&#39;GEOID&#39;</span>
<span class="n">csvField</span><span class="o">=</span><span class="s1">&#39;GEO.id2&#39;</span>
<span class="n">joinObject</span> <span class="o">=</span> <span class="n">QgsVectorJoinInfo</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinLayerId</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinFieldName</span> <span class="o">=</span> <span class="n">csvField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">targetFieldName</span> <span class="o">=</span> <span class="n">shpField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">memoryCache</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">shp</span><span class="o">.</span><span class="n">addJoin</span><span class="p">(</span><span class="n">joinObject</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/3103.png" class="align-center" src="../_images/3103.png" />
<ol class="arabic simple" start="4">
<li><p>Een gemakkelijker - en aanbevolen manier van het bereiken van hetzelfde is via het Framework Processing. U kunt het algoritme <code class="docutils literal notranslate"><span class="pre">qgis:joinattributestable</span></code> aanroepen en een samengevoegde laag maken.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Notitie</p>
<p>We gebruiken de methode <code class="docutils literal notranslate"><span class="pre">processing.runandload()</span></code> om het algoritme uit te voeren in plaats van het meer algemene <code class="docutils literal notranslate"><span class="pre">processing.runalg()</span></code>. Omdat we de resulterende, samengevoegde laag willen laden in QGIS, is <code class="docutils literal notranslate"><span class="pre">processing.runandload()</span></code> een betere kueze.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">processing</span>
<span class="n">shpField</span><span class="o">=</span><span class="s1">&#39;GEOID&#39;</span>
<span class="n">csvField</span><span class="o">=</span><span class="s1">&#39;GEO.id2&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">runandload</span><span class="p">(</span><span class="s1">&#39;qgis:joinattributestable&#39;</span><span class="p">,</span> <span class="n">shp</span><span class="p">,</span> <span class="n">csv</span><span class="p">,</span> <span class="n">shpField</span><span class="p">,</span> <span class="n">csvField</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/465.png" class="align-center" src="../_images/465.png" />
<ol class="arabic simple" start="5">
<li><p>We zullen bij de originele samenvoeging met behulp van <code class="docutils literal notranslate"><span class="pre">QgsVectorJoinInfo</span></code> blijven voor de rest van de handleiding. Nu is het tijd om een graduele stijl toe te passen op de samengevoegde laag. De veldnaam voor de bevolking in de samengevoegde laag is <code class="docutils literal notranslate"><span class="pre">ca_tracts_pop_D001</span></code>. We zullen een renderer Gradueel toepassen met behulp van de klasse <code class="docutils literal notranslate"><span class="pre">QgsGraduatedSymbolRendererV2</span></code> in de modus <code class="docutils literal notranslate"><span class="pre">Kwantiel</span></code>. Bekijk <a class="reference internal" href="performing_table_joins.html"><span class="doc">Samenvoegen van tabellen uitvoeren</span></a> voor de kleuren en bereiken die we moeten gebruiken.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span>

<span class="n">myColumn</span> <span class="o">=</span> <span class="s1">&#39;ca_tracts_pop_D001 &#39;</span>
<span class="n">myRangeList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">myOpacity</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ranges</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">myMin1</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">myMax1</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myLabel1</span> <span class="o">=</span> <span class="s1">&#39;Group 1&#39;</span>
<span class="n">myColor1</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#f7fbff&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin1</span><span class="p">,</span> <span class="n">myMax1</span><span class="p">,</span> <span class="n">myLabel1</span><span class="p">,</span> <span class="n">myColor1</span><span class="p">))</span>

<span class="n">myMin2</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myMax2</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myLabel2</span> <span class="o">=</span> <span class="s1">&#39;Group 2&#39;</span>
<span class="n">myColor2</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#c7dcef&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin2</span><span class="p">,</span> <span class="n">myMax2</span><span class="p">,</span> <span class="n">myLabel2</span><span class="p">,</span> <span class="n">myColor2</span><span class="p">))</span>

<span class="n">myMin3</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myMax3</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myLabel3</span> <span class="o">=</span> <span class="s1">&#39;Group 3&#39;</span>
<span class="n">myColor3</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#72b2d7&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin3</span><span class="p">,</span> <span class="n">myMax3</span><span class="p">,</span> <span class="n">myLabel3</span><span class="p">,</span> <span class="n">myColor3</span><span class="p">))</span>

<span class="n">myMin4</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myMax4</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myLabel4</span> <span class="o">=</span> <span class="s1">&#39;Group 4&#39;</span>
<span class="n">myColor4</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#2878b8&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin4</span><span class="p">,</span> <span class="n">myMax4</span><span class="p">,</span> <span class="n">myLabel4</span><span class="p">,</span> <span class="n">myColor4</span><span class="p">))</span>

<span class="n">myMin5</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myMax5</span> <span class="o">=</span> <span class="mf">37452.0</span>
<span class="n">myLabel5</span> <span class="o">=</span> <span class="s1">&#39;Group 5&#39;</span>
<span class="n">myColor5</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#08306b&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin5</span><span class="p">,</span> <span class="n">myMax5</span><span class="p">,</span> <span class="n">myLabel5</span><span class="p">,</span> <span class="n">myColor5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">,</span> <span class="n">myColor</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
  <span class="n">mySymbol</span> <span class="o">=</span> <span class="n">QgsSymbolV2</span><span class="o">.</span><span class="n">defaultSymbol</span><span class="p">(</span><span class="n">shp</span><span class="o">.</span><span class="n">geometryType</span><span class="p">())</span>
  <span class="n">mySymbol</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">myColor</span><span class="p">)</span>
  <span class="n">mySymbol</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="n">myOpacity</span><span class="p">)</span>
  <span class="n">myRange</span> <span class="o">=</span> <span class="n">QgsRendererRangeV2</span><span class="p">(</span><span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">mySymbol</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">)</span>
  <span class="n">myRangeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myRange</span><span class="p">)</span>

<span class="n">myRenderer</span> <span class="o">=</span> <span class="n">QgsGraduatedSymbolRendererV2</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">myRangeList</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="n">QgsGraduatedSymbolRendererV2</span><span class="o">.</span><span class="n">Quantile</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setClassAttribute</span><span class="p">(</span><span class="n">myColumn</span><span class="p">)</span>

<span class="n">shp</span><span class="o">.</span><span class="n">setRendererV2</span><span class="p">(</span><span class="n">myRenderer</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/559.png" class="align-center" src="../_images/559.png" />
<ol class="arabic simple" start="6">
<li><p>Typen van de code in de Python Console is nuttig voor kleine taken, maar het is eenvoudiger de ingebouwde <span class="guilabel">Editor</span> te gebruiken. U kunt het volledige script kopiëren naar de <span class="guilabel">Editor</span> en klikken op <span class="guilabel">Run</span>. Al het script is voltooid, zou u een samenvoeging van tabellen hebben gemaakt en de resulterende laag hebben opgemaakt, zonder handmatige stappen.</p></li>
</ol>
<img alt="../_images/657.png" class="align-center" src="../_images/657.png" />
<p>Hieronder staat, als referentie, het volledige bestand <code class="docutils literal notranslate"><span class="pre">join_attributes.py</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span>
<span class="n">zip_uri</span> <span class="o">=</span> <span class="s1">&#39;/vsizip/C:/Users/Ujaval/Downloads/tl_2013_06_tract.zip/tl_2013_06_tract.shp&#39;</span>
<span class="n">shp</span> <span class="o">=</span>  <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">zip_uri</span><span class="p">,</span> <span class="s1">&#39;tl_2013_06_tract&#39;</span><span class="p">,</span> <span class="s1">&#39;ogr&#39;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>

<span class="n">csv_uri</span> <span class="o">=</span> <span class="s2">&quot;file:///C:/Users/Ujaval/Downloads/ca_tracts_pop.csv?delimiter=,&quot;</span>
<span class="n">csv</span> <span class="o">=</span> <span class="n">QgsVectorLayer</span><span class="p">(</span><span class="n">csv_uri</span><span class="p">,</span> <span class="s2">&quot;ca_tracts_pop&quot;</span><span class="p">,</span> <span class="s2">&quot;delimitedtext&quot;</span><span class="p">)</span>
<span class="n">QgsMapLayerRegistry</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span><span class="o">.</span><span class="n">addMapLayer</span><span class="p">(</span><span class="n">csv</span><span class="p">)</span>

<span class="n">shpField</span><span class="o">=</span><span class="s1">&#39;GEOID&#39;</span>
<span class="n">csvField</span><span class="o">=</span><span class="s1">&#39;GEO.id2&#39;</span>
<span class="n">joinObject</span> <span class="o">=</span> <span class="n">QgsVectorJoinInfo</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinLayerId</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">joinFieldName</span> <span class="o">=</span> <span class="n">csvField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">targetFieldName</span> <span class="o">=</span> <span class="n">shpField</span>
<span class="n">joinObject</span><span class="o">.</span><span class="n">memoryCache</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">shp</span><span class="o">.</span><span class="n">addJoin</span><span class="p">(</span><span class="n">joinObject</span><span class="p">)</span>

<span class="n">myColumn</span> <span class="o">=</span> <span class="s1">&#39;ca_tracts_pop_D001 &#39;</span>
<span class="n">myRangeList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">myOpacity</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">ranges</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">myMin1</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">myMax1</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myLabel1</span> <span class="o">=</span> <span class="s1">&#39;Group 1&#39;</span>
<span class="n">myColor1</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#f7fbff&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin1</span><span class="p">,</span> <span class="n">myMax1</span><span class="p">,</span> <span class="n">myLabel1</span><span class="p">,</span> <span class="n">myColor1</span><span class="p">))</span>

<span class="n">myMin2</span> <span class="o">=</span> <span class="mf">3157.2</span>
<span class="n">myMax2</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myLabel2</span> <span class="o">=</span> <span class="s1">&#39;Group 2&#39;</span>
<span class="n">myColor2</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#c7dcef&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin2</span><span class="p">,</span> <span class="n">myMax2</span><span class="p">,</span> <span class="n">myLabel2</span><span class="p">,</span> <span class="n">myColor2</span><span class="p">))</span>

<span class="n">myMin3</span> <span class="o">=</span> <span class="mf">4019.0</span>
<span class="n">myMax3</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myLabel3</span> <span class="o">=</span> <span class="s1">&#39;Group 3&#39;</span>
<span class="n">myColor3</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#72b2d7&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin3</span><span class="p">,</span> <span class="n">myMax3</span><span class="p">,</span> <span class="n">myLabel3</span><span class="p">,</span> <span class="n">myColor3</span><span class="p">))</span>

<span class="n">myMin4</span> <span class="o">=</span> <span class="mf">4865.8</span>
<span class="n">myMax4</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myLabel4</span> <span class="o">=</span> <span class="s1">&#39;Group 4&#39;</span>
<span class="n">myColor4</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#2878b8&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin4</span><span class="p">,</span> <span class="n">myMax4</span><span class="p">,</span> <span class="n">myLabel4</span><span class="p">,</span> <span class="n">myColor4</span><span class="p">))</span>

<span class="n">myMin5</span> <span class="o">=</span> <span class="mf">5996.4</span>
<span class="n">myMax5</span> <span class="o">=</span> <span class="mf">37452.0</span>
<span class="n">myLabel5</span> <span class="o">=</span> <span class="s1">&#39;Group 5&#39;</span>
<span class="n">myColor5</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QColor</span><span class="p">(</span><span class="s1">&#39;#08306b&#39;</span><span class="p">)</span>
<span class="n">ranges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">myMin5</span><span class="p">,</span> <span class="n">myMax5</span><span class="p">,</span> <span class="n">myLabel5</span><span class="p">,</span> <span class="n">myColor5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">,</span> <span class="n">myColor</span> <span class="ow">in</span> <span class="n">ranges</span><span class="p">:</span>
    <span class="n">mySymbol</span> <span class="o">=</span> <span class="n">QgsSymbolV2</span><span class="o">.</span><span class="n">defaultSymbol</span><span class="p">(</span><span class="n">shp</span><span class="o">.</span><span class="n">geometryType</span><span class="p">())</span>
    <span class="n">mySymbol</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">myColor</span><span class="p">)</span>
    <span class="n">mySymbol</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="n">myOpacity</span><span class="p">)</span>
    <span class="n">myRange</span> <span class="o">=</span> <span class="n">QgsRendererRangeV2</span><span class="p">(</span><span class="n">myMin</span><span class="p">,</span> <span class="n">myMax</span><span class="p">,</span> <span class="n">mySymbol</span><span class="p">,</span> <span class="n">myLabel</span><span class="p">)</span>
    <span class="n">myRangeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myRange</span><span class="p">)</span>

<span class="n">myRenderer</span> <span class="o">=</span> <span class="n">QgsGraduatedSymbolRendererV2</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">myRangeList</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setMode</span><span class="p">(</span><span class="n">QgsGraduatedSymbolRendererV2</span><span class="o">.</span><span class="n">Quantile</span><span class="p">)</span>
<span class="n">myRenderer</span><span class="o">.</span><span class="n">setClassAttribute</span><span class="p">(</span><span class="n">myColumn</span><span class="p">)</span>

<span class="n">shp</span><span class="o">.</span><span class="n">setRendererV2</span><span class="p">(</span><span class="n">myRenderer</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      Laatste aanpassing op jan 06, 2024.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.0.1.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/performing_table_joins_pyqgis.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>