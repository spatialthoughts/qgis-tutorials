<!DOCTYPE html>

<html lang="nl" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Dichtstbijzijnde faciliteit zoeken met Origin-Destination Matrix (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css?v=0bf093e7" />
    <script src="../../_static/documentation_options.js?v=abdfb6f9"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=83e0b41b"></script>
    <link rel="search" title="Zoeken" href="../../search.html" />
    <link rel="next" title="Analyse Servicegebied met Openrouteservice (QGIS3)" href="service_area_analysis.html" />
    <link rel="prev" title="Basis netwerk visualisatie en routeren (QGIS3)" href="basic_network_analysis.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introductie</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Een kaart maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Werken met attributen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Werkbladen of CSV-bestanden importeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Basis opmaken van vectoren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Lengten van lijnen en statistieken berekenen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Basis opmaken en analyses van rasters (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Rasters mozaïeken en clippen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Werken met gegevens over het terrein (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Werken met gegevens van WMS (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Werken met projecties (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Topobladen en gescande kaarten voorzien van geoverwijzingen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Geo-verwijzingen voor satellietbeelden (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Kaartgegevens digitaliseren</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Samenvoegen van tabellen uitvoeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Ruimtelijke samenvoegingen uitvoeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Ruimtelijke query’s uitvoeren (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Analyse Nearest Neighbor (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Monsters nemen van rastergegevens met behulp van punten of polygonen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Rastergebied berekenen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Heatmaps maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Geanimeerde gegevens tijdreeks (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Ongeldige geometrieën afhandelen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Gevorderde rasteranalyses (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpoleren van puntgegevens</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Massa verwerken met behulp van Framework Processing (QGIS 3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_graphical_modeler.html">Complexe werkstromen automatiseren met behulp van Grafische modellen bouwen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Maken van kaarten automatiseren met Atlas van afdruklay-out (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multi Criteria Overlay Analyse (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector_styling_expressions.html">Basis filteren en opmaken met expressies (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="block_world_styling.html">Een geblokte kaart van de wereld maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="river_styling_expressions.html">Styling a River Network with Expressions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Basis netwerk visualisatie en routeren (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Dichtstbijzijnde faciliteit zoeken met Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Analyse Servicegebied met Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Reistijd-analyse met Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Berekenen gemiddelde regenval voor gebied (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="colorized_river_basin_map.html">Een gekleurde rivierbekken-kaart maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_landuse_map.html">Een kaart voor gebruik van land maken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Dichtheid van straatkruisingen berekenen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="landuse_buffer.html">Bufferzones voor landgebruik bepalen  (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidwaste_mapping.html">In kaart brengen volumes afvalverwerking (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Beginnen met programmeren in Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Algoritmes van Processing uitvoeren via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Aangepaste Python expressie-functies gebruiken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Python-scripts schrijven voor framework Processing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Een plug-in in Python bouwen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Een plug-in voor Processing bouwen (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Taken voor QGIS uitvoeren en in schema zetten</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">In kaart brengen op het web met QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Basiskaarten maken met QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Plug-ins gebruiken (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Zoeken en downloaden van gegevens van OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">QGIS bronnen om te leren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Gebruik van gegevens</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Massa verwerken met behulp van Framework Processing (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="basic_network_analysis.html" title="Previous Chapter: Basis netwerk visualisatie en routeren (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Basis netwerk...</span>
    </a>
  </li>
  <li>
    <a href="service_area_analysis.html" title="Next Chapter: Analyse Servicegebied met Openrouteservice (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Analyse Servi... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="locating-nearest-facility-with-origin-destination-matrix-qgis3">
<h1>Dichtstbijzijnde faciliteit zoeken met Origin-Destination Matrix (QGIS3)<a class="headerlink" href="#locating-nearest-facility-with-origin-destination-matrix-qgis3" title="Link to this heading">¶</a></h1>
<p>In de vorige handleiding, <a class="reference internal" href="basic_network_analysis.html"><span class="doc">Basis netwerk visualisatie en routeren (QGIS3)</span></a>, leerden we hoe een netwerk te bouwen en het kortste pad tussen 2 punten te berekenen. We kunnen die techniek ook toepassen voor verschillende typen op netwerken gebaseerde analyses. Een van die toepassingen is om de <strong>Origin-Destination Matrix</strong> of <strong>OD Matrix</strong> te berekenen. Gegeven een set van punten van origine en een andere set voor bestemmingspunten kunnen we het kortste pad berekenen tussen elke paar van origine-bestemming en de reisafstand/tijd daartussen berekenen. Een dergelijke analyse is nuttig om de dichtstbijzijnde faciliteit tot een bepaald punt te lokaliseren. Een logistiek bedrijf zou, bijvoorbeeld, deze analyse kunnen gebruiken om de dichtstbijzijnde opslagplaats voor hun klanten te zoeken om bestelroutes te optimaliseren. Hier gebruiken we het algoritme Distance Matrix uit de plug-in <strong>QGIS Network Analysis Toolbox (QNEAT3)</strong> om de dichtstbijzijnde gezondheidsfaciliteit voor elk adres in de stad te zoeken.</p>
<div class="admonition note">
<p class="admonition-title">Notitie</p>
<p>Deze handleiding laat zien hoe uw eigen gegevens voor een netwerk te gebruiken om een origin-destination matrix te berekenen. Als u geen gegevens heeft voor een eigen netwerk kunt u de <strong>ORS Tools Plugin</strong> en het algoritme <span class="menuselection">ORS Tools ‣ Matrix ‣  Matrix from Layers</span> gebruiken om een soortgelijke analyse uit te voeren met behulp van gegevens van OpenStreetMap. Bekijk <a class="reference internal" href="service_area_analysis.html"><span class="doc">Analyse Servicegebied met Openrouteservice (QGIS3)</span></a> om te leren hoe de plug-in ORS Tools te gebruiken.</p>
</div>
<section id="overview-of-the-task">
<h2>Overzicht van de taak<a class="headerlink" href="#overview-of-the-task" title="Link to this heading">¶</a></h2>
<p>We zullen 2 lagen nemen voor Washington DC - een met punten die adressen weergeven en een andere met punten die faciliteiten voor geestelijke gezondheid weergeven - en de faciliteit zoeken met de minste reisafstand vanaf elk adres.</p>
<section id="other-skills-you-will-learn">
<h3>Andere vaardigheden die u zult leren<a class="headerlink" href="#other-skills-you-will-learn" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Een willekeurig monster uit een puntenlaag uitnemen.</p></li>
<li><p>Virtuele lagen gebruiken om een query van SQL uit te voeren op een laag van QGIS.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>De gegevens ophalen<a class="headerlink" href="#get-the-data" title="Link to this heading">¶</a></h2>
<p>De overheid van het district of Columbia deelt gratis honderden gegevenssets in de <a class="reference external" href="https://opendata.dc.gov/">Open Data Catalog</a>.</p>
<p>Download de volgende gegevenslagen als Shapefiles.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://opendata.dc.gov/datasets/roadway-block">Roadway Block</a></p></li>
<li><p><a class="reference external" href="https://opendata.dc.gov/datasets/address-points">Address Points</a></p></li>
<li><p><a class="reference external" href="https://opendata.dc.gov/datasets/DCGIS::community-based-service-providers">Community Based Service Provider</a></p></li>
</ul>
<p>Voor het gemak kunt u direct een kopie van de gegevensset downloaden vanaf de links hieronder:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/Roadway_Block-shp.zip">Roadway_Block-shp.zip</a></p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/Address_Points.zip">Address_Points.zip</a></p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/Community_Based_Service_Providers.zip">Community Based Service Provider.zip</a></p>
<p>Gegevensbron: <a class="reference internal" href="../credits.html#dcopendata" id="id1"><span>[DCOPENDATA]</span></a></p>
</section>
<section id="setup">
<h2>Instellen<a class="headerlink" href="#setup" title="Link to this heading">¶</a></h2>
<p>Ga naar <span class="menuselection">Plug-ins ‣ Plug-ins beheren en installeren</span>. Selecteer :guilabel:` Alles` om te zoeken naar de plug-in <strong>QNEAT3</strong> en installeer die. Klik op <span class="guilabel">Close</span>.</p>
<img alt="../../_images/setup11.png" class="align-center" src="../../_images/setup11.png" />
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Zoek het bestand <code class="docutils literal notranslate"><span class="pre">Community_Based_Service_Providers.zip</span></code>, vergroot het en voeg <code class="docutils literal notranslate"><span class="pre">Community_Based_Service_Providers.shp</span></code> toe aan het kaartvenster. We zullen alleen die centra selecteren die faciliteiten voor volwassenen verschaffen. Klik met rechts op de laag <code class="docutils literal notranslate"><span class="pre">Community_Based_Service_Providers.shp</span></code> en selecteer <span class="guilabel">Filter</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1105.png" class="align-center" src="../../_images/1105.png" />
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Het zal een dialoogvenster voor de <span class="guilabel">Querybouwer</span> openen. Voer de volgende query in bij de :guilabel:` Filter-expressie`  Klik op <span class="guilabel">Uitvoeren</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;PROVIDER_T&quot;  IN (&#39;Adult&#39;,&#39;Adult &amp; Child&#39;)
</pre></div>
</div>
<img alt="../../_images/2100.png" class="align-center" src="../../_images/2100.png" />
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Zoek vervolgens naar het bestand <code class="docutils literal notranslate"><span class="pre">Roadway_Block.zip</span></code>, vergroot het en voeg <code class="docutils literal notranslate"><span class="pre">Roadway_Block.shp</span></code> toe. Zoek op dezelfde wijze naar het bestand <code class="docutils literal notranslate"><span class="pre">Address_Points.zip</span></code>, vergroot het en voeg het bestand <code class="docutils literal notranslate"><span class="pre">Address_Points.shp</span></code> toe. U zult heel veel punten zien in de stad. Elke punt geeft een geldig adres weer. We zullen nu 1000 willekeurige punten selecteren. Deze techniek wordt random sampling (willekeurige monsterneming) genoemd. Ga naar <span class="menuselection">Processing ‣ Toolbox</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/346.png" class="align-center" src="../../_images/346.png" />
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Zoek en lokaliseer het algoritme <span class="menuselection">Vector selectie ‣ Willekeurig uitnemen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/346.png" class="align-center" src="../../_images/346.png" />
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Selecteer <code class="docutils literal notranslate"><span class="pre">Address_Points</span></code> als de <span class="guilabel">Invoerlaag</span>, <code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">feature</span></code> als de <span class="guilabel">Methode</span> en voer  in <code class="docutils literal notranslate"><span class="pre">1000</span></code> in het <span class="guilabel">Aantal/percentage objecten</span>. In het veld <span class="guilabel">Uitgenomen (willekeurig)</span> kies de <code class="docutils literal notranslate"><span class="pre">…</span></code>  en klik <span class="guilabel">Opslaan als bestand</span>. Kies nu de map en voer als naam in <code class="docutils literal notranslate"><span class="pre">address_point_subset.shp</span></code> en klik op <span class="guilabel">Uitvoeren</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/519.png" class="align-center" src="../../_images/519.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Notitie</p>
<p>Omdat het algoritme 1000 willekeurige punten uit zal nemen uit de verstrekte gegevensset, om de exacte punten te repliceren voor deze oefening, kunt u hier <a class="reference external" href="https://www.qgistutorials.com/downloads/address_point_subset.zip">address_point_subset.zip</a> het bestand met de subset downloaden die we bij het uitvoeren van het algoritme hebben verkregen. Laad, na het downloaden, de laag <code class="docutils literal notranslate"><span class="pre">address_point_subset.shp</span></code> in QGIS.</p>
</div>
<ol class="arabic simple" start="6">
<li><p>Een nieuwe laag <code class="docutils literal notranslate"><span class="pre">address_point_subset</span></code> zal worden toegevoegd aan het paneel <span class="guilabel">Lagen</span>, u kunt de zichtbaarheid voor de adrespuntenlaag <code class="docutils literal notranslate"><span class="pre">Address_Points</span></code> uitschakelen. Laten we deze laag hernoemen naar <code class="docutils literal notranslate"><span class="pre">origin_points</span></code>. Klik met rechts op de laag <code class="docutils literal notranslate"><span class="pre">address_point_subset</span></code> en selecteer <span class="guilabel">Laag hernoemen</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/619.png" class="align-center" src="../../_images/619.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Similarly, rename the <code class="docutils literal notranslate"><span class="pre">Community_Based_Service_Provider</span></code> layers representing the health facilities as <code class="docutils literal notranslate"><span class="pre">destination_points</span></code>. Naming the layers this way makes it easy to identify them in subsequent processing. Further we will open processing toolbox to create the distance matrix using origin and destination layers.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/718.png" class="align-center" src="../../_images/718.png" />
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Zoek naar het algoritme <span class="menuselection">QNEAT3 ‣ Distance matrices ‣ OD Matrix from Layers as Line (m:n)</span>. Als u dit algoritme niet ziet in de Toolbox, overtuig u er dan van dat u de plug-in <strong>QNEAT3</strong> hebt geïnstalleerd.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/818.png" class="align-center" src="../../_images/818.png" />
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>This algorithm helps find the distances along with the network between selected origin and destination layers. Select <code class="docutils literal notranslate"><span class="pre">Roadway_Block</span></code> as the <span class="guilabel">Network layer</span>. Select <code class="docutils literal notranslate"><span class="pre">origin_points</span></code> as the <span class="guilabel">From-Points layer</span> and <code class="docutils literal notranslate"><span class="pre">OBJECTID</span></code> as the <span class="guilabel">Unique Point ID field</span>. Similarly, set <code class="docutils literal notranslate"><span class="pre">destination_points</span></code> as the <span class="guilabel">To-Points Layer</span> and <code class="docutils literal notranslate"><span class="pre">OBJECTID</span></code> as  the <span class="guilabel">Unique Point ID field</span>. Set the <span class="guilabel">Optimization Criterion</span> as <code class="docutils literal notranslate"><span class="pre">Shortest</span> <span class="pre">Path</span> <span class="pre">(distance</span> <span class="pre">optimization)</span></code>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/918.png" class="align-center" src="../../_images/918.png" />
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>As many streets in the network are one-way, we need to set the <span class="guilabel">Advanced parameters</span> to specify the direction. See <a class="reference internal" href="basic_network_analysis.html"><span class="doc">Basis netwerk visualisatie en routeren (QGIS3)</span></a> for more details on how these attributes are structured. We also have an option to select geometry style of the generated matrix. We are having a road network with direction information so we can generate matrix by folling the route. Choose <code class="docutils literal notranslate"><span class="pre">Matrix</span> <span class="pre">geometry</span> <span class="pre">follows</span> <span class="pre">routes</span></code>. Choose <code class="docutils literal notranslate"><span class="pre">SUMMARYDIR</span></code> as the <span class="guilabel">Direction field</span>. Enter <code class="docutils literal notranslate"><span class="pre">OB</span></code> as the <span class="guilabel">Value for the forward direction</span>, <code class="docutils literal notranslate"><span class="pre">IB</span></code> as the <span class="guilabel">Value for backward direction</span>, and <code class="docutils literal notranslate"><span class="pre">BD</span></code> as the <span class="guilabel">Value for the both direction</span>. Set the <span class="guilabel">Topology tolerance</span> as <code class="docutils literal notranslate"><span class="pre">0.0000150</span></code>. Keep other options to their default values and click <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1025.png" class="align-center" src="../../_images/1025.png" />
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>A new table layer called <code class="docutils literal notranslate"><span class="pre">Output</span> <span class="pre">OD</span> <span class="pre">Matrix</span></code> will be added to the <span class="guilabel">Layers</span> panel. Right-click and select <span class="guilabel">Open Attributes Table</span>. You will see that the table contains <em>67000</em> rows. We had 67 origin points and 1000 destination points - so the output contains <em>67x1000 = 67000</em> pairs of origins and destination. The <code class="docutils literal notranslate"><span class="pre">total_cost</span></code> column contains distance in meters between each origin point to every destination point.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1128.png" class="align-center" src="../../_images/1128.png" />
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Voor deze handleiding zijn we alleen geïnteresseerd in het bestemmingspunt met de kortste afstand. We kunnen een query voor SQL maken om de bestemming met de minste <code class="docutils literal notranslate"><span class="pre">total_cost</span></code> uit alle bestemmingen te kiezen. Ga naar <span class="menuselection">Processing ‣ Toolbox</span>. Zoek naar en lokaliseer het algoritme <span class="menuselection">Vector algemeen ‣ Execute SQL</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1226.png" class="align-center" src="../../_images/1226.png" />
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>In <span class="guilabel">Databronnen voor invoer</span> selecteer <code class="docutils literal notranslate"><span class="pre">...</span></code> en selecteer <span class="guilabel">Output OD Matrix</span> en, klik op <span class="guilabel">OK</span>. Klik nu in <span class="guilabel">Sommeren</span> onder <span class="guilabel">SQL query</span>. Voer de volgende query in het dialoogvak <span class="guilabel">SQL query</span> in. Voer <code class="docutils literal notranslate"><span class="pre">geometry</span></code> in als het <span class="guilabel">Geometrie-veld</span> en selecteer <code class="docutils literal notranslate"><span class="pre">Lijn</span></code> als het <span class="guilabel">Geometrie-type</span>. Klik op <span class="guilabel">Run</span>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>select origin_id, destination_id, min(total_cost) as shortest_distance, geometry
from input1 group by origin_id
</pre></div>
</div>
<img alt="../../_images/1324.png" class="align-center" src="../../_images/1324.png" />
</div></blockquote>
<ol class="arabic simple" start="14">
<li><p>Een nieuwe virtuele laag <code class="docutils literal notranslate"><span class="pre">SQL-uitvoer</span></code> zal worden toegevoegd aan het paneel <span class="guilabel">Lagen</span>. Deze laag bevat de resultaten van onze analyse. De dichtstbijzijnde faciliteit voor elk van de 1000 punten van origine.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1422.png" class="align-center" src="../../_images/1422.png" />
</div></blockquote>
</section>
</section>





  <!-- Comment Section Powered by utterances -->
<div id="comments">
  <hr />
  <p>If you want to give feedback or share your experience with this tutorial, please comment below. (requires GitHub account)</p>
<script src="https://utteranc.es/client.js"
        repo="spatialthoughts/qgis-tutorials"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023, Ujaval Gandhi.<br/>
      Laatste aanpassing op mei 01, 2024.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/origin_destination_matrix.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>