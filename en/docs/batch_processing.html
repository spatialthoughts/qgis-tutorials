<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Batch Processing using Processing Framework (QGIS2) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Data Credits" href="credits.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_attributes.html">Working with Attributes (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_vector_styling.html">Basic Vector Styling (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_line_lengths.html">Calculating Line Lengths and Statistics (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_styling_and_analysis.html">Basic Raster Styling and Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/working_with_projections.html">Working with Projections (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/advanced_georeferencing.html">Georeferencing Aerial Imagery (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/digitizing_basics.html">Digitizing Map Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_table_joins.html">Performing Table Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_joins.html">Performing Spatial Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/animating_time_series.html">Animating Time Series Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/advanced_raster_analysis.html">Advanced Raster Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/creating_landuse_map.html">Creating a Landuse Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="3/using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloading_osm_data.html">Searching and Downloading OpenStreetMap Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="learning_resources.html">QGIS Learning Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Data Credits</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="credits.html" title="Previous Chapter: Data Credits"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Data Credits</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="batch-processing-using-processing-framework-qgis2">
<h1>Batch Processing using Processing Framework (QGIS2)<a class="headerlink" href="#batch-processing-using-processing-framework-qgis2" title="Permalink to this heading">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A new version of this tutorial is available at <a class="reference internal" href="3/batch_processing.html"><span class="doc">Batch Processing using Processing Framework (QGIS3)</span></a></p>
</div>
<p>QGIS 2.0 introduced a new concept called <strong>Processing Framework</strong>. Previously
known as <strong>Sextante</strong>, the Processing Framework provides an environment within
QGIS to run native and third-party algorithms for processing data. It contains
a nice batch processing interface that allows one to execute an algorithm on
several layers easily. Batch processing is a useful tool that can save manual
effort and help you automate repetitive tasks.</p>
<section id="overview-of-the-task">
<h2>Overview of the task<a class="headerlink" href="#overview-of-the-task" title="Permalink to this heading">¶</a></h2>
<p>We will take several global vector layers and clip them to the extent of Africa
in a single batch command.</p>
<section id="other-skills-you-will-learn">
<h3>Other skills you will learn<a class="headerlink" href="#other-skills-you-will-learn" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Dissolve (merge) polygons from a layer that have the same attribute.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Get the data<a class="headerlink" href="#get-the-data" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="http://naturalearthdata.com">Natural Earth</a> has several global vector
layers. Download the following layers</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_0_countries.zip">Admin 0 - Countries</a></p></li>
<li><p><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_railroads.zip">Railroads</a></p></li>
<li><p><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_ports.zip">Ports</a></p></li>
<li><p><a class="reference external" href="http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_airports.zip">Airports</a></p></li>
</ul>
<p>Once downloaded, unzip and extract all the shapefiles in a single folder.</p>
<p>Data Source: <a class="reference internal" href="credits.html#naturalearth" id="id1"><span>[NATURALEARTH]</span></a></p>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Go to <span class="menuselection">Layer ‣ Add Vector Layer</span>.</p></li>
</ol>
<img alt="../_images/1156.png" class="align-center" src="../_images/1156.png" />
<ol class="arabic simple" start="2">
<li><p>Browse to the downloaded Admin 0 Countries shapefile
<code class="docutils literal notranslate"><span class="pre">ne_10m_admin_0_countries.shp</span></code> and click <span class="guilabel">Open</span>.</p></li>
</ol>
<img alt="../_images/2128.png" class="align-center" src="../_images/2128.png" />
<ol class="arabic simple" start="3">
<li><p>As our task is to clip the global layers to the boundary of Africa, we need
to first prepare a layer containg a polygon for the entire continent. The
countries layer has an attribute called <strong>CONTINENT</strong>. We can use a
geoprocessing concept called <em>Dissolve</em> to merge all countries that have the
same continent value and merge them to a single polygon.</p></li>
</ol>
<img alt="../_images/366.png" class="align-center" src="../_images/366.png" />
<ol class="arabic simple" start="4">
<li><p>Open the <span class="guilabel">Dissolve</span> tool from <span class="menuselection">Vector ‣
Geoprocessing Tools ‣ Dissolve</span>.</p></li>
</ol>
<img alt="../_images/436.png" class="align-center" src="../_images/436.png" />
<ol class="arabic simple" start="5">
<li><p>Select <code class="docutils literal notranslate"><span class="pre">ne_10m_admin_0_countries</span></code> as the <span class="guilabel">Input vector layer</span>.
The <span class="guilabel">Dissolve field</span> would be <code class="docutils literal notranslate"><span class="pre">CONTINENT</span></code>. Name the output file
as <code class="docutils literal notranslate"><span class="pre">continents.shp</span></code> and  check the box next to <span class="guilabel">Add result to
convas</span>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to merge <strong>ALL</strong> polygons regardless of their attributes, you
can select <span class="guilabel">– Dissolve All –</span> as the <span class="guilabel">Dissolve field</span>.
This will combine all polygons in the layer and give you a single aggregate
polygon.</p>
</div>
<img alt="../_images/535.png" class="align-center" src="../_images/535.png" />
<ol class="arabic simple" start="6">
<li><p>The dissolve processing may take a while. Once the process finishes, you
will see the new <code class="docutils literal notranslate"><span class="pre">continent</span></code> layer added to QGIS. Use the
<span class="guilabel">Select Single Feature</span> tool from the toolbar and click on Africa
to select the polygon representing the continent.</p></li>
</ol>
<img alt="../_images/634.png" class="align-center" src="../_images/634.png" />
<ol class="arabic simple" start="7">
<li><p>Right-click the <code class="docutils literal notranslate"><span class="pre">continents</span></code> layer and select <span class="guilabel">Save Selection
As…</span>.</p></li>
</ol>
<img alt="../_images/734.png" class="align-center" src="../_images/734.png" />
<ol class="arabic simple" start="8">
<li><p>Name the output file as <code class="docutils literal notranslate"><span class="pre">africa.shp</span></code>. Since we are only interested in the
shape of the continent and not any attributes, you may check the
<span class="guilabel">Skip attribute creation</span>. Make sure the <span class="guilabel">Add saved file
to map</span> box is checked and click <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../_images/833.png" class="align-center" src="../_images/833.png" />
<ol class="arabic simple" start="9">
<li><p>Now you will have the <code class="docutils literal notranslate"><span class="pre">africa</span></code> layer loaded in QGIS containing a single
polygon for the entire continent. Now, it’s time to start our batch clip
process. Open <span class="menuselection">Processing ‣ Toolbox</span>.</p></li>
</ol>
<img alt="../_images/934.png" class="align-center" src="../_images/934.png" />
<ol class="arabic simple" start="10">
<li><p>Browse all available algorithms and find the <span class="guilabel">Clip</span> tool from
<span class="menuselection">QGIS geoalgorithms ‣ Vector overlay tools ‣ Clip</span>. You
may also use the <span class="guilabel">Search</span> box to easily find the algorithm as
well.</p></li>
</ol>
<img alt="../_images/1041.png" class="align-center" src="../_images/1041.png" />
<ol class="arabic simple" start="11">
<li><p>Right-click the <span class="guilabel">Clip</span> algorithm and select <span class="guilabel">Execure as
batch process</span>.</p></li>
</ol>
<img alt="../_images/1157.png" class="align-center" src="../_images/1157.png" />
<ol class="arabic simple" start="12">
<li><p>In the <span class="guilabel">Batch Processing</span> dialog, the first tab is
<span class="guilabel">Parameters</span> where we define out inputs. Click the
<span class="guilabel">…</span> next to the first row in the <span class="guilabel">Input layer</span> column.</p></li>
</ol>
<img alt="../_images/1244.png" class="align-center" src="../_images/1244.png" />
<ol class="arabic simple" start="13">
<li><p>Browse to the directory containing the global transportation layers that
you had downloaded. Hold the <kbd class="kbd docutils literal notranslate">Ctrl</kbd> key and select all the layers that
you want to clip. You may also use <kbd class="kbd docutils literal notranslate">Shift</kbd> or <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>-<kbd class="kbd docutils literal notranslate">A</kbd></kbd> to make
multiple selection. Click <span class="guilabel">Open</span>.</p></li>
</ol>
<img alt="../_images/1342.png" class="align-center" src="../_images/1342.png" />
<ol class="arabic simple" start="14">
<li><p>You will notice that the <span class="guilabel">Input layer</span> columns will be
auto-populated with all layers you had selected. You may use <span class="guilabel">Add
row</span> button to add more rows and define more inputs. Next, we need to
select the layer containing the boundary to clip our input layers. Click the
<span class="guilabel">…</span> button for the first row and add the <code class="docutils literal notranslate"><span class="pre">africa.shp</span></code>
<span class="guilabel">Clip layer</span>. Since the clip layer is the same for all our inputs,
you can double-click the column header <span class="guilabel">Clip layer</span> and the same
layer will be auto-filled for all the rows. Next, we need to define our
outputs.  Click the <span class="guilabel">…</span> buton next to the first row in the
<span class="guilabel">Clipped</span> column.</p></li>
</ol>
<img alt="../_images/1439.png" class="align-center" src="../_images/1439.png" />
<ol class="arabic simple" start="15">
<li><p>Browse the the directory where you want your output layers. Type the
filename as <code class="docutils literal notranslate"><span class="pre">clipped_</span></code> and click <span class="guilabel">Save</span>.</p></li>
</ol>
<img alt="../_images/1536.png" class="align-center" src="../_images/1536.png" />
<ol class="arabic simple" start="16">
<li><p>You will see a new <span class="guilabel">Autofill settings</span> dialog pop up. Select
<span class="guilabel">Fill with parameter values</span> as the <span class="guilabel">Autofill mode</span>.
Select <span class="guilabel">Parameter to use</span> as <span class="guilabel">Input layer</span>. This
setting will add the input file name to the output along with the specified
<code class="docutils literal notranslate"><span class="pre">output_</span></code> filename. This is important to ensure all the output files have
unique names and they do not overwrite each other.</p></li>
</ol>
<img alt="../_images/1634.png" class="align-center" src="../_images/1634.png" />
<ol class="arabic simple" start="17">
<li><p>Now we are ready to start the batch procesing. Click <span class="guilabel">Run</span>.</p></li>
</ol>
<img alt="../_images/1731.png" class="align-center" src="../_images/1731.png" />
<ol class="arabic simple" start="18">
<li><p>The clip algorithm will run for each of the inputs and create output files
are we have specified. Once the batch process finishes, you will see the
layers added to QGIS canvas. As you will notice, all the global layers are
properly clipped to the continent boundary that we had specified.</p></li>
</ol>
<img alt="../_images/1829.png" class="align-center" src="../_images/1829.png" />
</section>
</section>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021, Ujaval Gandhi.<br/>
      Last updated on Nov 08, 2023.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.0.1.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/batch_processing.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>