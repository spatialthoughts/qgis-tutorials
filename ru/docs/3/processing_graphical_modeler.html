<!DOCTYPE html>

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Автоматизация сложных процессов с помощью Processing Modeler (QGIS3) &#8212; QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="search" title="Поиск" href="../../search.html" />
    <link rel="next" title="Автоматизация компоновки карты с помощью инструмента создания атласа (QGIS3)" href="automating_map_creation.html" />
    <link rel="prev" title="Batch Processing using Processing Framework (QGIS3)" href="batch_processing.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="../../_static/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-B1WQ7B80XJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Введение</a></li>
<li class="toctree-l1"><a class="reference internal" href="making_a_map.html">Making a Map (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_attributes.html">Работа с атрибутами (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_vector_styling.html">Basic Vector Styling (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_line_lengths.html">Calculating Line Lengths and Statistics (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_styling_and_analysis.html">Basic Raster Styling and Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_wms.html">Working with WMS Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="working_with_projections.html">Working with Projections (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_georeferencing.html">Пространственная привязка космических снимков (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="digitizing_basics.html">Digitizing Map Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_table_joins.html">Performing Table Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_joins.html">Performing Spatial Joins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_raster_area.html">Calculating Raster Area (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="animating_time_series.html">Animating Time Series Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_raster_analysis.html">Advanced Raster Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Автоматизация сложных процессов с помощью Processing Modeler (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="automating_map_creation.html">Автоматизация компоновки карты с помощью инструмента создания атласа (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="travel_time_analysis.html">Travel Time Analysis with Uber Movement (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="processing_python_plugin.html">Building a Processing Plugin (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_plugins.html">Using Plugins (QGIS3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloading_osm_data.html">Поиск и загрузка данных OpenStreetMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../learning_resources.html">Учебные материалы по QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Источники данных</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="batch_processing.html" title="Previous Chapter: Batch Processing using Processing Framework (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Batch Process...</span>
    </a>
  </li>
  <li>
    <a href="automating_map_creation.html" title="Next Chapter: Автоматизация компоновки карты с помощью инструмента создания атласа (QGIS3)"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Автоматизация... &raquo;</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<a href="https://twitter.com/intent/follow?screen_name=spatialthoughts" class="twitter-follow-button" data-show-count="false">Follow @spatialthoughts</a>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<p>These tutorials are also available in many other languages. Please see <a href="https://www.qgistutorials.com/en/docs/introduction.html#translations" target="_blank">translations</a> page.
</p>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="automating-complex-workflows-using-processing-modeler-qgis3">
<h1>Автоматизация сложных процессов с помощью Processing Modeler (QGIS3)<a class="headerlink" href="#automating-complex-workflows-using-processing-modeler-qgis3" title="Permalink to this heading">¶</a></h1>
<p>Как правило рабочий процесс в ГИС состоит из множества шагов, каждый из которых генерирует некий промежуточный результат, используемый в последующих шагах. При этом если ваши начальные данные изменятся, либо вы сами измените значение какого-либо параметра, вам придется вручную проходить весь процесс снова от начала до конца. К счастью QGIS имеет встроенный инструмент для графического построения моделей, который поможет вам составить алгоритм рабочего процесса и запускать его одним нажатием. Помимо этого вы сможете выполнять пакетную обработку большого количества данных вашим алгоритмом.</p>
<section id="overview-of-the-task">
<h2>Обзор задачи<a class="headerlink" href="#overview-of-the-task" title="Permalink to this heading">¶</a></h2>
<p>Мы воспользуемся точечным слоем, содержащим места, где зафиксированы случаи морского пиратства, и создадим алгоритм, который будет генерировать карту плотности данных точек на гексагональной сетке.</p>
<section id="other-skills-you-will-learn">
<h3>Также в ходе работы вы получите следующие навыки<a class="headerlink" href="#other-skills-you-will-learn" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Использование равновеликой проекции и настройка системы координат проекта.</p></li>
<li><p>Применение градуированного стиля к полигональному слою.</p></li>
</ul>
</section>
</section>
<section id="get-the-data">
<h2>Исходные данные<a class="headerlink" href="#get-the-data" title="Permalink to this heading">¶</a></h2>
<p>На <a class="reference external" href="https://msi.nga.mil/NGAPortal/MSI.portal">Портале морской безопасности</a> Национального агентства геопространственной разведки опубликованы данные  обо всех случаях морского пиратства в формате <a class="reference external" href="https://msi.nga.mil/Piracy">Anti-shipping Activity Messages</a>. Загрузите <a class="reference external" href="https://msi.nga.mil/api/publications/download?key=16920958/SFH00000/ASAM_shp.zip&amp;type=download">базу данных в формате shape</a>.</p>
<p><a class="reference external" href="http://naturalearthdata.com">Natural Earth</a> содержит векторные слои глобального пространственного охвата. Загрузите архив <a class="reference external" href="https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/physical/ne_10m_land.zip">10m Physical Vectors - Land</a>, содержащий полигоны суши.</p>
<p>Также вы можете напрямую скачать необходимые слои по ссылкам ниже:</p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/ASAM_shp.zip">ASAM_shp.zip</a></p>
<p><a class="reference external" href="https://www.qgistutorials.com/downloads/ne_10m_land.zip">ne_10m_land.zip</a></p>
<p>Данные получены с сайтов <a class="reference internal" href="../credits.html#nga-msi" id="id1"><span>[NGA_MSI]</span></a> и <a class="reference internal" href="../credits.html#naturalearth" id="id2"><span>[NATURALEARTH]</span></a></p>
</section>
<section id="procedure">
<h2>Порядок действий<a class="headerlink" href="#procedure" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>В панели Браузер перейдите в директорию, куда были сохранены загруженные файлы. Откройте архив <code class="docutils literal notranslate"><span class="pre">ne_10m_land.zip</span></code> и выберите слой <code class="docutils literal notranslate"><span class="pre">ne_10m_land.shp</span></code>. Перетащите слой в окно карты. Далее откройте архив <code class="docutils literal notranslate"><span class="pre">ASAM_shp.zip</span></code>, выберите слой <code class="docutils literal notranslate"><span class="pre">asam_data_download/ASAM_events.shp</span></code> и так же перетащите его в окно карты.</p></li>
</ol>
<img alt="../../_images/1105.png" class="align-center" src="../../_images/1105.png" />
<ol class="arabic simple" start="2">
<li><p>Слой <code class="docutils literal notranslate"><span class="pre">ASAM_events.shp</span></code> не содержит информацию о проекции, поэтому необходимо выбрать ее в окне <span class="guilabel">Выбор системы координат</span>. В данном слое координаты точек имеют вид Широта/Долгота, таким образом выберите систему координат <code class="docutils literal notranslate"><span class="pre">WGS</span> <span class="pre">84</span></code> и нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/290.png" class="align-center" src="../../_images/290.png" />
<ol class="arabic simple" start="3">
<li><p>После загрузки слоя вы можете видеть точки, отражающие места, где имели место случаи пиратства. Начнем построение модели. Выберите пункт меню <span class="menuselection">Анализ данных ‣ Graphical Modeler…</span>.</p></li>
</ol>
<img alt="../../_images/339.png" class="align-center" src="../../_images/339.png" />
<ol class="arabic simple" start="4">
<li><p>В окне <span class="guilabel">Processing Modeler</span> найдите панель <span class="guilabel">Model Properties</span>. Введите <code class="docutils literal notranslate"><span class="pre">piracy</span> <span class="pre">hexbin</span></code> в поле <span class="guilabel">Имя</span> и <code class="docutils literal notranslate"><span class="pre">projects</span></code> as the <span class="guilabel">Группа</span>. Нажмите кнопку <span class="guilabel">Save</span>.</p></li>
</ol>
<img alt="../../_images/418.png" class="align-center" src="../../_images/418.png" />
<ol class="arabic simple" start="5">
<li><p>Сохраните модель под именем <code class="docutils literal notranslate"><span class="pre">piracy_hexbin</span></code>.</p></li>
</ol>
<img alt="../../_images/519.png" class="align-center" src="../../_images/519.png" />
<ol class="arabic simple" start="6">
<li><p>Теперь мы построим графическую модель нашего алгоритма. Диалог <span class="guilabel">Processing modeler</span> имеет главное окно и панель в левой его части. На левой панели найдите панель <span class="guilabel">Inputs</span>, в которой перечислены разные возможные типы исходных данных. Выберите пункт <span class="guilabel">+ Векторный слой</span> и перетащите его в главное окно.</p></li>
</ol>
<img alt="../../_images/619.png" class="align-center" src="../../_images/619.png" />
<ol class="arabic simple" start="7">
<li><p>Введите <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">Points</span></code> в поле «Имя параметра» и выберите <code class="docutils literal notranslate"><span class="pre">Точка</span></code> из списка <span class="guilabel">Тип геометрии</span>. Этот элемент будет представлять точечный слой, хранящий случаи пиратства.</p></li>
</ol>
<img alt="../../_images/718.png" class="align-center" src="../../_images/718.png" />
<ol class="arabic simple" start="8">
<li><p>Перетащите в главное окно еще один элемент <span class="guilabel">+ Vector Layer</span>. Введите <code class="docutils literal notranslate"><span class="pre">Base</span> <span class="pre">Layer</span></code> в поле <span class="guilabel">Имя параметра</span> и выберите <code class="docutils literal notranslate"><span class="pre">Полигон</span></code> из списка <span class="guilabel">Тип геометрии</span>. Этот элемент будет представлять слой «natural earth» с контурами материков.</p></li>
</ol>
<img alt="../../_images/818.png" class="align-center" src="../../_images/818.png" />
<ol class="arabic simple" start="9">
<li><p>Мы хотим сгенерировать глобальную сетку шестиугольников, при этом размер ячейки сетки не должен быть запрограммирован в самой модели. Вместо этого нам необходимо дать пользователю возможность указывать самостоятельно данный параметр, чтобы он мог экспериментировать с различными размерами ячеек без изменения всей модели. Выберите элемент <span class="guilabel">+ Число</span> и перетащите его в главное окно. Введите <code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">Size</span></code> в поле <span class="guilabel">Имя параметра</span> и нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/918.png" class="align-center" src="../../_images/918.png" />
<ol class="arabic simple" start="10">
<li><p>Теперь, когда определены все входные элементы, мы можем добавить к нашей модели пошаговые действия. Все доступные инструменты находятся на панели <span class="guilabel">Algorithms</span>. Первым шагом необходимо перепроецировать базовый слой в систему координат проекта. Воспользуйтесь строкой поиска, найдите инструмент <code class="docutils literal notranslate"><span class="pre">Перепроецировать</span> <span class="pre">слой</span></code> и перетащите его в главное окно.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Необходимость этого шага объясняется тем, что алгоритм генерации сетки требует указания координат границ сетки в системе координат проекта.</p>
</div>
<img alt="../../_images/1026.png" class="align-center" src="../../_images/1026.png" />
<ol class="arabic simple" start="11">
<li><p>В выпадающем списке <span class="guilabel">Исходный слой</span> окна <span class="guilabel">Перепроецировать слой</span> выберите <code class="docutils literal notranslate"><span class="pre">Base</span> <span class="pre">Layer</span></code>. Отметьте галочкой пункт <span class="guilabel">Использовать систему координат проекта</span>. Нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1129.png" class="align-center" src="../../_images/1129.png" />
<ol class="arabic simple" start="12">
<li><p>Теперь между элементом <span class="guilabel">+ Base Layer</span> и инструментом <span class="guilabel">Перепроецировать слой</span> появилась линия связи. Она иллюстрирует поток выполнения нашего алгоритма. Следующим шагом является создание сетки шестиугольников. Найдите инструмент <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">grid</span></code> и перетащите его в главное окно.</p></li>
</ol>
<img alt="../../_images/1227.png" class="align-center" src="../../_images/1227.png" />
<ol class="arabic simple" start="13">
<li><p>В выпадающем списке <span class="guilabel">Grid type</span> диалогового окна <span class="guilabel">Generate grid</span> выберите пункт <code class="docutils literal notranslate"><span class="pre">Hexagon</span> <span class="pre">(polygon)</span></code>. В выпадающем списке <span class="guilabel">Grid extent</span> выберите пункт <code class="docutils literal notranslate"><span class="pre">Extent</span> <span class="pre">of</span> <span class="pre">'Перепроецировано'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Перепроецировать</span> <span class="pre">слой'</span></code>. Нажмите на кнопку <span class="guilabel">123</span> под ярлыком <span class="guilabel">Horizonal spacing</span> и выберите пункт <span class="guilabel">Model input</span>.</p></li>
</ol>
<img alt="../../_images/1325.png" class="align-center" src="../../_images/1325.png" />
<ol class="arabic simple" start="14">
<li><p>В поле <span class="guilabel">Using model input</span> выберите <code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">Size</span></code>. Повторите действия для настройки <span class="guilabel">Vertical Spacing</span>. Нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1423.png" class="align-center" src="../../_images/1423.png" />
<ol class="arabic simple" start="15">
<li><p>Теперь мы имеем глобальную сетку шестиугольников, покрывающую всю площадь базового слоя включая полигоны материков и места, где нет точек. Далее мы отфильтруем те полигоны сетки, на которых нет точек исходного слоя. Найдите инструмент <code class="docutils literal notranslate"><span class="pre">Извлечь</span> <span class="pre">по</span> <span class="pre">пространственному</span> <span class="pre">отношению</span></code> и перетащите его в главное окно.</p></li>
</ol>
<img alt="../../_images/1520.png" class="align-center" src="../../_images/1520.png" />
<ol class="arabic simple" start="16">
<li><p>В выпадающем списке <span class="guilabel">Извлечь объекты в слое</span> выберите пункт <code class="docutils literal notranslate"><span class="pre">'Сетка'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Create</span> <span class="pre">grid'</span></code>, в поле <span class="guilabel">где объект (геометрический оператор)</span> выберите <code class="docutils literal notranslate"><span class="pre">Пересекает</span></code> и в поле <span class="guilabel">Объекты из слоя для сравнения</span> выберите <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">points</span></code>. Нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1619.png" class="align-center" src="../../_images/1619.png" />
<ol class="arabic simple" start="17">
<li><p>Теперь у нас остались только те полигоны сетки, на которые попадает хотя бы одна точка. Чтобы сосчитать точки, используем инструмент <code class="docutils literal notranslate"><span class="pre">Count</span> <span class="pre">points</span> <span class="pre">in</span> <span class="pre">polygon</span></code>. Найдите и перетащите его в главное окно.</p></li>
</ol>
<img alt="../../_images/1720.png" class="align-center" src="../../_images/1720.png" />
<ol class="arabic simple" start="18">
<li><p>В выпадающем списке <span class="guilabel">Полигоны</span> выберите пункт <code class="docutils literal notranslate"><span class="pre">'Извлечено</span> <span class="pre">(по</span> <span class="pre">простр.</span> <span class="pre">отношению)'</span> <span class="pre">from</span> <span class="pre">algorithm</span> <span class="pre">'Извлечь</span> <span class="pre">по</span> <span class="pre">пространственному</span> <span class="pre">отношению'</span></code>. В списке <span class="guilabel">Точки</span> выберите <code class="docutils literal notranslate"><span class="pre">Input</span> <span class="pre">Points</span></code>. В поле <span class="guilabel">Количество</span> введите <code class="docutils literal notranslate"><span class="pre">Aggregated</span></code>. Нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/1817.png" class="align-center" src="../../_images/1817.png" />
<ol class="arabic simple" start="19">
<li><p>Модель готова. Нажмите кнопку <span class="guilabel">Save</span>.</p></li>
</ol>
<img alt="../../_images/1914.png" class="align-center" src="../../_images/1914.png" />
<ol class="arabic simple" start="20">
<li><p>Вернитесь в основное окно QGIS. Созданная вами модель находится в панели <span class="guilabel">Инструменты анализа</span> в группе <span class="menuselection">Модели ‣ projects ‣ piracy_hexbin</span>. Пришло время запустить и протестировать нашу модель. Поскольку наша цель - сосчитать количество точек входного слоя в каждой ячейке сетки, важно, чтобы сама сетка была сгенерирована в равновеликой проекции. Это гарантирует, что независимо от расположения сетки, площади, покрываемые ячейками, будут равны. Модель не требует явного указания проекции, вместо этого она использует проекцию, выбранную в окне <strong>Система координат проекта</strong>. Давайте выберем укажем для проекта глобальную равновеликую проекцию. Перейдите в меню <span class="menuselection">Проект ‣ Свойства</span>.</p></li>
</ol>
<img alt="../../_images/2013.png" class="align-center" src="../../_images/2013.png" />
<ol class="arabic simple" start="21">
<li><p>В диалоговом окне <span class="guilabel">Свойства проекта</span> перейдите на вкладку <span class="guilabel">Система координат</span>. Мы воспользуемся проекцией <strong>Мольвейде</strong>. В поле <span class="guilabel">Поиск</span> введите <code class="docutils literal notranslate"><span class="pre">Mollweide</span></code> и выберите <code class="docutils literal notranslate"><span class="pre">World_Mollweide</span> <span class="pre">EPSG:54009</span></code>. Нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/2116.png" class="align-center" src="../../_images/2116.png" />
<ol class="arabic simple" start="22">
<li><p>Можно увидеть, как слои перепроецировались на лету в выбранную проекцию. В панели <span class="guilabel">Инструменты анализа</span> перейдите к модели <code class="docutils literal notranslate"><span class="pre">piracy_hexbin</span></code> и запустите ее двойным щелчком.</p></li>
</ol>
<img alt="../../_images/2215.png" class="align-center" src="../../_images/2215.png" />
<ol class="arabic simple" start="23">
<li><p>В поле <span class="guilabel">Base Layer</span> выберите <code class="docutils literal notranslate"><span class="pre">ne_10m_land</span></code>, в поле <span class="guilabel">Input Points</span> выберите <code class="docutils literal notranslate"><span class="pre">ASAM_events</span></code>. Размер ячейки сетки должен быть указан в единицах выбранной проекции. Единицами проекции Молльвейде являются метры. В поле <span class="guilabel">Grid Size</span> введите <code class="docutils literal notranslate"><span class="pre">100000</span></code> м (100 км). Нажмите <span class="guilabel">Выполнить</span> чтобы запустить выполнение алгоритма. Когда процесс будет завершен, нажмите <span class="guilabel">Закрыть</span>.</p></li>
</ol>
<img alt="../../_images/2314.png" class="align-center" src="../../_images/2314.png" />
<ol class="arabic simple" start="24">
<li><p>В результате выполнения алгоритма в списке слоев появится новый  слой <code class="docutils literal notranslate"><span class="pre">Aggregated</span></code>. Этот слой, как вы можете заметить, имеет поле <em>NUMPOINTS</em>, содержащее количество точек внутри каждой ячейки сетки. Давайте применим к слою стиль для более наглядного представления информации. Нажмите правой кнопкой мыши на слое <code class="docutils literal notranslate"><span class="pre">Aggregated</span></code> и выберите <span class="guilabel">Свойства</span>.</p></li>
</ol>
<img alt="../../_images/2413.png" class="align-center" src="../../_images/2413.png" />
<ol class="arabic simple" start="25">
<li><p>Во вкладке <span class="guilabel">Стиль</span> выберите <code class="docutils literal notranslate"><span class="pre">Градуированный</span> <span class="pre">знак</span></code>, в поле <span class="guilabel">Value</span> выберите <code class="docutils literal notranslate"><span class="pre">NUMPOINTS</span></code>. Нажмите на поле, отображающее стиль после ярлыка <span class="guilabel">Значок</span>.</p></li>
</ol>
<img alt="../../_images/2511.png" class="align-center" src="../../_images/2511.png" />
<ol class="arabic simple" start="26">
<li><p>Выберите символ <span class="guilabel">Простая заливка</span>, а в списке <span class="guilabel">Стиль обводки</span> выберите <span class="guilabel">Без обводки</span>. Это сделает грани шестиугольников прозрачными. Нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<img alt="../../_images/2611.png" class="align-center" src="../../_images/2611.png" />
<ol class="arabic simple" start="27">
<li><p>В выпадающем списке <span class="guilabel">Градиент</span> выберите пункт <code class="docutils literal notranslate"><span class="pre">Viridis</span></code>. Снова нажмите на стрелку выпадающего списка и выберите <span class="guilabel">Инвертировать градиент</span>.</p></li>
</ol>
<img alt="../../_images/2711.png" class="align-center" src="../../_images/2711.png" />
<ol class="arabic simple" start="28">
<li><p>Градуированный знак делит значения в выбранном поле на классы и присваивает каждому классу свой цвет. В выпадающем списке <span class="guilabel">Мода</span> выберите <code class="docutils literal notranslate"><span class="pre">Natural</span> <span class="pre">Breaks</span> <span class="pre">(Jenks)</span></code> и нажмите <span class="guilabel">Классифицировать</span>. Нажмите <span class="guilabel">OK</span>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Подробнее о режимах классификации вы можете прочитать здесь: <a class="reference internal" href="../basic_vector_styling.html"><span class="doc">Основная стилизация векторного слоя</span></a>.</p>
</div>
<img alt="../../_images/2811.png" class="align-center" src="../../_images/2811.png" />
<ol class="arabic simple" start="29">
<li><p>Вернитесь в основное окно QGIS, отключите слой <code class="docutils literal notranslate"><span class="pre">ASAM_events</span></code>. Вы увидите прекрасную визуализацию проблемных зон на земном шаре.</p></li>
</ol>
<img alt="../../_images/2910.png" class="align-center" src="../../_images/2910.png" />
<p>Теперь, когда последовательность операций запрограммирована в модели, нетрудно воспроизвести результат. Также модель позволяет экспериментировать без повторения промежуточных шагов вручную. Если ваши входные данные со временем изменятся, например, если через несколько месяцев будет опубликован обновленный список случаев пиратства, вы можете запустить вашу модель с новым набором данных и воссоздать аналогичную карту без необходимости помнить каждый шаг.</p>
</section>
</section>





  <div id="disqus_thread"></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2021, Ujaval Gandhi.<br/>
      Обновлено: сент. 08, 2023.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.0.1.<br/>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/processing_graphical_modeler.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  </body>
</html>